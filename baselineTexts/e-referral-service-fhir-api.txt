e-Referral Service - FHIR API

Access the e-Referral Service (e-RS) - the national service for creating and managing paperless referrals in primary and secondary care.

Page content
Top of page
Overview
Who can use this API
Related APIs
API status and roadmap
Service level
Technology
Network access
Security and authorisation
Environments and testing
Onboarding
Endpoints
A004 - Retrieve reference data
A005 - Retrieve Referral Request
A005 Retrieve Referral Request (Versioned)
A006 - Retrieve attachment
A007 - Retrieve clinical information
A008 - Retrieve referral worklist
A010 - Patient service search
A011 - Create referral
A012 - Maintain referral letter
A013 - Accept referral
A014 - Reject referral
A015 - Retrieve appointment slots
A016 - Book or defer appointment
A019 - Generate patient letter
A020 - Upload file to document store
A021 - Create referral and send for triage
A022 - Cancel appointment, action later
A023 - Retrieve advice and guidance requests worklist
A024 - Retrieve advice and guidance request summary
A024 - Retrieve advice and guidance request summary (versioned)
A025 - Retrieve advice and guidance conversation
A026 - Send advice and guidance response
A027 - Convert advice and guidance request to referral
A028 - Record triage outcome
A029 - Available actions for user list
A030 - Retrieve e-RS business functions
A031 - Change Shortlist
A032 - Change Shortlist and Send for Triage
A033 - Retrieve Healthcare Service
A035 - Search for Healthcare Services
A037 - Retrieve Healthcare Service Version
Overview

Use this API to create paperless referrals from primary to secondary care with the e-Referral Service (e-RS).

As a primary care referrer, you can:

create a new e-referral
search for relevant patient services to create a shortlist
access existing e-referrals
create a triage request for the Referral Assessment Service (RAS)
upload and manage a patient letter or attachments, linking them to a referral
retrieve appointment slots and book appointments
defer a booking to a provider if an appointment slot is unavailable

As a secondary care provider, you can:

access referrals as a worklist
retrieve non-clinical information (meta-data) about the referral
retrieve attachments which are linked to a referral or triage (RAS) request
retrieve clinical information which has been provided by a referrer
accept or reject a referral request
retrieve Advice & Guidance (A&G) conversations and send responses
convert Advice & Guidance (A&G) conversations into a referral

You cannot use this API to:

get patient details â€“ instead, use the Personal Demographic Service (PDS)

You can access the following data:

referral attachments
referral letters
appointment slots
worklists for referral requests
worklists for triage (RAS) requests
worklists for Advice and Guidance (A&G) requests
conversation histories for Advice and Guidance (A&G) requests
Access modes

This API has two access modes:

Access mode	Authentication via	Functions	Availability
Application-restricted, unattended access	Signed JWT	A004, A005, A006 and A007	Alpha
Healthcare worker, user-restricted access	CIS2	All Endpoints	Beta
Application-restricted, unattended access

This access mode has been introduced to allow a Partner application which has been registered with us and authenticated via signed JWT to interact with a subset of e-RS FHIR API endpoints in an unattended and read-only fashion. Application-restricted, unattended access should only be used when authenticating a human user (for example via smartcard) is not possible.

Writing changes (such as Create Referral) are not supported via this access mode.

Healthcare worker, user-restricted access

This access mode allows Partner applications to access e-RS FHIR API endpoints by authenticating users with NHS Care Identity Service 2 (CIS2).

This access mode must be used for writing changes (such as Create Referral).

Who can use this API

You can use this API if you are a software developer wishing to interact with the e-referrals service (e-RS) data.

To use this API:

you must have justification for doing so
you must register with the e-RS Partners Service
as an e-RS Partner, we offer you guidance and support for onboarding via the e-RS Partners Service which can be contacted via emailing nhserspartners@nhs.net
you must assure your solution before we grant access to live data
clinical safety remains your responsibility (and the responsibility of your end user organisations), as laid out in the NHS e-RS Integration API compliance approach

See the onboarding section below for more information.

Related APIs

HL7 V3 API - this API allows you to manage appointment slots for a Patient Administration System (PAS).

API status and roadmap
Application-restricted, unattended access

This access mode is in alpha, meaning:

it is available for testing in the Alpha environment only
we might make breaking changes
Healthcare worker, user-restricted access

The e-RS FHIR STU3 API is in beta when accessed using CIS2. There is also one FHIR R4 endpoint, A030 - Retrieve e-RS business functions endpoint, as part of our beta. We plan to move more endpoints into the FHIR R4 standard in the future, as part of our roadmap.

For the current e-RS roadmap see the future of the NHS e-referral service.

Service level

This API is a gold service, meaning it is operational and supported 24 x 7 x 365.

For more details, see service levels.

Technology

This API is primarily RESTful and based on FHIR global standards for health care data exchange.

Network access

This API is available on the internet and, indirectly, on the Health and Social Care Network (HSCN).

To use this API with NHS smartcards you do need an HSCN connection, although internet-facing alternatives are available.

For more details see Network access for APIs.

Security and authorisation
Application-restricted, unattended access

This access mode is application-restricted, meaning we authenticate the calling application but not the end user.

You can only use this access mode when authenticating a human user (for example via smartcard) is not possible.

To use this access mode, use the following security pattern:

Application-restricted RESTful API - signed JWT authentication
Healthcare worker, user-restricted access

This access mode is user-restricted, meaning an end user must be present, authenticated and authorised.

The end user must be:

present
a healthcare worker
strongly authenticated and authorised by NHS Care Identity Service 2 (CIS2)

To use this access mode, use one of the following security patterns:

user-restricted RESTful API - using NHS CIS2 - combined authentication and authorisation
user-restricted RESTful API - using NHS CIS2 - separate authentication and authorisation
Role and Organisation Validation

For most e-RS endpoints requests are made in the context of a specific authorised e-RS Role at a specific Organisation for the authenticated user.

The e-RS Role is supplied to the endpoint via the nhsd-ers-business-function request header.

The Organisation is supplied to the endpoint via the nhsd-ers-ods-code request header.

Suitable values for these request headers can be obtained from the Practitioner Role Bundle returned by A030 - Retrieve e-RS business functions.

On Behalf Of User

If the SERVICE_PROVIDER_CLINICIAN_ADMIN role is used then the User ID of the Service Provider Clinician that the Admin is acting on behalf of must be supplied via the NHSD-eRS-On-Behalf-Of-User-ID header.

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Environments and testing
Environment	Base URL
Sandbox	https://sandbox.api.service.nhs.uk/referrals/FHIR
Alpha	See Alpha testing section below
Integration test	https://int.api.service.nhs.uk/referrals/FHIR
Production	https://api.service.nhs.uk/referrals/FHIR
Sandbox testing

Our sandbox environment:

is for developer education and early testing
only covers a limited set of scenarios
is stateless, so does not actually persist any updates
is open access, so does not allow you to test authorisation

Try out the sandbox using our 'Try this API' feature, see the documentation for each endpoint.

The sandbox will only respond to an input which exactly matches one of the examples provided; it is otherwise stateless.

Alpha testing

Our alpha environment:

is available for early developer testing of future functionality
may experience breaking changes or downtime without advance notice, but only if we cannot avoid it
can be accessed by contacting nhserspartners@nhs.net
Integration testing

Our integration test environment:

is where the majority of your integration efforts will take place
is where we conduct witness testing for your application
is stateful, so data will be persisted
Onboarding

You need to get your software approved by us before it can go live. We call this process onboarding.

Onboarding essentially involves connecting to the Path-to-Live (PTL) environments, assuring your solution and going live, in accordance with the Supplier Conformance Assessment List (SCAL) process.

In order to pass through the onboarding process as efficiently as possible, it is worth planning ahead.

When following the general SCAL process, please note:

In step 1: to use this API, you need to register with nhserspartners@nhs.net using Partner Registration and discuss your use case with us. You must also register with the API Management team via https://digital.nhs.uk/developer/getting-started to register your application.

In step 2: to request a SCAL, please ensure you have discussed your solution with the Partners service via nhserspartners@nhs.net, who will put you in touch with ersapi.assurance@nhs.net who are responsible for assurance of solutions that integrate with the e-RS FHIR API.

In step 8: to organise witness testing of your solution, please liaise with ersapi.assurance@nhs.net.

In step 11: when submitting your SCAL for review, please liaise with ersapi.assurance@nhs.net.

In step 12: to obtain a Connection Agreement, please liaise with interop.mgmt@nhs.net. You will need to have successfully passed witness testing with ersapi.assurance@nhs.net and obtained a Technical Conformance Certificate (TCC).

In step 13: to obtain the End User Organisation Acceptable Use Policy, please liaise with interop.mgmt@nhs.net.

In step 14: to request production access, send your completed SCAL and TCC to interop.mgmt@nhs.net. To activate your application in production please contact us.

Endpoints
A004 - Retrieve reference data
GET /STU3/CodeSystem/{codeSystemType}
Try this API
Overview

Use this endpoint to retrieve a list of reference data codes along with the user-friendly display values used in the e-RS Professional Application.

Supported security patterns
Application-restricted, unattended access
Healthcare worker, user-restricted access
Pre-requisites
Application-restricted access

In order to use this endpoint you must be an authenticated e-RS calling application.

Healthcare worker, user-restricted access

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN
SERVICE_PROVIDER_CLINICIAN
SERVICE_PROVIDER_CLINICIAN_ADMIN
Use case

As an authenticated user or application

I need to retrieve e-RS reference data

So I can use it with other endpoints or display the reference data in a user-friendly format to my users.

Related endpoints

Reference data may be needed for other endpoints, for example when including Specialty and Clinic Type reference data to:

find services that meet the referral needs of a patient using A010 - Patient service search, and
create a referral using A011 - Create referral or A021 - Create referral and send for triage

You may also wish to present the user-friendly names for the reference data, for example when viewing the referral using A005 - Retrieve referral request.

Documentation for other endpoints will reference this endpoint, where specific reference data is required.

Sandbox test scenarios

You can test the following scenarios in our sandbox environment

Scenario	Request	Response
Retrieve speciality reference data	codeSystemType=SPECIALTY	Specialty details
Retrieve clinic type reference data	codeSystemType=CLINIC-TYPE	Clinic type details
Retrieve appointment cancellation reason reference data	codeSystemType=APPOINTMENT-CANCELLATION-REASON	Appointment reason type details
Retrieve referral cancellation reason reference data	codeSystemType=REFERRAL-CANCELLATION-REASON	ReferralRequest reason type details
Request
Path parameters
Name	Description
codeSystemType	

String

The requested code system

Allowed values: SPECIALTY, APPOINTMENT-CANCELLATION-REASON, CLINIC-TYPE, REFERRAL-CANCELLATION-REASON

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation.

Not allowed for application-restricted access.

Required for user-restricted access.

Example: R69


nhsd-ers-business-function	

String

The e-RS Business Function of the caller.

Not allowed for application-restricted access.

Required for user-restricted access.

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER


NHSD-eRS-On-Behalf-Of-User-ID	

String

The (SDS) user ID of the user that the authenticating user wishes to act on behalf of (OBO).

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Where an OBO User ID is supplied the authenticating user must be an SPCA and the OBO User ID must be that of an appropriate SPC.

Not allowed for application-restricted access.

Required for user-restricted access where the Service Provider Clinician Admin Business Function is used for authentication.

Example: 021600556514


X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Response
HTTP status: 200

e-RS Reference Data

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Examples

Specialty Reference Data

This is example data only and should not be taken as the real reference data. Specialty data may have 'effectiveTo' dates in the past

Copy
{
  "id" : "SPECIALTY",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Specialty-CodeSystem-1" ]
  },
  "resourceType" : "CodeSystem",
  "url" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
  "name" : "e-RS Specialty",
  "status" : "active",
  "date" : "2021-05-26T13:47:38.185000+00:00",
  "publisher" : "e-Referral Service",
  "description" : "e-RS Specialty",
  "copyright" : "Copyright Â© 2016 HL7 UK",
  "content" : "complete",
  "property" : [ {
    "code" : "effectiveFrom",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#effectiveFrom",
    "type" : "dateTime"
  }, {
    "code" : "effectiveTo",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#effectiveTo",
    "type" : "dateTime"
  } ],
  "concept" : [ {
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-EffectivefromDate-1",
      "valueDate" : "2004-06-01"
    }, {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-EffectivetoDate-1",
      "valueDate" : "2008-05-09"
    } ],
    "code" : "ADULT_MENTAL_ILLNESS",
    "display" : "Adult Mental Illness",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "effectiveTo",
      "valueDateTime" : "2008-05-09T00:00:00+00:00"
    } ]
  }, {
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-EffectivefromDate-1",
      "valueDate" : "2004-06-01"
    } ],
    "code" : "ALLERGY",
    "display" : "Allergy",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    } ]
  }, {
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-EffectivefromDate-1",
      "valueDate" : "2004-06-01"
    }, {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-EffectivetoDate-1",
      "valueDate" : "2008-05-09"
    } ],
    "code" : "AUDIOLOGICAL_MEDICINE",
    "display" : "Audiological Medicine",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "effectiveTo",
      "valueDateTime" : "2008-05-09T00:00:00+00:00"
    } ]
  }, {
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-EffectivefromDate-1",
      "valueDate" : "2004-06-01"
    }, {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-EffectivetoDate-1",
      "valueDate" : "2008-05-09"
    } ],
    "code" : "BONE_AND_MARROW_TRANSPLANTATION",
    "display" : "Bone and Marrow Transplantation",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "effectiveTo",
      "valueDateTime" : "2008-05-09T00:00:00+00:00"
    } ]
  } ]
}

Clinic Type Reference Data

This is example data only and should not be taken as the real reference data.

Copy
{
  "id" : "CLINIC-TYPE",
  "meta" : {
    "profile" : [ "http://hl7.org/fhir/StructureDefinition/shareablecodesystem" ]
  },
  "resourceType" : "CodeSystem",
  "url" : "_baseUrl_/STU3/CodeSystem/CLINIC-TYPE",
  "name" : "e-RS Clinic Type",
  "status" : "active",
  "date" : "2021-05-26T13:49:36.514000+00:00",
  "publisher" : "e-Referral Service",
  "description" : "e-RS Clinic Type",
  "copyright" : "Copyright Â© 2016 HL7 UK",
  "content" : "complete",
  "property" : [ {
    "code" : "effectiveFrom",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#effectiveFrom",
    "type" : "dateTime"
  }, {
    "code" : "effectiveTo",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#effectiveTo",
    "type" : "dateTime"
  }, {
    "code" : "specialty",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#specialty",
    "type" : "Coding"
  } ],
  "concept" : [ {
    "code" : "GENERAL_ADULT_MENTAL_ILLNESS",
    "display" : "General Adult Mental Illness",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "effectiveTo",
      "valueDateTime" : "2008-05-09T00:00:00+00:00"
    }, {
      "code" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "ADULT_MENTAL_ILLNESS"
      }
    } ]
  }, {
    "code" : "ALLERGY_1",
    "display" : "Allergy",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "ALLERGY"
      }
    } ]
  }, {
    "code" : "FOOD_AND_DRUG_ALLERGY",
    "display" : "Food and Drug Allergy",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "effectiveTo",
      "valueDateTime" : "2009-03-14T00:00:00+00:00"
    }, {
      "code" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "ALLERGY"
      }
    } ]
  }, {
    "code" : "GENERAL_PAEDIATRIC_AUDIOLOGICAL_MEDICINE",
    "display" : "General Paediatric Audiological Medicine",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "effectiveTo",
      "valueDateTime" : "2007-11-16T00:00:00+00:00"
    }, {
      "code" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "AUDIOLOGICAL_MEDICINE"
      }
    } ]
  }, {
    "code" : "GENERAL_ADULT_AUDIOLOGICAL_MEDICINE",
    "display" : "General Adult Audiological Medicine",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "effectiveTo",
      "valueDateTime" : "2008-05-09T00:00:00+00:00"
    }, {
      "code" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "AUDIOLOGICAL_MEDICINE"
      }
    } ]
  }, {
    "code" : "GENERAL_AUDIOLOGICAL_MEDICINE",
    "display" : "General Audiological Medicine",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "effectiveTo",
      "valueDateTime" : "2008-05-09T00:00:00+00:00"
    }, {
      "code" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "AUDIOLOGICAL_MEDICINE"
      }
    } ]
  }, {
    "code" : "GENERAL_BONE_AND_MARROW_TRANSPLANTATION",
    "display" : "General Bone and Marrow Transplantation",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "effectiveTo",
      "valueDateTime" : "2008-05-09T00:00:00+00:00"
    }, {
      "code" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "BONE_AND_MARROW_TRANSPLANTATION"
      }
    } ]
  } ]
}

Appointment Cancellation Reason Reference Data

This is example data only and should not be taken as the real reference data.

Copy
{
  "id" : "APPOINTMENT-CANCELLATION-REASON",
  "meta" : {
    "profile" : [ "http://hl7.org/fhir/StructureDefinition/shareablecodesystem" ]
  },
  "resourceType" : "CodeSystem",
  "url" : "_baseUrl_/STU3/CodeSystem/APPOINTMENT-CANCELLATION-REASON",
  "version" : "1",
  "name" : "e-RS Appointment Cancellation Reason",
  "status" : "active",
  "experimental" : false,
  "date" : "2022-01-21T13:28:30.188000+00:00",
  "publisher" : "e-Referral Service",
  "description" : "e-RS Appointment Cancellation Reason",
  "copyright" : "Copyright Â© 2016 HL7 UK",
  "caseSensitive" : true,
  "content" : "complete",
  "property" : [ {
    "code" : "effectiveFrom",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#effectiveFrom",
    "type" : "dateTime"
  }, {
    "code" : "effectiveTo",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#effectiveTo",
    "type" : "dateTime"
  }, {
    "code" : "appointmentBookingCancellationReasonType",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#appointmentBookingCancellationReasonType",
    "type" : "Coding"
  }, {
    "code" : "willCancelWholeRequest",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#willCancelWholeRequest",
    "type" : "boolean"
  }, {
    "code" : "commentIsMandatory",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#commentIsMandatory",
    "type" : "boolean"
  }, {
    "code" : "businessFunction",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#businessFunction",
    "type" : "Coding"
  }, {
    "code" : "usage",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#usage",
    "type" : "Coding"
  } ],
  "concept" : [ {
    "code" : "ADDITIONAL_REQ_NOT_AVAILABLE",
    "display" : "Additional requirement not available",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "effectiveTo",
      "valueDateTime" : "2007-06-25T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "ADDITIONAL_REQ_NOT_ELIGIBLE",
    "display" : "Not eligible for additional requirement",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "ADDITIONAL_REQ_NOT_PROVIDED",
    "display" : "Additional req not provided at location",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "ADDITIONAL_REQ_UNAVAILABLE",
    "display" : "Additional req unavailable for this appt",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "APPT_MADE_FOR_WRONG_PATIENT",
    "display" : "Appt. made for wrong patient",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-13T00:00:00+00:00"
    }, {
      "code" : "effectiveTo",
      "valueDateTime" : "2014-10-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "UNKNOWN"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "CLINIC_CANCELLED",
    "display" : "Clinic cancelled",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "CLINIC_CANCELLED_ALTERNATIVE",
    "display" : "Clinic cancelled",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "CLINIC_OVERRUN",
    "display" : "Clinic overrun",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "CLINIC_OVERRUN_ALTERNATIVE",
    "display" : "Clinic overrun",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "FURTHER_INFORMATION_REQUIRED",
    "display" : "Further information required",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER_REJECT"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "SERVICE_PROVIDER_CLINICIAN_ADMIN"
      }
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "SERVICE_PROVIDER_CLINICIAN"
      }
    }, {
      "code" : "usage",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentCancellationReasonUsage-1",
        "code" : "REJECT"
      }
    } ]
  }, {
    "code" : "NOT_SPECIFIED",
    "display" : "Not Specified",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2000-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "OTHER",
    "display" : "Other reason",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER_REJECT"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "SERVICE_PROVIDER_CLINICIAN_ADMIN"
      }
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "SERVICE_PROVIDER_CLINICIAN"
      }
    }, {
      "code" : "usage",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentCancellationReasonUsage-1",
        "code" : "REJECT"
      }
    } ]
  }, {
    "code" : "OTHER_MIGRATION_FROM_CAB",
    "display" : "Other",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2014-10-01T00:00:00+00:00"
    }, {
      "code" : "effectiveTo",
      "valueDateTime" : "2014-10-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "UNKNOWN"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "OUTPATIENT_APPT_NOT_REQUIRED",
    "display" : "Outpatient appointment not required",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER_REJECT"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "SERVICE_PROVIDER_CLINICIAN_ADMIN"
      }
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "SERVICE_PROVIDER_CLINICIAN"
      }
    }, {
      "code" : "usage",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentCancellationReasonUsage-1",
        "code" : "REJECT"
      }
    } ]
  }, {
    "code" : "PATIENT_APPOINTMENT_CANCELLATION_OTHER",
    "display" : "Other reason",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PATIENT"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN_ADMIN"
      }
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN"
      }
    }, {
      "code" : "usage",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentCancellationReasonUsage-1",
        "code" : "CANCEL"
      }
    } ]
  }, {
    "code" : "PATIENT_APPOINTMENT_CLASH",
    "display" : "Patient - Clashes with another appointment",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "effectiveTo",
      "valueDateTime" : "2007-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "UNKNOWN"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "PATIENT_HOLIDAY",
    "display" : "Patient on holiday",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PATIENT"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN_ADMIN"
      }
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN"
      }
    }, {
      "code" : "usage",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentCancellationReasonUsage-1",
        "code" : "CANCEL"
      }
    } ]
  }, {
    "code" : "PATIENT_ILL",
    "display" : "Patient is ill",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PATIENT"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN_ADMIN"
      }
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN"
      }
    }, {
      "code" : "usage",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentCancellationReasonUsage-1",
        "code" : "CANCEL"
      }
    } ]
  }, {
    "code" : "PATIENT_OTHER_ENGAGEMENT",
    "display" : "Patient - Other more pressing engagement",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PATIENT"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN_ADMIN"
      }
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN"
      }
    }, {
      "code" : "usage",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentCancellationReasonUsage-1",
        "code" : "CANCEL"
      }
    } ]
  }, {
    "code" : "PRIORITY_CHANGE",
    "display" : "Priority change for other reasons",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    } ]
  }, {
    "code" : "PRIORITY_INAPPROPRIATE",
    "display" : "Inappropriate priority",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    } ]
  }, {
    "code" : "PROVIDER_CANCELLATION",
    "display" : "Other - Provider cancellation",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    } ]
  }, {
    "code" : "REDIRECTED_AGE",
    "display" : "Redirected due to patient age",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "UNKNOWN"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    } ]
  }, {
    "code" : "REDIRECTED_APPROPRIATE_CLINIC",
    "display" : "Redirected to more appropriate clinic",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "UNKNOWN"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    } ]
  }, {
    "code" : "REDIRECTED_APPROPRIATE_SPECIALTY",
    "display" : "Redirected to more appropriate specialty",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "UNKNOWN"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    } ]
  }, {
    "code" : "REDIRECTED_CONFIDENTIALITY",
    "display" : "Redirected due to confidentiality",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "UNKNOWN"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    } ]
  }, {
    "code" : "REDIRECTED_GENDER",
    "display" : "Redirected due to patient gender",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "UNKNOWN"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    } ]
  }, {
    "code" : "REDIRECTED_OTHER",
    "display" : "Redirected due to other reason",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "UNKNOWN"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    } ]
  }, {
    "code" : "REDIRECTED_PRIORITY",
    "display" : "Redirected due to priority",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "UNKNOWN"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    } ]
  }, {
    "code" : "REDIRECTED_STAFF_VACATION",
    "display" : "Redirected due to staff vacation",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "UNKNOWN"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    } ]
  }, {
    "code" : "REDIRECTED_TEMPORARILY",
    "display" : "A Temporary Redirected Reason",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "effectiveTo",
      "valueDateTime" : "2014-10-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "UNKNOWN"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "SERVICE_INAPPROPRIATE",
    "display" : "Inappropriate service",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER_REJECT"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "SERVICE_PROVIDER_CLINICIAN_ADMIN"
      }
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "SERVICE_PROVIDER_CLINICIAN"
      }
    }, {
      "code" : "usage",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentCancellationReasonUsage-1",
        "code" : "REJECT"
      }
    } ]
  }, {
    "code" : "SERVICE_PREREQUISITES_NOT_COMPLETE",
    "display" : "Pre-requisites for service not complete",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER_REJECT"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "SERVICE_PROVIDER_CLINICIAN_ADMIN"
      }
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "SERVICE_PROVIDER_CLINICIAN"
      }
    }, {
      "code" : "usage",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentCancellationReasonUsage-1",
        "code" : "REJECT"
      }
    } ]
  }, {
    "code" : "SLOT_CANCELLED",
    "display" : "Slot cancelled",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "SLOT_CANCELLED_ALTERNATIVE",
    "display" : "Slot cancelled",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "PROVIDER"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "WRONG_PROVIDER",
    "display" : "Appt. made with wrong provider",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-02-13T00:00:00+00:00"
    }, {
      "code" : "effectiveTo",
      "valueDateTime" : "2004-06-13T00:00:00+00:00"
    }, {
      "code" : "appointmentBookingCancellationReasonType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentBookingCancellationReasonType-1",
        "code" : "UNKNOWN"
      }
    }, {
      "code" : "willCancelWholeRequest",
      "valueBoolean" : false
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    } ]
  } ]
}

ReferralRequest Cancellation Reason Reference Data

This is example data only and should not be taken as the real reference data.

Copy
{
  "id" : "REFERRAL-CANCELLATION-REASON",
  "meta" : {
    "profile" : [ "http://hl7.org/fhir/StructureDefinition/shareablecodesystem" ]
  },
  "resourceType" : "CodeSystem",
  "url" : "_baseUrl_/STU3/CodeSystem/REFERRAL-CANCELLATION-REASON",
  "version" : "1",
  "name" : "e-RS ReferralRequest Cancellation Reason",
  "status" : "active",
  "experimental" : false,
  "date" : "2022-01-21T13:27:51.923000+00:00",
  "publisher" : "e-Referral Service",
  "description" : "e-RS ReferralRequest Cancellation Reason",
  "copyright" : "Copyright Â© 2016 HL7 UK",
  "caseSensitive" : true,
  "content" : "complete",
  "property" : [ {
    "code" : "effectiveFrom",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#effectiveFrom",
    "type" : "dateTime"
  }, {
    "code" : "effectiveTo",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#effectiveTo",
    "type" : "dateTime"
  }, {
    "code" : "commentIsMandatory",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#commentIsMandatory",
    "type" : "boolean"
  }, {
    "code" : "canCancelAppointment",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#canCancelAppointment",
    "type" : "boolean"
  }, {
    "code" : "businessFunction",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#businessFunction",
    "type" : "Coding"
  }, {
    "code" : "referrerUsage",
    "uri" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Concept-Properties-1#referrerUsage",
    "type" : "Coding"
  } ],
  "concept" : [ {
    "code" : "BOOKED_CLINICAL_NEED",
    "display" : "Booked more urgently due to clinical need",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2019-07-23T17:09:56+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "BOOKED_OUTSIDE_CAB",
    "display" : "Patient booked outside NHS e-Referral Service",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2007-09-14T00:00:00+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : true
    } ]
  }, {
    "code" : "COMMUNITY_SERVICE_NA",
    "display" : "Sent to community service not available in this system",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2019-07-23T17:09:56+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "COMPLEX_PATHWAY",
    "display" : "Complex pathway, multiple appointments needed",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2019-07-23T17:09:56+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "INTEND_PRIVATE",
    "display" : "Patient intends to go private",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : true
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN_ADMIN"
      }
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN"
      }
    }, {
      "code" : "referrerUsage",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralRequestCancellationReasonUsage-1",
        "code" : "CANCEL_REFERRAL"
      }
    } ]
  }, {
    "code" : "NO_LONGER_REQUIRED",
    "display" : "Referral is no longer required",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2019-07-23T17:09:56+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "OTHER_OTHER",
    "display" : "Other reason",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2019-07-23T17:09:56+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "OUTPATIENT_CLINICIAN_NA",
    "display" : "Sent to outpatient service as named clinician is not available in this system",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2019-07-23T17:09:56+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "OUTPATIENT_SERVICE_NA",
    "display" : "Sent to outpatient service not available in this system",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2019-07-23T17:09:56+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "PATIENT_DIED",
    "display" : "Patient died",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : true
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN_ADMIN"
      }
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN"
      }
    }, {
      "code" : "referrerUsage",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralRequestCancellationReasonUsage-1",
        "code" : "CANCEL_REFERRAL"
      }
    } ]
  }, {
    "code" : "PATIENT_REQUEST_CANCELLATION_OTHER",
    "display" : "Other reason",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : true
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN_ADMIN"
      }
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN"
      }
    }, {
      "code" : "referrerUsage",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralRequestCancellationReasonUsage-1",
        "code" : "CANCEL_REFERRAL"
      }
    } ]
  }, {
    "code" : "RAISED_IN_ERROR",
    "display" : "Referral raised in error",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2007-09-14T00:00:00+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : true
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN_ADMIN"
      }
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN"
      }
    }, {
      "code" : "referrerUsage",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralRequestCancellationReasonUsage-1",
        "code" : "CANCEL_REFERRAL"
      }
    } ]
  }, {
    "code" : "REFERRER_CANCELLATION",
    "display" : "Other - Referrer request cancellation",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2007-09-14T00:00:00+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : true
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN_ADMIN"
      }
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN"
      }
    }, {
      "code" : "referrerUsage",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralRequestCancellationReasonUsage-1",
        "code" : "CANCEL_REFERRAL"
      }
    } ]
  }, {
    "code" : "STRAIGHT_TO_TEST",
    "display" : "Sent straight to test / procedure",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2019-07-23T17:09:56+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : true
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "TREATMENT_NO_LONGER_REQUIRED",
    "display" : "Referral no longer required",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : true
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN_ADMIN"
      }
    }, {
      "code" : "businessFunction",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN"
      }
    }, {
      "code" : "referrerUsage",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralRequestCancellationReasonUsage-1",
        "code" : "CANCEL_REFERRAL"
      }
    } ]
  }, {
    "code" : "TRIAGE_ENDED",
    "display" : "Triage Ended",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2019-07-23T17:09:56+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : false
    } ]
  }, {
    "code" : "PATIENT_APPOINTMENT_CANCELLATION_OTHER",
    "display" : "Other reason",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : true
    } ]
  }, {
    "code" : "PROVIDER_CANCELLATION",
    "display" : "Other - Provider Cancellation",
    "property" : [ {
      "code" : "effectiveFrom",
      "valueDateTime" : "2004-06-01T00:00:00+00:00"
    }, {
      "code" : "commentIsMandatory",
      "valueBoolean" : false
    }, {
      "code" : "canCancelAppointment",
      "valueBoolean" : true
    } ]
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	

id
string
required
	
Identifier of this code system
Allowed values: SPECIALTY, APPOINTMENT-CANCELLATION-REASON, CLINIC-TYPE, REFERRAL-CANCELLATION-REASON


meta
object
required
	

resourceType
string
required
	
Allowed values: CodeSystem


url
string
required
	
Example: _baseUrl_/STU3/CodeSystem/SPECIALTY


name
string
required
	
Description of the code system
Allowed values: e-RS Appointment Cancellation Reason, e-RS Specialty, e-RS Clinic Type, e-RS ReferralRequest Cancellation Reason


status
string
required
	
Allowed values: active


date
string date-time
required
	

publisher
string
	
Allowed values: e-Referral Service


description
string
required
	
Example: e-RS Specialty


copyright
string
	
Example: Copyright Â© 2016 HL7 UK


content
string
required
	
Allowed values: complete


property
array
required
	
Code System Properties

Some properties are only returned for certain code systems

Property	Code System
EffectiveFrom	All Code Systems
EffectiveTo	All Code Systems
Specialty	CLINIC-TYPE
AppointmentBookingCancellationReasonType	APPOINTMENT-CANCELLATION-REASON
WillCancelWholeRequest	APPOINTMENT-CANCELLATION-REASON
Usage	APPOINTMENT-CANCELLATION-REASON
CommentIsMandatory	APPOINTMENT-CANCELLATION-REASON / REFERRAL-CANCELLATION-REASON
BusinessFunction	APPOINTMENT-CANCELLATION-REASON / REFERRAL-CANCELLATION-REASON
CanCancelAppointment	REFERRAL-CANCELLATION-REASON
ReferrerUsage	REFERRAL-CANCELLATION-REASON


concept
array
required
	
Details of the code system
HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A005 - Retrieve Referral Request
GET /STU3/ReferralRequest/{ubrn}
Try this API
Overview

Use this endpoint to retrieve details of a referral. This includes references to clinical attachments, related referrals and other important data.

Supported security patterns
Application-restricted access
Healthcare worker, user-restricted access
Pre-requisites
Application-restricted access

In order to use this endpoint you must be an authenticated e-RS calling application.

Healthcare worker, user-restricted access

In order to use this endpoint you must be an authenticated e-RS user or application and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN
SERVICE_PROVIDER_CLINICIAN
SERVICE_PROVIDER_CLINICIAN_ADMIN

You need to use the Unique Booking Reference Number (UBRN) of a referral request in order to retrieve details of a referral.

Use case

As an authenticated user or application

I want to read details of a referral

So that I can decide what further action may be needed.

Related endpoints

You can retrieve attachments that are associated with the referral using A006 - Retrieve attachment

You can retrieve a clinical information summary for the referral using A007 - Retrieve clinical information

You can search for services appropriate to a referral to form a shortlist using A010 - Patient service search

If bookable services are on the shortlist of the referral, you can retrieve appointment slots for a service on the shortlist for a referral using A015 - Retrieve appointment slots

You can retrieve the patient letter appropriate to the referral using A019 - Generate patient letter

Sandbox test scenarios

You can test the following scenarios in our sandbox environment

Scenario	Request
Unbooked ReferralRequest	ubrn=000000070000
ReferralRequest booked to directly-bookable service	ubrn=000000070001
ReferralRequest booked to indirectly-bookable service	ubrn=000000070002
ReferralRequest deferred to service provider for booking	ubrn=000000070003
ReferralRequest that was converted from an Advice and Guidance Request	ubrn=000000070004
ReferralRequest with related ReferralRequest	ubrn=000000070005
Request
Path parameters
Name	Description
ubrn	

String

The unique booking reference number of the referral request

Example: 000000070000

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation.

Not allowed for application-restricted access.

Required for user-restricted access.

Example: R69


nhsd-ers-business-function	

String

The e-RS Business Function of the caller.

Not allowed for application-restricted access.

Required for user-restricted access.

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER


NHSD-eRS-On-Behalf-Of-User-ID	

String

The (SDS) user ID of the user that the authenticating user wishes to act on behalf of (OBO).

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Where an OBO User ID is supplied the authenticating user must be an SPCA and the OBO User ID must be that of an appropriate SPC.

Not allowed for application-restricted access.

Required for user-restricted access where the Service Provider Clinician Admin Business Function is used for authentication.

Example: 021600556514


X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Response
HTTP status: 200

e-RS Referral Request

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


ETag	

String

Record version identifier enclosed in quotes and preceded by 'W/'. For example, W/"2".

This Weak ETag corresponds to meta.versionId attribute in the resource body.

Pattern: /^W\/"[0-9]+"$/

Example: W/"2"

Body

Content type: application/fhir+json

Examples

Unbooked `ReferralRequest`

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-06-11T12:09:08.667000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      }
    } ]
  }, {
    "id" : "DocumentReference-80000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-11T12:09:09.459000+00:00",
    "description" : "referralletter pdf",
    "content" : [ {
      "attachment" : {
        "id" : "80000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70000-80000",
        "size" : 6,
        "title" : "referralletter.pdf",
        "creation" : "2021-06-11"
      }
    } ]
  } ],
  "status" : "active",
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-80000"
  } ],
  "intent" : "plan"
}

`ReferralRequest` booked to directly-bookable service

Copy
{
  "id" : "000000070001",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-06-11T12:33:23.167000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "0",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "booked",
    "description" : "e-Referral Appointment",
    "start" : "2021-06-13T12:30:00+00:00",
    "end" : "2021-06-13T12:45:00+00:00",
    "slot" : [ {
      "reference" : "Slot/11002001"
    } ],
    "created" : "2021-06-11T12:33:25.664000+00:00",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070001/_history/5"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9912003888"
        }
      },
      "status" : "accepted"
    }, {
      "type" : {
        "coding" : [ {
          "system" : "http://hl7.org/fhir/ValueSet/encounter-participant-type",
          "code" : "CON"
        } ]
      },
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "021600556514"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-80000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-11T12:09:09.459000+00:00",
    "description" : "referralletter pdf",
    "content" : [ {
      "attachment" : {
        "id" : "80000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70001-80000",
        "size" : 6,
        "title" : "referralletter.pdf",
        "creation" : "2021-06-11"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-80000"
  } ],
  "intent" : "plan"
}

`ReferralRequest` booked to indirectly-bookable service

Copy
{
  "id" : "000000070002",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-06-11T13:43:33.338000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11016"
        },
        "display" : "Triage-Related Indirect Business Service"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11017"
        },
        "display" : "Triage-Related Indirect Business Service 2"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "0",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "booked",
    "description" : "e-Referral Appointment",
    "start" : "2021-07-05T10:00:00+00:00",
    "end" : "2021-07-05T10:00:00+00:00",
    "created" : "2021-06-11T13:43:34.424000+00:00",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070002/_history/5"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11016"
        },
        "display" : "Triage-Related Indirect Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9912003888"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-80000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-11T12:09:09.459000+00:00",
    "description" : "referralletter pdf",
    "content" : [ {
      "attachment" : {
        "id" : "80000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70002-80000",
        "size" : 6,
        "title" : "referralletter.pdf",
        "creation" : "2021-06-11"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-80000"
  } ],
  "intent" : "plan"
}

`ReferralRequest` deferred to service provider for booking

Copy
{
  "id" : "000000070003",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-06-11T13:55:32.927000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "URGENT",
        "display" : "Urgent"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "URGENT"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11010"
        },
        "display" : "Excellent Cardiology Business Service"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "1",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "proposed",
    "reason" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewReason-1",
        "code" : "NO_SLOTS_AT_SERVICE"
      } ]
    } ],
    "description" : "e-Referral Appointment",
    "created" : "2021-06-11T13:55:36.392000+00:00",
    "comment" : "Yes!",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070003/_history/5"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11010"
        },
        "display" : "Excellent Cardiology Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9912003888"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-80000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-11T12:09:09.459000+00:00",
    "description" : "referralletter pdf",
    "content" : [ {
      "attachment" : {
        "id" : "80000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70003-80000",
        "size" : 6,
        "title" : "referralletter.pdf",
        "creation" : "2021-06-11"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-80000"
  } ],
  "intent" : "plan"
}

`ReferralRequest` that was converted from an Advice and Guidance Request

Copy
{
  "id" : "000000070004",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-06-11T14:04:48.172000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "TWO_WEEK_WAIT",
        "display" : "2 Week Wait"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "TWO_WEEK_WAIT"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11014"
        },
        "display" : "Advice Only"
      }
    } ]
  }, {
    "id" : "DocumentReference-80002",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "PROVIDER",
        "display" : "Provider"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-11T14:04:48.987000+00:00",
    "description" : "triage png",
    "content" : [ {
      "attachment" : {
        "id" : "80002",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70004-80002",
        "size" : 6,
        "title" : "triage.png",
        "creation" : "2021-06-11"
      }
    } ]
  }, {
    "id" : "DocumentReference-80003",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-11T14:04:48.987000+00:00",
    "content" : [ {
      "attachment" : {
        "id" : "80003",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70004-80003",
        "size" : 3807,
        "title" : "Advice and guidance conversation - 000000070004.pdf",
        "creation" : "2021-06-11"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "1",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "proposed",
    "reason" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewOutcome-1",
        "code" : "PROVIDER_CONVERTED_ADVICE_AND_GUIDANCE_ADMIN_TO_REFER",
        "display" : "Provider Converted Advice and Guidance, Admin to Refer"
      } ]
    } ],
    "description" : "e-Referral Appointment",
    "created" : "2021-06-11T14:04:48.217000+00:00",
    "comment" : "Actually I'd rather not",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070004/_history/5"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11014"
        },
        "display" : "Advice Only"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9912003888"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-80000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "ADVICE_REQUEST",
        "display" : "Advice Request"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-11T14:04:48.987000+00:00",
    "description" : "advice png",
    "content" : [ {
      "attachment" : {
        "id" : "80000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "921600556514"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70004-80000",
        "size" : 6,
        "title" : "advice.png",
        "creation" : "2021-06-11"
      }
    } ]
  }, {
    "id" : "DocumentReference-80001",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "GUIDANCE_RESPONSE",
        "display" : "Guidance Response"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-11T14:04:48.987000+00:00",
    "description" : "provider png",
    "content" : [ {
      "attachment" : {
        "id" : "80001",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70004-80001",
        "size" : 6,
        "title" : "provider.png",
        "creation" : "2021-06-11"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-80003"
  }, {
    "reference" : "#DocumentReference-80000"
  }, {
    "reference" : "#DocumentReference-80001"
  }, {
    "reference" : "#DocumentReference-80002"
  }, {
    "reference" : "CommunicationRequest/000000070004"
  } ],
  "intent" : "plan"
}

`ReferralRequest` with related ReferralRequest

Copy
{
  "id" : "000000070005",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "TWO_WEEK_WAIT",
        "display" : "2 Week Wait"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "TWO_WEEK_WAIT"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "0",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "booked",
    "description" : "e-Referral Appointment",
    "start" : "2021-06-14T00:13:46.106000+00:00",
    "end" : "2021-06-14T01:13:46.106000+00:00",
    "slot" : [ {
      "reference" : "Slot/11002011"
    } ],
    "created" : "2021-06-11T14:13:56.291000+00:00",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070005/_history/5"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9912003888"
        }
      },
      "status" : "accepted"
    }, {
      "type" : {
        "coding" : [ {
          "system" : "http://hl7.org/fhir/ValueSet/encounter-participant-type",
          "code" : "CON"
        } ]
      },
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "021600556514"
        }
      },
      "status" : "accepted"
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ {
    "reference" : "ReferralRequest/000000070004"
  } ],
  "intent" : "plan"
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-ReferralRequest


id
string
required
	
Example: 000000070000


meta
object
required
	

resourceType
string
required
	
Allowed values: ReferralRequest


contained
array
nullable
required
	
Field	Cardinality	Notes
eRS-Shortlist-List	1..1	
eRS-ServiceSearchCriteria-Parameters	1..1	
eRS-Appointment	0..1	
DocumentReference	0..*	


extension
array
nullable
required
	
Field	Cardinality	Notes
Extension-eRS-ReferralShortlist	1..1	
Extension-eRS-Commissioning-Rule-Org	1..1	
Extension-eRS-ReferralPriority	1..1	
Extension-eRS-Appointment	0..1	
Extension-eRS-ClinicalInfoFirstSubmitted	0..1	
Extension-eRS-ClinicalInfoLastUpdated	0..1	


status
string
required
	
Allowed values: active, completed


subject
object
required
	

supportingInfo
array
nullable
required
	

intent
string
required
	
Allowed values: plan
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
INVALID_REQUEST_TYPE	The UBRN provided exists in e-RS but does not correspond to an active request.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A005 Retrieve Referral Request (Versioned)
GET /STU3/ReferralRequest/{ubrn}/_history/{version}
Try this API
Overview

Use this endpoint to retrieve a specific version of ReferralRequest.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

The pre-requisites for this endpoint are the same as for endpoint A005 - Retrieve referral request.

Note: e-RS only supports the retrieval of the most recent version of ReferralRequest. You cannot retrieve earlier versions.

Use case

See A005 - Retrieve referral request.

Related endpoints

See A005 - Retrieve referral request.

Sandbox test scenarios

You can test the following scenarios in our sandbox environment

Scenario	Request
Unbooked ReferralRequest	ubrn=000000070000, version=5
ReferralRequest booked to directly-bookable service	ubrn=000000070001, version=5
ReferralRequest booked to indirectly-bookable service	ubrn=000000070002, version=5
ReferralRequest deferred to service provider for booking	ubrn=000000070003, version=5
ReferralRequest that was converted from an Advice and Guidance Request	ubrn=000000070004, version=5
ReferralRequest with related ReferralRequest	ubrn=000000070005, version=5
Request
Path parameters
Name	Description
ubrn	

String

The unique booking reference number of the referral request

Example: 000000070000

Required

version	

String

The version of the resource to be retrieved. It must be the latest version of the resource otherwise HISTORY_NOT_SUPPORTED error will be returned (HTTP 404 Not Found).

Example: "5"

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Response
HTTP status: 200

e-RS Referral Request

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


ETag	

String

Record version identifier enclosed in quotes and preceded by 'W/'. For example, W/"2".

This Weak ETag corresponds to meta.versionId attribute in the resource body.

Pattern: /^W\/"[0-9]+"$/

Example: W/"2"

Body

Content type: application/fhir+json

Examples

Unbooked `ReferralRequest`

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-06-11T12:09:08.667000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      }
    } ]
  }, {
    "id" : "DocumentReference-80000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-11T12:09:09.459000+00:00",
    "description" : "referralletter pdf",
    "content" : [ {
      "attachment" : {
        "id" : "80000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70000-80000",
        "size" : 6,
        "title" : "referralletter.pdf",
        "creation" : "2021-06-11"
      }
    } ]
  } ],
  "status" : "active",
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-80000"
  } ],
  "intent" : "plan"
}

`ReferralRequest` booked to directly-bookable service

Copy
{
  "id" : "000000070001",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-06-11T12:33:23.167000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "0",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "booked",
    "description" : "e-Referral Appointment",
    "start" : "2021-06-13T12:30:00+00:00",
    "end" : "2021-06-13T12:45:00+00:00",
    "slot" : [ {
      "reference" : "Slot/11002001"
    } ],
    "created" : "2021-06-11T12:33:25.664000+00:00",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070001/_history/5"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9912003888"
        }
      },
      "status" : "accepted"
    }, {
      "type" : {
        "coding" : [ {
          "system" : "http://hl7.org/fhir/ValueSet/encounter-participant-type",
          "code" : "CON"
        } ]
      },
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "021600556514"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-80000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-11T12:09:09.459000+00:00",
    "description" : "referralletter pdf",
    "content" : [ {
      "attachment" : {
        "id" : "80000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70001-80000",
        "size" : 6,
        "title" : "referralletter.pdf",
        "creation" : "2021-06-11"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-80000"
  } ],
  "intent" : "plan"
}

`ReferralRequest` booked to indirectly-bookable service

Copy
{
  "id" : "000000070002",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-06-11T13:43:33.338000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11016"
        },
        "display" : "Triage-Related Indirect Business Service"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11017"
        },
        "display" : "Triage-Related Indirect Business Service 2"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "0",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "booked",
    "description" : "e-Referral Appointment",
    "start" : "2021-07-05T10:00:00+00:00",
    "end" : "2021-07-05T10:00:00+00:00",
    "created" : "2021-06-11T13:43:34.424000+00:00",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070002/_history/5"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11016"
        },
        "display" : "Triage-Related Indirect Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9912003888"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-80000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-11T12:09:09.459000+00:00",
    "description" : "referralletter pdf",
    "content" : [ {
      "attachment" : {
        "id" : "80000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70002-80000",
        "size" : 6,
        "title" : "referralletter.pdf",
        "creation" : "2021-06-11"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-80000"
  } ],
  "intent" : "plan"
}

`ReferralRequest` deferred to service provider for booking

Copy
{
  "id" : "000000070003",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-06-11T13:55:32.927000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "URGENT",
        "display" : "Urgent"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "URGENT"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11010"
        },
        "display" : "Excellent Cardiology Business Service"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "1",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "proposed",
    "reason" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewReason-1",
        "code" : "NO_SLOTS_AT_SERVICE"
      } ]
    } ],
    "description" : "e-Referral Appointment",
    "created" : "2021-06-11T13:55:36.392000+00:00",
    "comment" : "Yes!",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070003/_history/5"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11010"
        },
        "display" : "Excellent Cardiology Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9912003888"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-80000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-11T12:09:09.459000+00:00",
    "description" : "referralletter pdf",
    "content" : [ {
      "attachment" : {
        "id" : "80000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70003-80000",
        "size" : 6,
        "title" : "referralletter.pdf",
        "creation" : "2021-06-11"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-80000"
  } ],
  "intent" : "plan"
}

`ReferralRequest` that was converted from an Advice and Guidance Request

Copy
{
  "id" : "000000070004",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-06-11T14:04:48.172000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "TWO_WEEK_WAIT",
        "display" : "2 Week Wait"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "TWO_WEEK_WAIT"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11014"
        },
        "display" : "Advice Only"
      }
    } ]
  }, {
    "id" : "DocumentReference-80002",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "PROVIDER",
        "display" : "Provider"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-11T14:04:48.987000+00:00",
    "description" : "triage png",
    "content" : [ {
      "attachment" : {
        "id" : "80002",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70004-80002",
        "size" : 6,
        "title" : "triage.png",
        "creation" : "2021-06-11"
      }
    } ]
  }, {
    "id" : "DocumentReference-80003",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-11T14:04:48.987000+00:00",
    "content" : [ {
      "attachment" : {
        "id" : "80003",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70004-80003",
        "size" : 3807,
        "title" : "Advice and guidance conversation - 000000070004.pdf",
        "creation" : "2021-06-11"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "1",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "proposed",
    "reason" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewOutcome-1",
        "code" : "PROVIDER_CONVERTED_ADVICE_AND_GUIDANCE_ADMIN_TO_REFER",
        "display" : "Provider Converted Advice and Guidance, Admin to Refer"
      } ]
    } ],
    "description" : "e-Referral Appointment",
    "created" : "2021-06-11T14:04:48.217000+00:00",
    "comment" : "Actually I'd rather not",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070004/_history/5"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11014"
        },
        "display" : "Advice Only"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9912003888"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-80000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "ADVICE_REQUEST",
        "display" : "Advice Request"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-11T14:04:48.987000+00:00",
    "description" : "advice png",
    "content" : [ {
      "attachment" : {
        "id" : "80000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "921600556514"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70004-80000",
        "size" : 6,
        "title" : "advice.png",
        "creation" : "2021-06-11"
      }
    } ]
  }, {
    "id" : "DocumentReference-80001",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "GUIDANCE_RESPONSE",
        "display" : "Guidance Response"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-11T14:04:48.987000+00:00",
    "description" : "provider png",
    "content" : [ {
      "attachment" : {
        "id" : "80001",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70004-80001",
        "size" : 6,
        "title" : "provider.png",
        "creation" : "2021-06-11"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-80003"
  }, {
    "reference" : "#DocumentReference-80000"
  }, {
    "reference" : "#DocumentReference-80001"
  }, {
    "reference" : "#DocumentReference-80002"
  }, {
    "reference" : "CommunicationRequest/000000070004"
  } ],
  "intent" : "plan"
}

`ReferralRequest` with related ReferralRequest

Copy
{
  "id" : "000000070005",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "TWO_WEEK_WAIT",
        "display" : "2 Week Wait"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "TWO_WEEK_WAIT"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "0",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "booked",
    "description" : "e-Referral Appointment",
    "start" : "2021-06-14T00:13:46.106000+00:00",
    "end" : "2021-06-14T01:13:46.106000+00:00",
    "slot" : [ {
      "reference" : "Slot/11002011"
    } ],
    "created" : "2021-06-11T14:13:56.291000+00:00",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070005/_history/5"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9912003888"
        }
      },
      "status" : "accepted"
    }, {
      "type" : {
        "coding" : [ {
          "system" : "http://hl7.org/fhir/ValueSet/encounter-participant-type",
          "code" : "CON"
        } ]
      },
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "021600556514"
        }
      },
      "status" : "accepted"
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ {
    "reference" : "ReferralRequest/000000070004"
  } ],
  "intent" : "plan"
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-ReferralRequest


id
string
required
	
Example: 000000070000


meta
object
required
	

resourceType
string
required
	
Allowed values: ReferralRequest


contained
array
nullable
required
	
Field	Cardinality	Notes
eRS-Shortlist-List	1..1	
eRS-ServiceSearchCriteria-Parameters	1..1	
eRS-Appointment	0..1	
DocumentReference	0..*	


extension
array
nullable
required
	
Field	Cardinality	Notes
Extension-eRS-ReferralShortlist	1..1	
Extension-eRS-Commissioning-Rule-Org	1..1	
Extension-eRS-ReferralPriority	1..1	
Extension-eRS-Appointment	0..1	
Extension-eRS-ClinicalInfoFirstSubmitted	0..1	
Extension-eRS-ClinicalInfoLastUpdated	0..1	


status
string
required
	
Allowed values: active, completed


subject
object
required
	

supportingInfo
array
nullable
required
	

intent
string
required
	
Allowed values: plan
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found - Resource not found for ID provided or Resource version does not match version requested.

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
INVALID_REQUEST_TYPE	The UBRN provided exists in e-RS but does not correspond to an active request.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A006 - Retrieve attachment
GET /STU3/Binary/{attachmentLogicalID}
Try this API
Overview

Use this endpoint to retrieve a file that is attached to a referral or advice request.

Supported security patterns
Application-restricted access
Healthcare worker, user-restricted access
Pre-requisites
Application-restricted access

In order to use this endpoint you must be an authenticated e-RS calling application.

Healthcare worker, user-restricted access

In order to use this endpoint you must be an authenticated e-RS user or application and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN
SERVICE_PROVIDER_CLINICIAN
SERVICE_PROVIDER_CLINICIAN_ADMIN

You need to have retrieved the referral via A005 - Retrieve referral request to obtain the URLs for its attachments.

Important note

A referral pathway in e-RS can be made up of more than one UBRN. For example, a referral is booked and seen in a general knee clinical assessment service (UBRN #1), and the service decides to onward refer to a more specialist knee miniscus service (UBRN #2). This would result in two UBRNs for the referral pathway in this example (but there could be more related UBRNs if onward referred multiple times).

As such, it is important that all clinical information is obtained from across all the related UBRNs referenced in A005 - Retrieve referral request. You can do this using the following endpoints:

A007 - Retrieve clinical information
A006 - Retrieve Attachment

Note: It is possible that the initial UBRN may be the only one in the referral pathway to have clinical information and/or attachments associated.

Use case

As an authenticated user

I need to retrieve a clinical attachment associated with a referral

So that I can assess its content and decide what further action may be needed.

Related endpoints

You can retrieve a clinical information summary for a referral using A007 - Retrieve clinical information.

Request
Path parameters
Name	Description
attachmentLogicalID	

String

Reference to attachment as provided in the output from A005 - Retrieve referral request

Example: att-70000-70001

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation.

Not allowed for application-restricted access.

Required for user-restricted access.

Example: R69


nhsd-ers-business-function	

String

The e-RS Business Function of the caller.

Not allowed for application-restricted access.

Required for user-restricted access.

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER


X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


NHSD-eRS-On-Behalf-Of-User-ID	

String

The (SDS) user ID of the user that the authenticating user wishes to act on behalf of (OBO).

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Where an OBO User ID is supplied the authenticating user must be an SPCA and the OBO User ID must be that of an appropriate SPC.

Not allowed for application-restricted access.

Required for user-restricted access where the Service Provider Clinician Admin Business Function is used for authentication.

Example: 021600556514

Response
HTTP status: 200

Response contains the binary stream of the file attachment requested.

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


Content-Disposition	

String

The description of the type of content provided.

Example: attachment; filename="000000070000_Appointment_Confirmation_Summary_20210603121353"


Content-Length	

String

The length of the response.

Example: 3111

Body

Content type: text/plain

Example

Copy
This is some example text.
Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: text/html

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: application/pdf

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: text/xml

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: text/rtf

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: audio/basic

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: audio/mpeg

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: image/png

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: image/gif

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: image/jpeg

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: image/tiff

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: video/mpeg

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: application/msword

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: application/vnd.openxmlformats-officedocument.wordprocessingml.document

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: application/dicom

Schema
Collapse all Expand all
Name	Description

string binary
	
HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
INVALID_REQUEST_TYPE	The UBRN provided exists in e-RS but does not correspond to an active request.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A007 - Retrieve clinical information
POST /STU3/ReferralRequest/{ubrn}/$ers.generateCRI
Try this API
Overview

Use this endpoint to generate a PDF file that summarises clinical information for a referral.

Supported security patterns
Application-restricted access
Healthcare worker, user-restricted access
Pre-requisites
Application-restricted access

In order to use this endpoint you must be an authenticated e-RS calling application.

Healthcare worker, user-restricted access

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN
SERVICE_PROVIDER_CLINICIAN
SERVICE_PROVIDER_CLINICIAN_ADMIN

You need to use the Unique Booking Reference Number (UBRN) of a referral request in order to use this endpoint.

Important note

A referral pathway in e-RS can be made up of more than one UBRN. For example, a referral is booked and seen in a general knee clinical assessment service (UBRN #1), and the service decides to onward refer to a more specialist knee miniscus service (UBRN #2). This would result in two UBRNs for the referral pathway in this example (but there could be more related UBRNs if onward referred multiple times).

As such, it is important that all clinical information is obtained from across all the related UBRNs referenced in A005 - Retrieve referral request. You can do this using the following endpoints:

A007 - Retrieve Clinical Information
A006 - Retrieve attachment

Note: It is possible that the initial UBRN may be the only one in the referral pathway to have clinical information and/or attachments associated.

Use case

As an authenticated user or application

I need to retrieve a clinical information summary (in PDF format) associated with the referral

So that I can assess its content and decide what further action may be needed.

Related endpoints

You can retrieve clinical attachments that are associated with a referral using A006 - Retrieve attachment.

Request
Path parameters
Name	Description
ubrn	

String

The unique booking reference number of the referral request

Example: 000000070000

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation.

Not allowed for application-restricted access.

Required for user-restricted access.

Example: R69


nhsd-ers-business-function	

String

The e-RS Business Function of the caller.

Not allowed for application-restricted access.

Required for user-restricted access.

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER


NHSD-eRS-On-Behalf-Of-User-ID	

String

The (SDS) user ID of the user that the authenticating user wishes to act on behalf of (OBO).

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Where an OBO User ID is supplied the authenticating user must be an SPCA and the OBO User ID must be that of an appropriate SPC.

Not allowed for application-restricted access.

Required for user-restricted access where the Service Provider Clinician Admin Business Function is used for authentication.

Example: 021600556514


X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Response
HTTP status: 200

Response contains the binary stream of the clinical information summary (PDF).

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


Content-Disposition	

String

The description of the type of content provided.

Example: attachment; filename="000000070000_Appointment_Confirmation_Summary_20210603121353"


Content-Length	

String

The length of the response.

Example: 3111

Body

Content type: application/pdf

Schema
Collapse all Expand all
Name	Description

string binary
	
HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
INVALID_REQUEST_TYPE	The UBRN provided exists in e-RS but does not correspond to an active request.
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A008 - Retrieve referral worklist
POST /STU3/ReferralRequest/$ers.fetchworklist
Try this API
Overview

Use this endpoint to retrieve available worklists of referral requests. Use A023 - Retrieve advice and guidance requests worklist to retrieve available worklists of advice and guidance requests.

Worklists provide lists of referral/advice requests that meet certain criteria, typically where a user needs to be aware of something important, or to undertake an action, in order to avoid delays to patient care.

Service provider organisations can currently access the following referral related worklists:

The 'Referrals for Review' worklist contains booked and RAS (triage) referrals that require review by the service provider organisation
The 'Appointment Slot Issues' worklist contains referrals which have been 'deferred to provider' because of a lack of appointment availability (e.g. no appointment slots). The referrals need to be reviewed and if appropriate booked into a service at the service provider organisation.

There are currently no referral related worklists available for referring organisations.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

SERVICE_PROVIDER_CLINICIAN
SERVICE_PROVIDER_ADMIN
SERVICE_PROVIDER_CLINICIAN_ADMIN
Use case

As an authenticated user

I need to retrieve a referral worklist

So that I can determine which referrals I need to take further action on

Related endpoints

To retrieve pertinent details relating to a referral:

Use A005 - Retrieve referral request to retrieve the details of the referral
Use A006 - Retrieve attachment to retrieve the clinical attachments for a referral
Use A007 - Retrieve clinical information to retrieve the clinical information summary PDF for a referral

For reviewing booked referrals on the 'Referrals for review' worklist:

Use A013 - Accept referral to accept a referral into a bookable service
Use A014 - Reject referral to reject a referral from a bookable service
Use A022 - Cancel appointment, action later to request an admin team to rebook or redirect a referral

For reviewing triage (RAS) referrals on the 'Referrals for review' worklist:

Use A028 - Record triage outcome to record the triage outcome based on the available clinical information and attachments

For reviewing referrals that have been deferred to provider on the 'Appointment slot issues' worklist:

Use A028 - Record triage outcome to record the triage outcome based on the available clinical information and attachments
Request
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

NHSD-eRS-On-Behalf-Of-User-ID	

String

The (SDS) user ID of the user that the authenticating user wishes to act on behalf of (OBO).

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Where an OBO User ID is supplied the authenticating user must be an SPCA and the OBO User ID must be that of an appropriate SPC.

Example: 021600556514


X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Body
Required

Content type: application/fhir+json

Examples

Referrals for review

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-FetchWorklist-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "listType",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralListSelector-1",
        "code" : "REFERRALS_FOR_REVIEW"
      } ]
    }
  } ]
}

Appointment slot issues

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-FetchWorklist-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "listType",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralListSelector-1",
        "code" : "APPOINTMENT_SLOT_ISSUES"
      } ]
    }
  } ]
}

Filter by specialty

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-FetchWorklist-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "listType",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralListSelector-1",
        "code" : "REFERRALS_FOR_REVIEW"
      } ]
    }
  }, {
    "name" : "specialtyAssignedIndicator",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AssignedIndicator-1",
        "code" : "ASSIGNED"
      } ]
    }
  }, {
    "name" : "specialty",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      } ]
    }
  } ]
}

Filter by clinician

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-FetchWorklist-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "listType",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralListSelector-1",
        "code" : "REFERRALS_FOR_REVIEW"
      } ]
    }
  }, {
    "name" : "clinicianAssignedIndicator",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AssignedIndicator-1",
        "code" : "ASSIGNED"
      } ]
    }
  }, {
    "name" : "clinician",
    "valueIdentifier" : {
      "system" : "http://fhir.nhs.net/Id/sds-user-id",
      "value" : "021600556514"
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-FetchWorklist-Parameters


resourceType
string
required
	
Allowed values: Parameters


meta
object
required
	

parameter
array
required
	
Field	Cardinality	Notes
listType	1..1	
service	0..1	
specialtyAssignedIndicator	0..1	
specialty	0..1	
location	0..1	
clinicianAssignedIndicator	0..1	
clinician	0..1	
Response
HTTP status: 200

The response body contains the list of referrals (if any) that match the search criteria provided

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Examples

Referrals for review

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-FetchWorklist-List-1" ]
  },
  "resourceType" : "List",
  "contained" : [ {
    "id" : "Practitioner-021600556514",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Practitioner-1" ]
    },
    "resourceType" : "Practitioner",
    "identifier" : [ {
      "system" : "http://fhir.nhs.net/Id/sds-user-id",
      "value" : "021600556514"
    } ]
  }, {
    "id" : "Patient-9462979626",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Patient-1" ]
    },
    "resourceType" : "Patient",
    "identifier" : [ {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9462979626"
    } ]
  }, {
    "id" : "Patient-1000000001",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Patient-1" ]
    },
    "resourceType" : "Patient",
    "identifier" : [ {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "1000000001"
    } ]
  } ],
  "status" : "current",
  "mode" : "snapshot",
  "entry" : [ {
    "extension" : [ {
      "extension" : [ {
        "url" : "priority",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          } ]
        }
      }, {
        "url" : "specialty",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          } ]
        }
      }, {
        "url" : "patient",
        "valueReference" : {
          "reference" : "#Patient-9462979626"
        }
      }, {
        "url" : "eReferralPathwayStart",
        "valueDateTime" : "2021-09-03T14:09:15.297000+00:00"
      }, {
        "url" : "clinicalInfoPrinted",
        "valueBoolean" : false
      }, {
        "url" : "requestContextStatus",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestContextStatus-1",
            "code" : "NEVER_REVIEWED",
            "display" : "Never Reviewed"
          } ]
        }
      }, {
        "url" : "clinicalInfoFirstSubmitted",
        "valueDateTime" : "2021-09-03T14:09:15.297000+00:00"
      }, {
        "url" : "referralType",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralType-1",
            "code" : "TRIAGE_DEFERRAL"
          } ]
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralsforReview-WorkListItem-1"
    } ],
    "item" : {
      "reference" : "ReferralRequest/000000070002"
    }
  }, {
    "extension" : [ {
      "extension" : [ {
        "url" : "priority",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          } ]
        }
      }, {
        "url" : "specialty",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          } ]
        }
      }, {
        "url" : "patient",
        "valueReference" : {
          "reference" : "#Patient-1000000001"
        }
      }, {
        "url" : "allocatedClinician",
        "valueReference" : {
          "reference" : "#Practitioner-021600556514"
        }
      }, {
        "url" : "eReferralPathwayStart",
        "valueDateTime" : "2021-09-03T14:09:11.381000+00:00"
      }, {
        "url" : "clinicalInfoPrinted",
        "valueBoolean" : false
      }, {
        "url" : "requestContextStatus",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestContextStatus-1",
            "code" : "NEVER_REVIEWED",
            "display" : "Never Reviewed"
          } ]
        }
      }, {
        "url" : "clinicalInfoFirstSubmitted",
        "valueDateTime" : "2021-09-03T14:09:11.022000+00:00"
      }, {
        "url" : "clinicalInfoLastUpdated",
        "valueDateTime" : "2021-09-03T14:09:12.573000+00:00"
      }, {
        "url" : "appointmentStart",
        "valueDateTime" : "2021-09-05T15:09:03.971000+00:00"
      }, {
        "url" : "referralType",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralType-1",
            "code" : "APPOINTMENT"
          } ]
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralsforReview-WorkListItem-1"
    } ],
    "item" : {
      "reference" : "ReferralRequest/000000070001"
    }
  } ]
}

Appointment slot issues

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-FetchWorklist-List-1" ]
  },
  "resourceType" : "List",
  "status" : "current",
  "mode" : "snapshot",
  "entry" : [ {
    "extension" : [ {
      "extension" : [ {
        "url" : "priority",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          } ]
        }
      }, {
        "url" : "specialty",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          } ]
        }
      }, {
        "url" : "patient",
        "valueReference" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/nhs-number",
            "value" : "1000000001"
          }
        }
      }, {
        "url" : "eReferralPathwayStart",
        "valueDateTime" : "2021-09-03T14:16:53.119000+00:00"
      }, {
        "url" : "clinicalInfoPrinted",
        "valueBoolean" : false
      }, {
        "url" : "ubrnReceived",
        "valueDateTime" : "2021-09-03T14:16:53.119000+00:00"
      }, {
        "url" : "patientContactExpected",
        "valueDate" : "2021-09-07"
      }, {
        "url" : "clinicalInformationStatus",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicalInformationStatus-1",
            "code" : "PRESENT"
          } ]
        }
      }, {
        "url" : "reason",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewReason-1",
            "code" : "NO_SLOTS_AT_SERVICE"
          } ]
        }
      }, {
        "url" : "service",
        "valueReference" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "11013"
          },
          "display" : "Excellent Cardiology Business Service 13"
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AppointmentSlotIssues-WorkListItem-1"
    } ],
    "item" : {
      "reference" : "ReferralRequest/000000070001"
    }
  }, {
    "extension" : [ {
      "extension" : [ {
        "url" : "priority",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          } ]
        }
      }, {
        "url" : "specialty",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          } ]
        }
      }, {
        "url" : "patient",
        "valueReference" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/nhs-number",
            "value" : "1000000001"
          }
        }
      }, {
        "url" : "eReferralPathwayStart",
        "valueDateTime" : "2021-09-03T14:16:51.648000+00:00"
      }, {
        "url" : "clinicalInfoPrinted",
        "valueBoolean" : false
      }, {
        "url" : "ubrnReceived",
        "valueDateTime" : "2021-09-03T14:16:51.648000+00:00"
      }, {
        "url" : "patientContactExpected",
        "valueDate" : "2021-09-13"
      }, {
        "url" : "clinicalInformationStatus",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicalInformationStatus-1",
            "code" : "PRESENT"
          } ]
        }
      }, {
        "url" : "reason",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewReason-1",
            "code" : "NO_SLOTS_AT_SERVICE"
          } ]
        }
      }, {
        "url" : "service",
        "valueReference" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "11010"
          },
          "display" : "Excellent Cardiology Business Service 10"
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AppointmentSlotIssues-WorkListItem-1"
    } ],
    "item" : {
      "reference" : "ReferralRequest/000000070000"
    }
  } ]
}

Filtered by specialty

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-FetchWorklist-List-1" ]
  },
  "resourceType" : "List",
  "contained" : [ {
    "id" : "Practitioner-021600556514",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Practitioner-1" ]
    },
    "resourceType" : "Practitioner",
    "identifier" : [ {
      "system" : "http://fhir.nhs.net/Id/sds-user-id",
      "value" : "021600556514"
    } ]
  }, {
    "id" : "Patient-9462979626",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Patient-1" ]
    },
    "resourceType" : "Patient",
    "identifier" : [ {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9462979626"
    } ]
  }, {
    "id" : "Patient-1000000001",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Patient-1" ]
    },
    "resourceType" : "Patient",
    "identifier" : [ {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "1000000001"
    } ]
  } ],
  "status" : "current",
  "mode" : "snapshot",
  "entry" : [ {
    "extension" : [ {
      "extension" : [ {
        "url" : "priority",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          } ]
        }
      }, {
        "url" : "specialty",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          } ]
        }
      }, {
        "url" : "patient",
        "valueReference" : {
          "reference" : "#Patient-9462979626"
        }
      }, {
        "url" : "eReferralPathwayStart",
        "valueDateTime" : "2021-09-03T14:19:07.273000+00:00"
      }, {
        "url" : "clinicalInfoPrinted",
        "valueBoolean" : false
      }, {
        "url" : "requestContextStatus",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestContextStatus-1",
            "code" : "NEVER_REVIEWED",
            "display" : "Never Reviewed"
          } ]
        }
      }, {
        "url" : "clinicalInfoFirstSubmitted",
        "valueDateTime" : "2021-09-03T14:19:07.273000+00:00"
      }, {
        "url" : "referralType",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralType-1",
            "code" : "TRIAGE_DEFERRAL"
          } ]
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralsforReview-WorkListItem-1"
    } ],
    "item" : {
      "reference" : "ReferralRequest/000000070001"
    }
  }, {
    "extension" : [ {
      "extension" : [ {
        "url" : "priority",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          } ]
        }
      }, {
        "url" : "specialty",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          } ]
        }
      }, {
        "url" : "patient",
        "valueReference" : {
          "reference" : "#Patient-1000000001"
        }
      }, {
        "url" : "allocatedClinician",
        "valueReference" : {
          "reference" : "#Practitioner-021600556514"
        }
      }, {
        "url" : "eReferralPathwayStart",
        "valueDateTime" : "2021-09-03T14:19:05.130000+00:00"
      }, {
        "url" : "clinicalInfoPrinted",
        "valueBoolean" : false
      }, {
        "url" : "requestContextStatus",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestContextStatus-1",
            "code" : "NEVER_REVIEWED",
            "display" : "Never Reviewed"
          } ]
        }
      }, {
        "url" : "clinicalInfoFirstSubmitted",
        "valueDateTime" : "2021-09-03T14:19:04.702000+00:00"
      }, {
        "url" : "appointmentStart",
        "valueDateTime" : "2021-09-05T15:19:01.973000+00:00"
      }, {
        "url" : "referralType",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralType-1",
            "code" : "APPOINTMENT"
          } ]
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralsforReview-WorkListItem-1"
    } ],
    "item" : {
      "reference" : "ReferralRequest/000000070000"
    }
  } ]
}

Filtered by clinician

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-FetchWorklist-List-1" ]
  },
  "resourceType" : "List",
  "contained" : [ {
    "id" : "Practitioner-021600556514",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Practitioner-1" ]
    },
    "resourceType" : "Practitioner",
    "identifier" : [ {
      "system" : "http://fhir.nhs.net/Id/sds-user-id",
      "value" : "021600556514"
    } ]
  }, {
    "id" : "Patient-1000000001",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Patient-1" ]
    },
    "resourceType" : "Patient",
    "identifier" : [ {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "1000000001"
    } ]
  } ],
  "status" : "current",
  "mode" : "snapshot",
  "entry" : [ {
    "extension" : [ {
      "extension" : [ {
        "url" : "priority",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          } ]
        }
      }, {
        "url" : "specialty",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          } ]
        }
      }, {
        "url" : "patient",
        "valueReference" : {
          "reference" : "#Patient-1000000001"
        }
      }, {
        "url" : "allocatedClinician",
        "valueReference" : {
          "reference" : "#Practitioner-021600556514"
        }
      }, {
        "url" : "eReferralPathwayStart",
        "valueDateTime" : "2021-09-03T14:24:06.483000+00:00"
      }, {
        "url" : "clinicalInfoPrinted",
        "valueBoolean" : false
      }, {
        "url" : "requestContextStatus",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestContextStatus-1",
            "code" : "NEVER_REVIEWED",
            "display" : "Never Reviewed"
          } ]
        }
      }, {
        "url" : "clinicalInfoFirstSubmitted",
        "valueDateTime" : "2021-09-03T14:24:06.079000+00:00"
      }, {
        "url" : "appointmentStart",
        "valueDateTime" : "2021-09-05T19:24:02.198000+00:00"
      }, {
        "url" : "referralType",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralType-1",
            "code" : "APPOINTMENT"
          } ]
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralsforReview-WorkListItem-1"
    } ],
    "item" : {
      "reference" : "ReferralRequest/000000070000"
    }
  }, {
    "extension" : [ {
      "extension" : [ {
        "url" : "priority",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          } ]
        }
      }, {
        "url" : "specialty",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          } ]
        }
      }, {
        "url" : "patient",
        "valueReference" : {
          "reference" : "#Patient-1000000001"
        }
      }, {
        "url" : "allocatedClinician",
        "valueReference" : {
          "reference" : "#Practitioner-021600556514"
        }
      }, {
        "url" : "eReferralPathwayStart",
        "valueDateTime" : "2021-09-03T14:24:10.036000+00:00"
      }, {
        "url" : "clinicalInfoPrinted",
        "valueBoolean" : false
      }, {
        "url" : "requestContextStatus",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestContextStatus-1",
            "code" : "NEVER_REVIEWED",
            "display" : "Never Reviewed"
          } ]
        }
      }, {
        "url" : "clinicalInfoFirstSubmitted",
        "valueDateTime" : "2021-09-03T14:24:09.691000+00:00"
      }, {
        "url" : "appointmentStart",
        "valueDateTime" : "2021-09-05T20:24:02.198000+00:00"
      }, {
        "url" : "referralType",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralType-1",
            "code" : "APPOINTMENT"
          } ]
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralsforReview-WorkListItem-1"
    } ],
    "item" : {
      "reference" : "ReferralRequest/000000070001"
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-FetchWorklist-List

A list of referrals representing the available worklist items



meta
object
required
	

contained
array
	
Field	Cardinality	Notes
Practitioner	0..*	This resource is only contained when fetching the Referrals for Review worklist
Patient	0..*	This resource is only contained when fetching the Referrals for Review worklist


resourceType
string
required
	
Allowed values: List


status
string
required
	
Allowed values: current


mode
string
required
	
Allowed values: snapshot


entry
array
	
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 415

Unsupported Media Type

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
REFERENCE_NOT_FOUND	A supplied reference could not be resolved to valid resource (e.g. a patient, clinician or an organisation).
MISSING_VALUE	A field defined as mandatory for an endpoint has not been provided.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request or service.
INVALID_VALUE	The input provided does not conform to the expected data types and format.
INVALID_CODE	The input provided for a field is not one of the defined legal values.
UNEXPECTED_FIELD	A field is provided that is not expected as part of the request. E.g. a field is mis-spelt, was defined on a previous version of the endpoint but has subsequently been removed.
INVALID_FHIR_STRUCTURE	The FHIR data structure in the message body does not match the expected structure (e.g. an array is present for a value when no array is expected).
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A010 - Patient service search
POST /STU3/HealthcareService/$ers.searchHealthcareServicesForPatient
Try this API
Overview

Use this endpoint to find services that meet the referral needs of a patient.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN

You need to have identified a patient, for example via Personal Demographic Service (PDS).

Use case

As an authenticated user

I need to find services I can refer the patient to

So that I can offer the patient appropriate services that meet their referral needs

Related endpoints

Once you have identified appropriate services for the patient you can either:

create a referral by choosing a shortlist of bookable services using A011 - Create referral, or
refer the patient directly to a triage service using A021 - Create referral and send for triage
Request
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Body
Required

Content type: application/fhir+json

Examples

Referring Clinician minimal search

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-PatientServiceSearch-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "requestType",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestType-1",
      "code" : "APPOINTMENT_REQUEST"
    }
  }, {
    "name" : "sortBy",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-SortBy-1",
      "code" : "DISTANCE"
    }
  }, {
    "name" : "patient",
    "valueIdentifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  }, {
    "name" : "searchCriteria",
    "resource" : {
      "resourceType" : "Parameters",
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
      },
      "id" : "ServiceSearchCriteria-1",
      "parameter" : [ {
        "name" : "priority",
        "valueCoding" : {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
          "code" : "URGENT"
        }
      }, {
        "name" : "specialty",
        "valueCoding" : {
          "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
          "code" : "CARDIOLOGY"
        }
      }, {
        "name" : "clinicType",
        "valueCoding" : {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
          "code" : "LIPID_MANAGEMENT"
        }
      }, {
        "name" : "commissioningProvisioning",
        "valueCoding" : {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
          "code" : "ALL_AVAILABLE_FOR_BOOKING"
        }
      }, {
        "name" : "ageAndGenderAppropriate",
        "valueBoolean" : true
      } ]
    }
  } ]
}

Referring Clinician search by clinical term

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-PatientServiceSearch-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "requestType",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestType-1",
      "code" : "APPOINTMENT_REQUEST"
    }
  }, {
    "name" : "sortBy",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-SortBy-1",
      "code" : "IWT"
    }
  }, {
    "name" : "patient",
    "valueIdentifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  }, {
    "name" : "referringClinician",
    "valueIdentifier" : {
      "system" : "http://fhir.nhs.net/Id/sds-user-id",
      "value" : "021600556514"
    }
  }, {
    "name" : "searchCriteria",
    "resource" : {
      "resourceType" : "Parameters",
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
      },
      "id" : "ServiceSearchCriteria-1",
      "parameter" : [ {
        "name" : "priority",
        "valueCoding" : {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
          "code" : "URGENT"
        }
      }, {
        "name" : "indicativeAppointmentWaitTimeLimit",
        "valueUnsignedInt" : 15
      }, {
        "name" : "postcode",
        "valueString" : "BR1 1AB"
      }, {
        "name" : "distanceLimit",
        "valueUnsignedInt" : 23
      }, {
        "name" : "commissioningProvisioning",
        "valueCoding" : {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
          "code" : "ALL_AVAILABLE_FOR_BOOKING"
        }
      }, {
        "name" : "clinicalTerm",
        "valueCoding" : {
          "system" : "http://snomed.info/sct",
          "code" : "1003"
        }
      }, {
        "name" : "organisation",
        "valueIdentifier" : {
          "system" : "https://directory.spineservices.nhs.uk/STU3/Organization",
          "value" : "R69"
        }
      }, {
        "name" : "ageAndGenderAppropriate",
        "valueBoolean" : true
      } ]
    }
  } ]
}

Referring Clinician search by named clinician

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-PatientServiceSearch-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "requestType",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestType-1",
      "code" : "APPOINTMENT_REQUEST"
    }
  }, {
    "name" : "sortBy",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-SortBy-1",
      "code" : "DISTANCE"
    }
  }, {
    "name" : "patient",
    "valueIdentifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  }, {
    "name" : "searchCriteria",
    "resource" : {
      "resourceType" : "Parameters",
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
      },
      "id" : "ServiceSearchCriteria-1",
      "parameter" : [ {
        "name" : "priority",
        "valueCoding" : {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
          "code" : "URGENT"
        }
      }, {
        "name" : "namedClinician",
        "valueIdentifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "021600556514"
        }
      }, {
        "name" : "commissioningProvisioning",
        "valueCoding" : {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
          "code" : "ALL_AVAILABLE_FOR_BOOKING"
        }
      }, {
        "name" : "ageAndGenderAppropriate",
        "valueBoolean" : true
      } ]
    }
  } ]
}

Referring Clinician Admin search

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-PatientServiceSearch-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "requestType",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestType-1",
      "code" : "APPOINTMENT_REQUEST"
    }
  }, {
    "name" : "sortBy",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-SortBy-1",
      "code" : "DISTANCE"
    }
  }, {
    "name" : "patient",
    "valueIdentifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  }, {
    "name" : "referringClinician",
    "valueIdentifier" : {
      "system" : "http://fhir.nhs.net/Id/sds-user-id",
      "value" : "021600556514"
    }
  }, {
    "name" : "searchCriteria",
    "resource" : {
      "resourceType" : "Parameters",
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
      },
      "id" : "ServiceSearchCriteria-1",
      "parameter" : [ {
        "name" : "priority",
        "valueCoding" : {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
          "code" : "URGENT"
        }
      }, {
        "name" : "specialty",
        "valueCoding" : {
          "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
          "code" : "CARDIOLOGY"
        }
      }, {
        "name" : "clinicType",
        "valueCoding" : {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
          "code" : "LIPID_MANAGEMENT"
        }
      }, {
        "name" : "commissioningProvisioning",
        "valueCoding" : {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
          "code" : "ALL_AVAILABLE_FOR_BOOKING"
        }
      }, {
        "name" : "indicativeAppointmentWaitTimeLimit",
        "valueUnsignedInt" : 15
      }, {
        "name" : "ageAndGenderAppropriate",
        "valueBoolean" : true
      } ]
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-PatientServiceSearch-Parameters

The parameters used in patient services search



meta
object
required
	

resourceType
string
required
	
Allowed values: Parameters


parameter
array
required
	
Field	Cardinality	Notes
RequestType	1..1	
SortBy	1..1	
Patient	1..1	
ReferringClinician	0..1	
SearchCriteria	1..1	
Response
HTTP status: 200

The response body contains the list of services (if any) that match the search criteria provided

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Examples

With single service

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-FetchServices-List-1" ]
  },
  "resourceType" : "List",
  "status" : "current",
  "mode" : "snapshot",
  "entry" : [ {
    "extension" : [ {
      "extension" : [ {
        "url" : "displayProminently",
        "valueBoolean" : false
      }, {
        "url" : "indicativeAppointmentWaitTime",
        "valueUnsignedInt" : 10
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSearch-ListItem-1"
    } ],
    "item" : {
      "extension" : [ {
        "extension" : [ {
          "url" : "serviceName",
          "valueString" : "Good Cardiology Business Service"
        }, {
          "url" : "specialty",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
              "code" : "CARDIOLOGY"
            } ]
          }
        }, {
          "url" : "genderTreated",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-GenderTreated-1",
              "code" : "MALE_AND_FEMALE"
            } ]
          }
        }, {
          "url" : "bookableType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BookableType-1",
              "code" : "DIRECTLY_BOOKABLE"
            } ]
          }
        }, {
          "url" : "supportedAppointmentType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentType-1",
              "code" : "DIAGNOSTIC"
            } ]
          }
        }, {
          "url" : "referralLetterRequired",
          "valueBoolean" : true
        }, {
          "url" : "location",
          "valueReference" : {
            "identifier" : {
              "system" : "https://directory.spineservices.nhs.uk/STU3/Organization",
              "value" : "R69"
            },
            "display" : "Cicero-Clinic"
          }
        }, {
          "url" : "linkToNHSWebsite",
          "valueString" : "https://www.nhs.uk/service-search/other-services/chooseandbook?serviceId=11002"
        }, {
          "url" : "supportedRequestFlowType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestFlowType-1",
              "code" : "APPOINTMENT_REQUEST"
            } ]
          }
        } ],
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSummaryView-1"
      } ],
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "11002"
      }
    }
  } ]
}

With multiple services

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-FetchServices-List-1" ]
  },
  "resourceType" : "List",
  "status" : "current",
  "mode" : "snapshot",
  "entry" : [ {
    "extension" : [ {
      "extension" : [ {
        "url" : "displayProminently",
        "valueBoolean" : false
      }, {
        "url" : "distance",
        "valueUnsignedInt" : 0
      }, {
        "url" : "indicativeAppointmentWaitTime",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-IWT-1",
            "code" : "LIMITED_AVAILABILITY"
          } ]
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSearch-ListItem-1"
    } ],
    "item" : {
      "extension" : [ {
        "extension" : [ {
          "url" : "serviceName",
          "valueString" : "A LOCALLY_COMMISSIONABLE Service"
        }, {
          "url" : "specialty",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
              "code" : "CARDIOLOGY"
            } ]
          }
        }, {
          "url" : "genderTreated",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-GenderTreated-1",
              "code" : "MALE_AND_FEMALE"
            } ]
          }
        }, {
          "url" : "bookableType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BookableType-1",
              "code" : "DIRECTLY_BOOKABLE"
            } ]
          }
        }, {
          "url" : "supportedAppointmentType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentType-1",
              "code" : "DIAGNOSTIC"
            } ]
          }
        }, {
          "url" : "referralLetterRequired",
          "valueBoolean" : false
        }, {
          "url" : "location",
          "valueReference" : {
            "identifier" : {
              "system" : "https://directory.spineservices.nhs.uk/STU3/Organization",
              "value" : "R69"
            },
            "display" : "Cicero-Clinic"
          }
        }, {
          "url" : "linkToNHSWebsite",
          "valueString" : "https://www.nhs.uk/service-search/other-services/chooseandbook?serviceId=11030"
        }, {
          "url" : "supportedRequestFlowType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestFlowType-1",
              "code" : "APPOINTMENT_REQUEST"
            } ]
          }
        } ],
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSummaryView-1"
      } ],
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "11030"
      }
    }
  }, {
    "extension" : [ {
      "extension" : [ {
        "url" : "displayProminently",
        "valueBoolean" : false
      }, {
        "url" : "distance",
        "valueUnsignedInt" : 0
      }, {
        "url" : "indicativeAppointmentWaitTime",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-IWT-1",
            "code" : "LIMITED_AVAILABILITY"
          } ]
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSearch-ListItem-1"
    } ],
    "item" : {
      "extension" : [ {
        "extension" : [ {
          "url" : "serviceName",
          "valueString" : "Cardiology Business Service - Requires Referral Letter, No Slots for slots polling tests"
        }, {
          "url" : "specialty",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
              "code" : "CARDIOLOGY"
            } ]
          }
        }, {
          "url" : "genderTreated",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-GenderTreated-1",
              "code" : "MALE_AND_FEMALE"
            } ]
          }
        }, {
          "url" : "bookableType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BookableType-1",
              "code" : "DIRECTLY_BOOKABLE"
            } ]
          }
        }, {
          "url" : "supportedAppointmentType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentType-1",
              "code" : "DIAGNOSTIC"
            } ]
          }
        }, {
          "url" : "referralLetterRequired",
          "valueBoolean" : true
        }, {
          "url" : "location",
          "valueReference" : {
            "identifier" : {
              "system" : "https://directory.spineservices.nhs.uk/STU3/Organization",
              "value" : "R69"
            },
            "display" : "Cicero-Clinic"
          }
        }, {
          "url" : "linkToNHSWebsite",
          "valueString" : "https://www.nhs.uk/service-search/other-services/chooseandbook?serviceId=11021"
        }, {
          "url" : "supportedRequestFlowType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestFlowType-1",
              "code" : "APPOINTMENT_REQUEST"
            } ]
          }
        } ],
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSummaryView-1"
      } ],
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "11021"
      }
    }
  }, {
    "extension" : [ {
      "extension" : [ {
        "url" : "displayProminently",
        "valueBoolean" : false
      }, {
        "url" : "distance",
        "valueUnsignedInt" : 0
      }, {
        "url" : "indicativeAppointmentWaitTime",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-IWT-1",
            "code" : "LIMITED_AVAILABILITY"
          } ]
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSearch-ListItem-1"
    } ],
    "item" : {
      "extension" : [ {
        "extension" : [ {
          "url" : "serviceName",
          "valueString" : "Excellent Cardiology Business Service"
        }, {
          "url" : "specialty",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
              "code" : "CARDIOLOGY"
            } ]
          }
        }, {
          "url" : "genderTreated",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-GenderTreated-1",
              "code" : "MALE_AND_FEMALE"
            } ]
          }
        }, {
          "url" : "bookableType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BookableType-1",
              "code" : "DIRECTLY_BOOKABLE"
            } ]
          }
        }, {
          "url" : "supportedAppointmentType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentType-1",
              "code" : "DIAGNOSTIC"
            } ]
          }
        }, {
          "url" : "referralLetterRequired",
          "valueBoolean" : false
        }, {
          "url" : "location",
          "valueReference" : {
            "identifier" : {
              "system" : "https://directory.spineservices.nhs.uk/STU3/Organization",
              "value" : "R69"
            },
            "display" : "Cicero-Clinic"
          }
        }, {
          "url" : "linkToNHSWebsite",
          "valueString" : "https://www.nhs.uk/service-search/other-services/chooseandbook?serviceId=11010"
        }, {
          "url" : "supportedRequestFlowType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestFlowType-1",
              "code" : "APPOINTMENT_REQUEST"
            } ]
          }
        } ],
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSummaryView-1"
      } ],
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "11010"
      }
    }
  }, {
    "extension" : [ {
      "extension" : [ {
        "url" : "displayProminently",
        "valueBoolean" : false
      }, {
        "url" : "distance",
        "valueUnsignedInt" : 0
      }, {
        "url" : "indicativeAppointmentWaitTime",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-IWT-1",
            "code" : "LIMITED_AVAILABILITY"
          } ]
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSearch-ListItem-1"
    } ],
    "item" : {
      "extension" : [ {
        "extension" : [ {
          "url" : "serviceName",
          "valueString" : "Exceptional Cardiology Business Service"
        }, {
          "url" : "specialty",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
              "code" : "CARDIOLOGY"
            } ]
          }
        }, {
          "url" : "genderTreated",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-GenderTreated-1",
              "code" : "MALE_AND_FEMALE"
            } ]
          }
        }, {
          "url" : "bookableType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BookableType-1",
              "code" : "DIRECTLY_BOOKABLE"
            } ]
          }
        }, {
          "url" : "supportedAppointmentType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentType-1",
              "code" : "DIAGNOSTIC"
            } ]
          }
        }, {
          "url" : "referralLetterRequired",
          "valueBoolean" : true
        }, {
          "url" : "location",
          "valueReference" : {
            "identifier" : {
              "system" : "https://directory.spineservices.nhs.uk/STU3/Organization",
              "value" : "R69"
            },
            "display" : "Cicero-Clinic"
          }
        }, {
          "url" : "linkToNHSWebsite",
          "valueString" : "https://www.nhs.uk/service-search/other-services/chooseandbook?serviceId=11007"
        }, {
          "url" : "supportedRequestFlowType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestFlowType-1",
              "code" : "APPOINTMENT_REQUEST"
            } ]
          }
        } ],
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSummaryView-1"
      } ],
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "11007"
      }
    }
  }, {
    "extension" : [ {
      "extension" : [ {
        "url" : "displayProminently",
        "valueBoolean" : false
      }, {
        "url" : "distance",
        "valueUnsignedInt" : 0
      }, {
        "url" : "indicativeAppointmentWaitTime",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-IWT-1",
            "code" : "LIMITED_AVAILABILITY"
          } ]
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSearch-ListItem-1"
    } ],
    "item" : {
      "extension" : [ {
        "extension" : [ {
          "url" : "serviceName",
          "valueString" : "FIRST Cardiology Business Service"
        }, {
          "url" : "specialty",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
              "code" : "CARDIOLOGY"
            } ]
          }
        }, {
          "url" : "genderTreated",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-GenderTreated-1",
              "code" : "MALE_AND_FEMALE"
            } ]
          }
        }, {
          "url" : "bookableType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BookableType-1",
              "code" : "DIRECTLY_BOOKABLE"
            } ]
          }
        }, {
          "url" : "supportedAppointmentType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentType-1",
              "code" : "DIAGNOSTIC"
            } ]
          }
        }, {
          "url" : "referralLetterRequired",
          "valueBoolean" : false
        }, {
          "url" : "location",
          "valueReference" : {
            "identifier" : {
              "system" : "https://directory.spineservices.nhs.uk/STU3/Organization",
              "value" : "R69"
            },
            "display" : "Cicero-Clinic"
          }
        }, {
          "url" : "linkToNHSWebsite",
          "valueString" : "https://www.nhs.uk/service-search/other-services/chooseandbook?serviceId=11008"
        }, {
          "url" : "supportedRequestFlowType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestFlowType-1",
              "code" : "APPOINTMENT_REQUEST"
            } ]
          }
        } ],
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSummaryView-1"
      } ],
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "11008"
      }
    }
  }, {
    "extension" : [ {
      "extension" : [ {
        "url" : "displayProminently",
        "valueBoolean" : false
      }, {
        "url" : "distance",
        "valueUnsignedInt" : 0
      }, {
        "url" : "indicativeAppointmentWaitTime",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-IWT-1",
            "code" : "LIMITED_AVAILABILITY"
          } ]
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSearch-ListItem-1"
    } ],
    "item" : {
      "extension" : [ {
        "extension" : [ {
          "url" : "serviceName",
          "valueString" : "Good Cardiology Business Service"
        }, {
          "url" : "specialty",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
              "code" : "CARDIOLOGY"
            } ]
          }
        }, {
          "url" : "genderTreated",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-GenderTreated-1",
              "code" : "MALE_AND_FEMALE"
            } ]
          }
        }, {
          "url" : "bookableType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BookableType-1",
              "code" : "DIRECTLY_BOOKABLE"
            } ]
          }
        }, {
          "url" : "supportedAppointmentType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentType-1",
              "code" : "DIAGNOSTIC"
            } ]
          }
        }, {
          "url" : "referralLetterRequired",
          "valueBoolean" : true
        }, {
          "url" : "location",
          "valueReference" : {
            "identifier" : {
              "system" : "https://directory.spineservices.nhs.uk/STU3/Organization",
              "value" : "R69"
            },
            "display" : "Cicero-Clinic"
          }
        }, {
          "url" : "linkToNHSWebsite",
          "valueString" : "https://www.nhs.uk/service-search/other-services/chooseandbook?serviceId=11002"
        }, {
          "url" : "supportedRequestFlowType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestFlowType-1",
              "code" : "APPOINTMENT_REQUEST"
            } ]
          }
        } ],
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSummaryView-1"
      } ],
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "11002"
      }
    }
  } ]
}

With multiple supported request flow types

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-FetchServices-List-1" ]
  },
  "resourceType" : "List",
  "status" : "current",
  "mode" : "snapshot",
  "entry" : [ {
    "extension" : [ {
      "extension" : [ {
        "url" : "displayProminently",
        "valueBoolean" : false
      }, {
        "url" : "indicativeAppointmentWaitTime",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-IWT-1",
            "code" : "NOT_APPLICABLE"
          } ]
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSearch-ListItem-1"
    } ],
    "item" : {
      "extension" : [ {
        "extension" : [ {
          "url" : "serviceName",
          "valueString" : "Service Name"
        }, {
          "url" : "specialty",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
              "code" : "Specialty Name"
            } ]
          }
        }, {
          "url" : "genderTreated",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-GenderTreated-1",
              "code" : "MALE_AND_FEMALE"
            } ]
          }
        }, {
          "url" : "bookableType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BookableType-1",
              "code" : "DIRECTLY_BOOKABLE"
            } ]
          }
        }, {
          "url" : "supportedAppointmentType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentType-1",
              "code" : "DIAGNOSTIC"
            } ]
          }
        }, {
          "url" : "referralLetterRequired",
          "valueBoolean" : true
        }, {
          "url" : "location",
          "valueReference" : {
            "display" : "Organisation Name",
            "identifier" : {
              "system" : "https://directory.spineservices.nhs.uk/STU3/Organization",
              "value" : "NacCode"
            }
          }
        }, {
          "url" : "linkToNHSWebsite",
          "valueString" : "https://www.nhs.uk/service-search/other-services/chooseandbook?serviceId=42"
        }, {
          "url" : "supportedRequestFlowType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestFlowType-1",
              "code" : "TRIAGE_REQUEST"
            } ]
          }
        }, {
          "url" : "supportedRequestFlowType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestFlowType-1",
              "code" : "APPOINTMENT_REQUEST"
            } ]
          }
        } ],
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSummaryView-1"
      } ],
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "42"
      }
    }
  } ]
}

With indicative appointment wait time

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-FetchServices-List-1" ]
  },
  "resourceType" : "List",
  "status" : "current",
  "mode" : "snapshot",
  "entry" : [ {
    "extension" : [ {
      "extension" : [ {
        "url" : "displayProminently",
        "valueBoolean" : false
      }, {
        "url" : "indicativeAppointmentWaitTime",
        "valueUnsignedInt" : 21
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSearch-ListItem-1"
    } ],
    "item" : {
      "extension" : [ {
        "extension" : [ {
          "url" : "serviceName",
          "valueString" : "Service Name"
        }, {
          "url" : "specialty",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
              "code" : "Specialty Name"
            } ]
          }
        }, {
          "url" : "genderTreated",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-GenderTreated-1",
              "code" : "MALE_AND_FEMALE"
            } ]
          }
        }, {
          "url" : "bookableType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BookableType-1",
              "code" : "DIRECTLY_BOOKABLE"
            } ]
          }
        }, {
          "url" : "supportedAppointmentType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AppointmentType-1",
              "code" : "DIAGNOSTIC"
            } ]
          }
        }, {
          "url" : "referralLetterRequired",
          "valueBoolean" : true
        }, {
          "url" : "location",
          "valueReference" : {
            "display" : "Organisation Name",
            "identifier" : {
              "system" : "https://directory.spineservices.nhs.uk/STU3/Organization",
              "value" : "NacCode"
            }
          }
        }, {
          "url" : "linkToNHSWebsite",
          "valueString" : "https://www.nhs.uk/service-search/other-services/chooseandbook?serviceId=42"
        }, {
          "url" : "supportedRequestFlowType",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-RequestFlowType-1",
              "code" : "APPOINTMENT_REQUEST"
            } ]
          }
        } ],
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ServiceSummaryView-1"
      } ],
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "42"
      }
    }
  } ]
}

Empty result list

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-FetchServices-List-1" ]
  },
  "resourceType" : "List",
  "status" : "current",
  "mode" : "snapshot",
  "entry" : [ ],
  "emptyReason" : {
    "coding" : [ {
      "system" : "http://hl7.org/fhir/ValueSet/list-empty-reason",
      "code" : "nilknown",
      "display" : "no results"
    } ]
  }
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-FetchServices-List

Service search response



meta
object
required
	

resourceType
string
required
	
Allowed values: List


status
string
required
	
Allowed values: current


mode
string
required
	
Allowed values: snapshot


emptyReason
object
	

entry
array
required
	
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 415

Unsupported Media Type

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
REFERENCE_NOT_FOUND	A supplied reference could not be resolved to valid resource (e.g. a patient, clinician or an organisation).
INAPPROPRIATE_VALUE	A value, which is acceptable under different conditions, is inappropriate in the context of the other information provided.
MISSING_VALUE	A field defined as mandatory for an endpoint has not been provided.
VALUE_IS_REQUIRED	A business rule defines a value as mandatory but it has not been provided.
FIELD_NOT_PERMITTED	A business rule defines a field as not permitted but it has been provided.
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
INVALID_VALUE	The input provided does not conform to the expected data types and format.
INVALID_CODE	The input provided for a field is not one of the defined legal values.
UNEXPECTED_FIELD	A field is provided that is not expected as part of the request. E.g. a field is mis-spelt, was defined on a previous version of the endpoint but has subsequently been removed.
INVALID_FHIR_STRUCTURE	The FHIR data structure in the message body does not match the expected structure (e.g. an array is present for a value when no array is expected).
REFERENCED_USER_IS_NOT_SPC	The user provided does not have the Service Provider Clinician authorisation in the e-RS.
ORGANISATION_IS_CLOSED	The organisation supplied corresponds to an organisation that is closed.
ORGANISATION_NOT_APPROPRIATE	The organisation supplied corresponds to an organisation that is not valid for the given request.
REFERENCED_USER_IS_NOT_ACTIVE	The user identified is not active.
REFERENCED_USER_NOT_IN_ORG	The referenced user does not belong to organisation specified.
NO_REG_GP_PRACTICE	The patient provided was found not to have a registered GP practice in the e-RS.
REFERENCED_USER_IS_NOT_RC	The user provided does not have the Referring Clinician authorisation in the e-RS.
REFERENCED_USER_IS_NOT_RC_AT_ORG	The user provided does not have the Referring Clinician authorisation at the organisation specified.
SNOMED_NOT_FOUND	A SNOMED code, while potentially valid in the latest version of the international dictionary, is not found in the e-RS dictionary.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A011 - Create referral
POST /STU3/ReferralRequest/$ers.createReferral
Try this API
Overview

Use this endpoint to create a referral by choosing a shortlist of bookable services.

Please note: this endpoint cannot be used to shortlist triage services. In order to make use of triage services please use A021 - Create referral and send for triage.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN

You need to have identified a patient, for example via Personal Demographic Service (PDS).

You need to have found services that meet the referral needs of a patient using A010 - Patient service search.

Use case

As an authenticated user

I need to create a shortlist of bookable services

So I can initiate my patients referral pathway, allowing the patient to book into one of the shortlisted services.

Related endpoints

To allow the patient to book their appointment in their own time, you can generate a letter for the patient by using A019 - Generate patient letter. The letter summarises the current state of the referral and any steps the patient may need to follow (e.g. appointment booking instructions).

You can book an appointment for the patient by using A015 - Retrieve appointment slots and A016 - Book or defer appointment.

For the referral to be processed by the service provider, you must ensure appropriate referral letter information has been added to the referral. You can add/manage referrer letter information by using A012 - Maintain referral letter.

You can check to see what referral letter information has already been added to a referral by using A005 - Retrieve referral request, A007 - Retrieve clinical information, and A006 - Retrieve attachment endpoints where necessary.

You can generate a letter for the patient, which summarises the current state of their referral and any steps the patient may need to follow, by using A019 - Generate patient letter.

Request
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Body
Required

Content type: application/fhir+json

Examples

Referring Clinician - minimum request body

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-CreateReferral-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "patient",
    "valueIdentifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  }, {
    "name" : "intentionToAddReferralLetter",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralLetterIntention-1",
      "code" : "NEED_TO_ADD_LATER"
    }
  }, {
    "name" : "firstReminderLetterFollowUpDays",
    "valueUnsignedInt" : 0
  }, {
    "name" : "shortlist",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
      },
      "resourceType" : "List",
      "status" : "current",
      "mode" : "snapshot",
      "contained" : [ {
        "resourceType" : "Parameters",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
        },
        "id" : "ServiceSearchCriteria-1",
        "parameter" : [ {
          "name" : "priority",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "URGENT"
          }
        }, {
          "name" : "specialty",
          "valueCoding" : {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          }
        }, {
          "name" : "clinicType",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
            "code" : "HEART_FAILURE"
          }
        }, {
          "name" : "commissioningProvisioning",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
            "code" : "ALL_AVAILABLE_FOR_BOOKING"
          }
        }, {
          "name" : "ageAndGenderAppropriate",
          "valueBoolean" : false
        } ]
      } ],
      "entry" : [ {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "11002"
          }
        }
      } ],
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
        "valueReference" : {
          "reference" : "#ServiceSearchCriteria-1"
        }
      } ]
    }
  } ]
}

Referring Clinician - request body using multi-service shortlist

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-CreateReferral-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "patient",
    "valueIdentifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  }, {
    "name" : "intentionToAddReferralLetter",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralLetterIntention-1",
      "code" : "NEED_TO_ADD_LATER"
    }
  }, {
    "name" : "firstReminderLetterFollowUpDays",
    "valueUnsignedInt" : 0
  }, {
    "name" : "shortlist",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
      },
      "resourceType" : "List",
      "status" : "current",
      "mode" : "snapshot",
      "contained" : [ {
        "resourceType" : "Parameters",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
        },
        "id" : "ServiceSearchCriteria-1",
        "parameter" : [ {
          "name" : "priority",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          }
        }, {
          "name" : "specialty",
          "valueCoding" : {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          }
        }, {
          "name" : "clinicType",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
            "code" : "HEART_FAILURE"
          }
        }, {
          "name" : "indicativeAppointmentWaitTimeLimit",
          "valueUnsignedInt" : 50
        }, {
          "name" : "postcode",
          "valueString" : "LS1 2UT"
        }, {
          "name" : "distanceLimit",
          "valueUnsignedInt" : 123
        }, {
          "name" : "clinicalTerm",
          "valueCoding" : {
            "system" : "http://snomed.info/sct",
            "code" : "1003"
          }
        }, {
          "name" : "namedClinician",
          "valueIdentifier" : {
            "system" : "http://fhir.nhs.net/Id/sds-user-id",
            "value" : "021600556514"
          }
        }, {
          "name" : "ageAndGenderAppropriate",
          "valueBoolean" : true
        }, {
          "name" : "commissioningProvisioning",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
            "code" : "ALL_AVAILABLE_FOR_BOOKING"
          }
        }, {
          "name" : "organisation",
          "valueIdentifier" : {
            "system" : "https://directory.spineservices.nhs.uk/STU3/Organization",
            "value" : "R69"
          }
        } ]
      } ],
      "entry" : [ {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12000"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12001"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12002"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12003"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12004"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12005"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12006"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12007"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12008"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12009"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12010"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12011"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12012"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12013"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12014"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12015"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12016"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12017"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12018"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "12019"
          }
        }
      } ],
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
        "valueReference" : {
          "reference" : "#ServiceSearchCriteria-1"
        }
      } ]
    }
  } ]
}

Referring Clinician Admin - minimum request body

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-CreateReferral-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "patient",
    "valueIdentifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  }, {
    "name" : "referringClinician",
    "valueIdentifier" : {
      "system" : "http://fhir.nhs.net/Id/sds-user-id",
      "value" : "021600556514"
    }
  }, {
    "name" : "intentionToAddReferralLetter",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralLetterIntention-1",
      "code" : "NEED_TO_ADD_LATER"
    }
  }, {
    "name" : "firstReminderLetterFollowUpDays",
    "valueUnsignedInt" : 0
  }, {
    "name" : "shortlist",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
      },
      "resourceType" : "List",
      "status" : "current",
      "mode" : "snapshot",
      "contained" : [ {
        "resourceType" : "Parameters",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
        },
        "id" : "ServiceSearchCriteria-1",
        "parameter" : [ {
          "name" : "priority",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "URGENT"
          }
        }, {
          "name" : "specialty",
          "valueCoding" : {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          }
        }, {
          "name" : "clinicType",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
            "code" : "HEART_FAILURE"
          }
        }, {
          "name" : "commissioningProvisioning",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
            "code" : "ALL_AVAILABLE_FOR_BOOKING"
          }
        }, {
          "name" : "ageAndGenderAppropriate",
          "valueBoolean" : false
        } ]
      } ],
      "entry" : [ {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "11002"
          }
        }
      } ],
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
        "valueReference" : {
          "reference" : "#ServiceSearchCriteria-1"
        }
      } ]
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-CreateReferral-Parameters


resourceType
string
required
	
Allowed values: Parameters


meta
object
required
	

parameter
array
required
	
Field	Cardinality	Notes
Patient	1..1	
ReferringClinician	0..1	
Shortlist	1..1	
IntentionToAddReferralLetter	1..1	
FirstReminderLetterFollowUpDays	1..1	
Response
HTTP status: 201

A referral created within e-RS.

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


ETag	

String

Record version identifier enclosed in quotes and preceded by 'W/'. For example, W/"2".

This Weak ETag corresponds to meta.versionId attribute in the resource body.

Pattern: /^W\/"[0-9]+"$/

Example: W/"2"

Body

Content type: application/fhir+json

Examples

Example with single service

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "3",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "URGENT",
        "display" : "Urgent"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "URGENT"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : false
    }, {
      "name" : "commissioningProvisioning",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
        "code" : "ALL_AVAILABLE_FOR_BOOKING"
      }
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      }
    } ]
  } ],
  "status" : "active",
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ ],
  "intent" : "plan"
}

Example with twenty services

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "3",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "indicativeAppointmentWaitTimeLimit",
      "valueUnsignedInt" : 50
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2UT"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "clinicalTerm",
      "valueCoding" : {
        "system" : "http://snomed.info/sct",
        "code" : "1003"
      }
    }, {
      "name" : "namedClinician",
      "valueIdentifier" : {
        "system" : "http://fhir.nhs.net/Id/sds-user-id",
        "value" : "021600556514"
      }
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    }, {
      "name" : "commissioningProvisioning",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
        "code" : "ALL_AVAILABLE_FOR_BOOKING"
      }
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12000"
        },
        "display" : "Good Cardiology Business Service 1"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12001"
        },
        "display" : "Good Cardiology Business Service 2"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12002"
        },
        "display" : "Good Cardiology Business Service 3"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12003"
        },
        "display" : "Good Cardiology Business Service 4"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12004"
        },
        "display" : "Good Cardiology Business Service 5"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12005"
        },
        "display" : "Good Cardiology Business Service 6"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12006"
        },
        "display" : "Good Cardiology Business Service 7"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12007"
        },
        "display" : "Good Cardiology Business Service 8"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12008"
        },
        "display" : "Good Cardiology Business Service 9"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12009"
        },
        "display" : "Good Cardiology Business Service 10"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12010"
        },
        "display" : "Good Cardiology Business Service 11"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12011"
        },
        "display" : "Good Cardiology Business Service 12"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12012"
        },
        "display" : "Good Cardiology Business Service 13"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12013"
        },
        "display" : "Good Cardiology Business Service 14"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12014"
        },
        "display" : "Good Cardiology Business Service 15"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12015"
        },
        "display" : "Good Cardiology Business Service 16"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12016"
        },
        "display" : "Good Cardiology Business Service 17"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12017"
        },
        "display" : "Good Cardiology Business Service 18"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12018"
        },
        "display" : "Good Cardiology Business Service 19"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12019"
        },
        "display" : "Good Cardiology Business Service 20"
      }
    } ]
  } ],
  "status" : "active",
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ ],
  "intent" : "plan"
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-ReferralRequest


id
string
required
	
Example: 000000070000


meta
object
required
	

resourceType
string
required
	
Allowed values: ReferralRequest


contained
array
nullable
required
	
Field	Cardinality	Notes
eRS-Shortlist-List	1..1	
eRS-ServiceSearchCriteria-Parameters	1..1	
eRS-Appointment	0..1	
DocumentReference	0..*	


extension
array
nullable
required
	
Field	Cardinality	Notes
Extension-eRS-ReferralShortlist	1..1	
Extension-eRS-Commissioning-Rule-Org	1..1	
Extension-eRS-ReferralPriority	1..1	
Extension-eRS-Appointment	0..1	
Extension-eRS-ClinicalInfoFirstSubmitted	0..1	
Extension-eRS-ClinicalInfoLastUpdated	0..1	


status
string
required
	
Allowed values: active, completed


subject
object
required
	

supportingInfo
array
nullable
required
	

intent
string
required
	
Allowed values: plan
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 415

Unsupported Media Type

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
REFERENCE_NOT_FOUND	A supplied reference could not be resolved to valid resource (e.g. a patient, clinician or an organisation).
INAPPROPRIATE_VALUE	A value, which is acceptable under different conditions, is inappropriate in the context of the other information provided.
TOO_MANY_ITEMS	In a list where a maximum number of items is specified (e.g. a Shortlist), too many entries are supplied.
MISSING_VALUE	A field defined as mandatory for an endpoint has not been provided.
VALUE_IS_REQUIRED	A business rule defines a value as mandatory but it has not been provided.
FIELD_NOT_PERMITTED	A business rule defines a field as not permitted but it has been provided.
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
INVALID_VALUE	The input provided does not conform to the expected data types and format.
INVALID_CODE	The input provided for a field is not one of the defined legal values.
UNEXPECTED_FIELD	A field is provided that is not expected as part of the request. E.g. a field is mis-spelt, was defined on a previous version of the endpoint but has subsequently been removed.
INVALID_FHIR_STRUCTURE	The FHIR data structure in the message body does not match the expected structure (e.g. an array is present for a value when no array is expected).
REFERENCED_USER_IS_NOT_SPC	The user provided does not have the Service Provider Clinician authorisation in the e-RS.
ORGANISATION_IS_CLOSED	The organisation supplied corresponds to an organisation that is closed.
ORGANISATION_NOT_APPROPRIATE	The organisation supplied corresponds to an organisation that is not valid for the given request.
DUPLICATE_SERVICE	Unique service value expected.
SHORTLISTED_SERVICE_NOT_IN_RESULTS	The service selected for the shortlist submitted does not satisfy the search criteria provided.
REFERENCED_USER_IS_NOT_ACTIVE	The user identified is not active.
REFERENCED_USER_NOT_IN_ORG	The referenced user does not belong to organisation specified.
NO_REG_GP_PRACTICE	The patient provided was found not to have a registered GP practice in the e-RS.
REFERENCED_USER_IS_NOT_RC	The user provided does not have the Referring Clinician authorisation in the e-RS.
REFERENCED_USER_IS_NOT_RC_AT_ORG	The user provided does not have the Referring Clinician authorisation at the organisation specified.
SNOMED_NOT_FOUND	A SNOMED code, while potentially valid in the latest version of the international dictionary, is not found in the e-RS dictionary.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A012 - Maintain referral letter
POST /STU3/ReferralRequest/{ubrn}/$ers.maintainReferralLetter
Try this API
Overview

Use this endpoint to manage the set of 'referral letter' attachments associated with an existing referral, including adding or removing attachments from a referral.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN

All new files to be associated with a referral must be uploaded first using A020 - Upload file to document store and then linked to the referral using this endpoint.

Important information about using this endpoint

This endpoint can be used to associate attachments to a referral that has no existing referral letter attachments. In this case you must upload the file first using A020 - Upload file to document store and then associate it to the referral using this endpoint.

You can also use this endpoint to modify the set of referral letter attachments already associated with a referral. In this case, you must post all referral letter attachments you wish to be (finally) associated to the referral, including any that were already associated. In other words, this endpoint replaces the set of referral letter attachments previously associated - with those specified in your latest request. As such, it is imperative that this call references all the attachments the user wishes to keep, every time it is called.

Below are three example scenarios which clarify the behaviour of the endpoint when referral attachments are already present on the referral:

Let us consider a referral that has two referral letter attachments associated (say "A.pdf" and "B.pdf"). If you wish to add an additional attachment (say "C.pdf"), you must upload the additional attachment "C.pdf" using A020 - Upload file to document store, and then associate attachments "A.pdf", "B.pdf" and "C.pdf" via this endpoint in a single request. That is, all three attachments "A.pdf", "B.pdf" and "C.pdf" must be included in the request to A012 - Maintain referral letter.
Let us consider a different referral that has two referral letter attachments (say "D.jpg" and "E.jpg") already associated, and you wish to remove one of them. Lets consider that you wish to remove "D.jpg". To do this, you would call A012 - Maintain referral letter specifying only "E.jpg" in your request. By omitting "D.jpg" from your request, e-RS will dis-associate attachment "D.jpg" from the referral and only attachment "E.jpg" will remain associated.
Let us now consider a referral that has four referral letter attachments associated (say "L.doc", "M.doc", "N.doc" and "O.doc"), and you wish to add some more files (say "P.doc" and "Q.doc") and remove some files (say "N.doc" and "O.doc"). To do this you must upload the additional attachment(s) ("N.doc" and "O.doc") using A020 - Upload file to document store. Following that successful upload, you must then associate only all referral letter attachments the user wishes to keep (namely "L.doc", "M.doc", "P.doc" and "Q.doc") in a single request to A012 - Maintain referral letter. Attachments not included in the request (namely "N.doc" and "O.doc") will be dis-associated from the referral as a result.

As a developer or software supplier, please ensure your users are made aware or protected from this behaviour. For example, when a referring user wants to update the attachments on a referral, the user should be presented with the currently associated attachments so they can add and/or remove attachments as required.

Note: It is not permissible to remove all referral letter attachments leaving zero attachments associated. There must be at least one referral letter attachment associated.

Use case

As an authenticated user

I need to be able to manage referral letter attachments associated with a referral

So I can ensure the service provider has enough information to review/process the referral.

Related endpoints

Documents must be uploaded into the e-RS document store using A020 - Upload file to document store before they can be associated with a referral.

You can check to see what referral letter information has been added to a referral by using A005 - Retrieve referral request, A007 - Retrieve clinical information, and A006 - Retrieve attachment endpoints where necessary.

Sandbox test scenarios

You can test the following scenarios in our sandbox environment:

Scenario	Request
Add clinical information for first time (single file)	ubrn=000000070000, body as defined in example 1
Add clinical information for first time (two files)	ubrn=000000070001, body as defined in example 2
Update clinical information	ubrn=000000070001, body as defined in example 3
Request
Path parameters
Name	Description
ubrn	

String

The unique booking reference number of the referral request

Example: 000000070000

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


If-Match	

String

The version of the resource to be updated

Pattern: /^W\/"[0-9]+"$/

Example: W/"4"

Required
Body
Required

Content type: application/fhir+json

Examples

1 - Add clinical information (single file)

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-MaintainReferralLetter-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "referralLetterFile",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
      },
      "resourceType" : "DocumentReference",
      "type" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
          "code" : "REFERRER"
        } ]
      },
      "status" : "current",
      "indexed" : "2021-06-24T13:05:03.652000+00:00",
      "description" : "Blood test results showing an anomaly in the values of xxxx",
      "content" : [ {
        "attachment" : {
          "url" : "Binary/att-70000-70001"
        }
      } ]
    }
  } ]
}

2 - Add clinical information (two files)

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-MaintainReferralLetter-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "referralLetterFile",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
      },
      "resourceType" : "DocumentReference",
      "type" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
          "code" : "REFERRER"
        } ]
      },
      "status" : "current",
      "indexed" : "2021-06-24T13:22:13.311000+00:00",
      "description" : "First blood test results showing an anomaly in the values of xxxx",
      "content" : [ {
        "attachment" : {
          "url" : "Binary/att-70001-70005"
        }
      } ]
    }
  }, {
    "name" : "referralLetterFile",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
      },
      "resourceType" : "DocumentReference",
      "type" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
          "code" : "REFERRER"
        } ]
      },
      "status" : "current",
      "indexed" : "2021-06-24T13:22:13.465000+00:00",
      "description" : "Second blood test results showing an anomaly in the values of xxxx",
      "content" : [ {
        "attachment" : {
          "url" : "Binary/att-70001-70006"
        }
      } ]
    }
  } ]
}

3 - Update clinical information (removing one file from example above)

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-MaintainReferralLetter-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "referralLetterFile",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
      },
      "resourceType" : "DocumentReference",
      "type" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
          "code" : "REFERRER"
        } ]
      },
      "status" : "current",
      "indexed" : "2021-06-24T13:22:13.465000+00:00",
      "description" : "Second blood test results showing an anomaly in the values of xxxx",
      "content" : [ {
        "attachment" : {
          "url" : "Binary/att-70001-70006"
        }
      } ]
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-MaintainReferralLetter-Parameters

The parameters object used in maintain referral letter endpoint



meta
object
required
	

resourceType
string
required
	
Allowed values: Parameters


parameter
array
required
	
Field	Cardinality	Notes
referralLetterFile	1..*	
Response
HTTP status: 200

e-RS Referral Request

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


ETag	

String

Record version identifier enclosed in quotes and preceded by 'W/'. For example, W/"2".

This Weak ETag corresponds to meta.versionId attribute in the resource body.

Pattern: /^W\/"[0-9]+"$/

Example: W/"2"

Body

Content type: application/fhir+json

Example

`ReferralRequest` with clinical information (2 files)

Copy
{
  "id" : "000000070001",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-06-24T13:21:41.238000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoLastUpdated-1",
    "valueDateTime" : "2021-06-24T13:22:14.437000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      }
    } ]
  }, {
    "id" : "DocumentReference-70005",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-24T13:22:14.566000+00:00",
    "description" : "First blood test results showing an anomaly in the values of xxxx",
    "content" : [ {
      "attachment" : {
        "id" : "70005",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70001-70005",
        "size" : 6,
        "title" : "testResult1.png",
        "creation" : "2021-06-24"
      }
    } ]
  }, {
    "id" : "DocumentReference-70006",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-06-24T13:22:14.566000+00:00",
    "description" : "Second blood test results showing an anomaly in the values of xxxx",
    "content" : [ {
      "attachment" : {
        "id" : "70006",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70001-70006",
        "size" : 17,
        "title" : "testResult2.pdf",
        "creation" : "2021-06-24"
      }
    } ]
  } ],
  "status" : "active",
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "99120038881"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-70005"
  }, {
    "reference" : "#DocumentReference-70006"
  } ],
  "intent" : "plan"
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-ReferralRequest


id
string
required
	
Example: 000000070000


meta
object
required
	

resourceType
string
required
	
Allowed values: ReferralRequest


contained
array
nullable
required
	
Field	Cardinality	Notes
eRS-Shortlist-List	1..1	
eRS-ServiceSearchCriteria-Parameters	1..1	
eRS-Appointment	0..1	
DocumentReference	0..*	


extension
array
nullable
required
	
Field	Cardinality	Notes
Extension-eRS-ReferralShortlist	1..1	
Extension-eRS-Commissioning-Rule-Org	1..1	
Extension-eRS-ReferralPriority	1..1	
Extension-eRS-Appointment	0..1	
Extension-eRS-ClinicalInfoFirstSubmitted	0..1	
Extension-eRS-ClinicalInfoLastUpdated	0..1	


status
string
required
	
Allowed values: active, completed


subject
object
required
	

supportingInfo
array
nullable
required
	

intent
string
required
	
Allowed values: plan
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 409

Conflict - Version supplied as part of the request does not match current version of the referral request

HTTP status: 412

Precondition Failed - Mandatory data is missing

HTTP status: 415

Unsupported Media Type

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
REFERENCE_NOT_FOUND	A supplied reference could not be resolved to valid resource (e.g. a patient, clinician or an organisation).
INAPPROPRIATE_VALUE	A value, which is acceptable under different conditions, is inappropriate in the context of the other information provided.
MISSING_VALUE	A field defined as mandatory for an endpoint has not been provided.
INVALID_STATE	Indicates that the referenced item is not in the correct state for the request to be processed.
INVALID_REQUEST_TYPE	The UBRN provided exists in e-RS but does not correspond to an active request.
INVALID_REQUEST_STATE	The Request, while otherwise valid, is not in the correct state for the specific action being performed.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
INVALID_VALUE	The input provided does not conform to the expected data types and format.
UNEXPECTED_FIELD	A field is provided that is not expected as part of the request. E.g. a field is mis-spelt, was defined on a previous version of the endpoint but has subsequently been removed.
INVALID_FHIR_STRUCTURE	The FHIR data structure in the message body does not match the expected structure (e.g. an array is present for a value when no array is expected).
CONFLICTING_VALUES	Two or more supplied values are contradictory.
DUPLICATE_FILENAME	A file being attached, matches another file being attached, or matches a file that is already linked.
NO_CHANGES_DETECTED	No changes detected when processing supplied request.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 423

Locked - resource is locked

HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A013 - Accept referral
POST /STU3/ReferralRequest/{ubrn}/$ers.acceptReferral
Try this API
Overview

Use this endpoint, as a service provider, to accept a referral that is booked into your bookable service and awaiting review.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

SERVICE_PROVIDER_CLINICIAN
SERVICE_PROVIDER_CLINICIAN_ADMIN

You need to use A008 - Retrieve referral worklist to retrieve the contents of the 'Referrals For Review' worklist. A013 - Accept referral can only be used for referrals booked into bookable services, and not the referrals sent into triage services.

You need to use A005 - Retrieve referral request to retrieve the details for the referral.

You need to use A006 - Retrieve attachment to retrieve the clinical attachments for the referral.

You need to use A007 - Retrieve clinical information to retrieve the clinical information summary PDF for the referral.

Use cases

As an authenticated user

I need to accept an inbound referral after its review

So that I can confirm the patient's referral is appropriate for the current service and booked appointment date/time.

Request
Path parameters
Name	Description
ubrn	

String

The unique booking reference number of the referral request

Example: 000000070000

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

NHSD-eRS-On-Behalf-Of-User-ID	

String

The (SDS) user ID of the user that the authenticating user wishes to act on behalf of (OBO).

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Where an OBO User ID is supplied the authenticating user must be an SPCA and the OBO User ID must be that of an appropriate SPC.

Example: 021600556514


X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


If-Match	

String

The version of the resource to be updated

Pattern: /^W\/"[0-9]+"$/

Example: W/"4"

Required
Response
HTTP status: 200

e-RS Referral Request

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


ETag	

String

Record version identifier enclosed in quotes and preceded by 'W/'. For example, W/"2".

This Weak ETag corresponds to meta.versionId attribute in the resource body.

Pattern: /^W\/"[0-9]+"$/

Example: W/"2"

Body

Content type: application/fhir+json

Example

Example response

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "9",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-10-13T12:51:16.848000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl/STU3/v1/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11000"
        },
        "display" : "Forthright Cardiology Business Service"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "0",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "booked",
    "description" : "e-Referral Appointment",
    "start" : "2021-10-15T12:51:12.625000+00:00",
    "end" : "2021-10-15T13:51:12.625000+00:00",
    "slot" : [ {
      "reference" : "Slot/11002001"
    } ],
    "created" : "2021-10-13T12:51:19.344000+00:00",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070000/_history/9"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "1000000001"
        }
      },
      "status" : "accepted"
    }, {
      "type" : {
        "coding" : [ {
          "system" : "http://hl7.org/fhir/ValueSet/encounter-participant-type",
          "code" : "CON"
        } ]
      },
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "021600556514"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-70000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-10-13T12:51:31.874000+00:00",
    "description" : "upload png",
    "content" : [ {
      "attachment" : {
        "id" : "70000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "103264992985"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70000-70000",
        "size" : 6,
        "title" : "upload.png",
        "creation" : "2021-10-13"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "1000000001"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-70000"
  } ],
  "intent" : "plan"
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-ReferralRequest


id
string
required
	
Example: 000000070000


meta
object
required
	

resourceType
string
required
	
Allowed values: ReferralRequest


contained
array
nullable
required
	
Field	Cardinality	Notes
eRS-Shortlist-List	1..1	
eRS-ServiceSearchCriteria-Parameters	1..1	
eRS-Appointment	0..1	
DocumentReference	0..*	


extension
array
nullable
required
	
Field	Cardinality	Notes
Extension-eRS-ReferralShortlist	1..1	
Extension-eRS-Commissioning-Rule-Org	1..1	
Extension-eRS-ReferralPriority	1..1	
Extension-eRS-Appointment	0..1	
Extension-eRS-ClinicalInfoFirstSubmitted	0..1	
Extension-eRS-ClinicalInfoLastUpdated	0..1	


status
string
required
	
Allowed values: active, completed


subject
object
required
	

supportingInfo
array
nullable
required
	

intent
string
required
	
Allowed values: plan
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 409

Conflict - Version supplied as part of the request does not match current version of the referral request

HTTP status: 412

Precondition Failed - Mandatory data is missing

HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
INVALID_REQUEST_STATE	The Request, while otherwise valid, is not in the correct state for the specific action being performed.
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 423

Locked - resource is locked

HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A014 - Reject referral
POST /STU3/ReferralRequest/{ubrn}/$ers.rejectReferral
Try this API
Overview

Use this endpoint, as a service provider, to reject a referral that is booked into your bookable service and awaiting review. This returns the referral to the referrer with a mandatory user comment to explain why it has been rejected.

Consider using A022 - Cancel appointment, action later instead if you wish to ask your admin team to get the patient into the most appropriate service.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

SERVICE_PROVIDER_CLINICIAN
SERVICE_PROVIDER_CLINICIAN_ADMIN

You need to use A008 - Retrieve referral worklist to retrieve the contents of the 'Referrals For Review' worklist. A014 - Reject referral can only be used for referrals booked into bookable services, and not the referrals sent into triage services.

You need to use A005 - Retrieve referral request to retrieve the details for the referral.

You need to use A006 - Retrieve attachment to retrieve the clinical attachments for the referral.

You need to use A007 - Retrieve clinical information to retrieve the clinical information summary PDF for the referral.

You need to use A004 - Retrieve reference data to retrieve a list of rejection reason reference data codes along with their user-friendly display names. To find relevant rejection reasons, obtain reference data from APPOINTMENT-CANCELLATION-REASON and filter as follows:

appointmentBookingCancellationReasonType must be PROVIDER_REJECT
effectiveFrom must be in the past, and
effectiveTo must not be in the past
Use cases

As an authenticated user

I need to reject an inbound referral back to the referrer after its review with an explanation of why

So that the referrer can address the reason for rejection and progress the referral appropriately.

Request
Path parameters
Name	Description
ubrn	

String

The unique booking reference number of the referral request

Example: 000000070000

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

NHSD-eRS-On-Behalf-Of-User-ID	

String

The (SDS) user ID of the user that the authenticating user wishes to act on behalf of (OBO).

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Where an OBO User ID is supplied the authenticating user must be an SPCA and the OBO User ID must be that of an appropriate SPC.

Example: 021600556514


X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


If-Match	

String

The version of the resource to be updated

Pattern: /^W\/"[0-9]+"$/

Example: W/"4"

Required
Body
Required

Content type: application/fhir+json

Examples

Basic example for IBS

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-RejectReferral-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "rejectionReason",
    "valueCoding" : {
      "system" : "_baseUrl_/STU3/CodeSystem/APPOINTMENT-CANCELLATION-REASON",
      "code" : "OTHER"
    }
  }, {
    "name" : "rejectionComments",
    "valueString" : "This is a short comment"
  }, {
    "name" : "appointmentCancelledInPAS",
    "valueBoolean" : true
  } ]
}

Basic example for DBS

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-RejectReferral-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "rejectionReason",
    "valueCoding" : {
      "system" : "_baseUrl_/STU3/CodeSystem/APPOINTMENT-CANCELLATION-REASON",
      "code" : "SERVICE_INAPPROPRIATE"
    }
  }, {
    "name" : "rejectionComments",
    "valueString" : "This is a short comment"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-RejectReferral-Parameters


resourceType
string
required
	
Allowed values: Parameters


meta
object
required
	

parameter
array
required
	
Field	Cardinality	Notes
rejectionReason	1..1	The reason why the referral is being rejected
rejectionComments	0..1	This may be mandatory if mandatory comment indicator is set to 'Yes' for the Rejection Reason Type selected. Maximum 2000 characters.
appointmentCancelledInPAS	0..1	This flag is mandatory for indirectly bookable services
Response
HTTP status: 200

e-RS Referral Request

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


ETag	

String

Record version identifier enclosed in quotes and preceded by 'W/'. For example, W/"2".

This Weak ETag corresponds to meta.versionId attribute in the resource body.

Pattern: /^W\/"[0-9]+"$/

Example: W/"2"

Body

Content type: application/fhir+json

Examples

Example response for IBS

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "10",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-10-26T10:03:32.637000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11016"
        },
        "display" : "Triage-Related Indirect Business Service"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "2",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "cancelled",
    "description" : "e-Referral Appointment",
    "created" : "2021-10-26T10:03:34.258000+00:00",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070000/_history/10"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11016"
        },
        "display" : "Triage-Related Indirect Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9462979626"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-70000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-10-26T10:03:57.281000+00:00",
    "description" : "upload png",
    "content" : [ {
      "attachment" : {
        "id" : "70000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70000-70000",
        "size" : 6,
        "title" : "upload.png",
        "creation" : "2021-10-26"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9462979626"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-70000"
  } ],
  "intent" : "plan"
}

Example response for DBS

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "10",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-10-28T13:22:31.152000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "1",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "cancelled",
    "description" : "e-Referral Appointment",
    "created" : "2021-10-28T13:22:33.758000+00:00",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070000/_history/10"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9462979626"
        }
      },
      "status" : "accepted"
    }, {
      "type" : {
        "coding" : [ {
          "system" : "http://hl7.org/fhir/ValueSet/encounter-participant-type",
          "code" : "CON"
        } ]
      },
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "021600556514"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-70000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-10-28T13:22:43.266000+00:00",
    "description" : "upload png",
    "content" : [ {
      "attachment" : {
        "id" : "70000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70000-70000",
        "size" : 6,
        "title" : "upload.png",
        "creation" : "2021-10-28"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9462979626"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-70000"
  } ],
  "intent" : "plan"
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-ReferralRequest


id
string
required
	
Example: 000000070000


meta
object
required
	

resourceType
string
required
	
Allowed values: ReferralRequest


contained
array
nullable
required
	
Field	Cardinality	Notes
eRS-Shortlist-List	1..1	
eRS-ServiceSearchCriteria-Parameters	1..1	
eRS-Appointment	0..1	
DocumentReference	0..*	


extension
array
nullable
required
	
Field	Cardinality	Notes
Extension-eRS-ReferralShortlist	1..1	
Extension-eRS-Commissioning-Rule-Org	1..1	
Extension-eRS-ReferralPriority	1..1	
Extension-eRS-Appointment	0..1	
Extension-eRS-ClinicalInfoFirstSubmitted	0..1	
Extension-eRS-ClinicalInfoLastUpdated	0..1	


status
string
required
	
Allowed values: active, completed


subject
object
required
	

supportingInfo
array
nullable
required
	

intent
string
required
	
Allowed values: plan
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 409

Conflict - Version supplied as part of the request does not match current version of the referral request

HTTP status: 412

Precondition Failed - Mandatory data is missing

HTTP status: 415

Unsupported Media Type

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
INAPPROPRIATE_VALUE	A value, which is acceptable under different conditions, is inappropriate in the context of the other information provided.
MISSING_VALUE	A field defined as mandatory for an endpoint has not been provided.
INVALID_VALUE	The input provided does not conform to the expected data types and format.
INVALID_CODE	The input provided for a field is not one of the defined legal values.
UNEXPECTED_FIELD	A field is provided that is not expected as part of the request. E.g. a field is mis-spelt, was defined on a previous version of the endpoint but has subsequently been removed.
VALUE_IS_REQUIRED	A business rule defines a value as mandatory but it has not been provided.
FIELD_NOT_PERMITTED	A business rule defines a field as not permitted but it has been provided.
INVALID_REQUEST_STATE	The Request, while otherwise valid, is not in the correct state for the specific action being performed.
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
UNABLE_TO_CANCEL_APPOINTMENT	System is unable to cancel the appointment.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 423

Locked - resource is locked

HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

HTTP status: 504

Where status code 504 (Gateway Timeout) is returned then an eRS-OperationOutcome-1 will be included in the body. Check diagnostics property for specific information regarding the error.

Error code	Description
PAS_NOT_RESPONDING	No response from PAS.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "timeout",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "PAS_NOT_RESPONDING",
        "display" : "No response from PAS"
      } ]
    },
    "diagnostics" : "PAS unable to create booking into slot '11002026' for UBRN: 000000070000. PAS Request Status: TIMED_OUT"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
A015 - Retrieve appointment slots
GET /STU3/Slot
Try this API
Overview

Use this endpoint to retrieve available appointment slots for a service.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN

You need to have identified a directly bookable service that is on the current referral shortlist. You can do this by using A005 - Retrieve referral request.

Use case

As an authenticated user

I need to retrieve a list of available appointment slots for a service

So that I can offer them to the patient for booking.

Important note

You need to provide the 'commissioning rule organisation' when calling A015 - Retrieve appointment slots to ensure only suitable slots are returned. You can obtain the 'commissioning rule organisation' from A005 - Retrieve referral request.

Related endpoints

You can book an appointment to an available slot using A016 - Book or defer appointment.

You can defer booking to a directly bookable service using A016 - Book or defer appointment but only in the following circumstances:

when the service has no available slots
when trying to book an appointment into a service, the slot advertised is no longer available
when trying to book an appointment into a service, no response is received within message timeout period (currently 2 minutes)
Sandbox test scenarios

You can test the following scenarios in our sandbox environment:

Scenario	Request Query Parameters	Response
Minimum slot search	schedule.actor:HealthcareService=12000, appointmentType=ROUTINE, _count=20, status=free, page=1	Illustrates minimum usage/parameters with concise, minimal response.
Empty slot search response	schedule.actor:HealthcareService=10000, appointmentType=ROUTINE, _count=20, status=free, page=1	Illustrates how a 'no slots' response appears.
Multipage slot search (page 1)	schedule.actor:HealthcareService=11000, appointmentType=ROUTINE, _count=5, status=free, page=1	Illustrates first page of multi-page response.
Multipage slot search (page 2)	schedule.actor:HealthcareService=11000, appointmentType=ROUTINE, _count=5, status=free, page=2	Illustrates second page of multi-page response.
Multipage slot search (invalid page 5)	schedule.actor:HealthcareService=11000, appointmentType=ROUTINE, _count=5, status=free, page=5	Illustrates error when page is outside of valid range.
Multi schedule response	schedule.actor:HealthcareService=13000, appointmentType=ROUTINE, _count=5, status=free, page=1	Illustrates response when there is >1 Schedule: one Schedule is for slots with no associated clinician and the other does have an associated clinician.
Slot clinician search	schedule.actor:HealthcareService=14000, schedule.actor:Practitioner=921600556514, appointmentType=ROUTINE, _count=5, status=free, page=1	Illustrates search for clinician-specific slots
Request
Query parameters
Name	Description
schedule.actor:HealthcareService	

String

A single service ID is required to indicate the service for which appointment slots are required.

Example: 11000

Required

appointmentType	

String

The priority of the appointment slots.

Allowed values: ROUTINE, URGENT, TWO_WEEK_WAIT

Required

status	

String

The status of the appointment slots required must be supplied. This must indicate that 'free' slots are required.

Allowed values: free

Required

_count	

Integer (int32)

The pageSize is the maximum number of results (i.e. slots) that should be returned by this call. This value must be in the range of 1-100. 100 is the maximum slots available per API call. Note: Page contents cannot be guaranteed to be contiguous with no gaps or duplicates since the availability of slots may change between calls to the API.

Maximum: 100 (inclusive)

Minimum: 1 (inclusive)

Example: 5

Required

page	

Integer (int32)

The number of the page required to be returned, starting at 1.

Minimum: 1 (inclusive)

Example: 1

Required

schedule.actor:Practitioner	

String

Slots in e-RS may be allocated to a clinician and is set in the service provider's PAS. If a named clinician is supplied (by the UUID), the appointment slots returned are constrained to slots for which this clinician is allocated to the appointment slot. The clinician must be a named clinician for the selected service.

Example: 921600556514


_include	

String

An optional URL parameter to cause service/clinician information to be returned ('_include=Slot:schedule') is recognised (i.e. causes no error and is understood by e-RS) but e-RS will return a Schedule for each Slot whether this parameter is present or not.

Example: Slot:schedule

Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


nhsd-ers-comm-rule-org	

String

To retrieve accurate slot information for a specific ReferralRequest the code from the ReferralRequest's 'Extension-eRS-Commissioning-Rule-Org-1' field should be passed to the slot search in this field otherwise slots which are, in fact, unbookable for that ReferralRequest may be returned

Example: R68

Required
Response
HTTP status: 200

The Response contains a FHIR 'Bundle' that, in turn, contains 'Slot' resources where each 'Slot' resource includes the 'Reference' to the slot and the slot's 'start' and 'end' times.

The Response Bundle also contains one or more 'Schedule' resources each of which is used to indicate which allocated clinician a Slot is associated with (if any). The 'Schedule' also indicates the Service Id that will be the same Service for which the Slot search was performed.

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Examples

Minimum slot search

Copy
{
  "id" : "1773b120-6aa5-407d-a8a9-92ff13f4e6d4",
  "meta" : {
    "lastUpdated" : "2021-05-20T08:25:35.407000+00:00",
    "profile" : [ "http://hl7.org/fhir/STU3/StructureDefinition/Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "total" : 3,
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/STU3/Slot?schedule.actor%3AHealthcareService=12000&appointmentType=ROUTINE&_count=20&status=free&_include=Slot%3Aschedule&page=1"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/STU3/Slot/12000001",
    "resource" : {
      "id" : "12000001",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-12000001"
      } ],
      "schedule" : {
        "reference" : "Schedule/12000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T08:25:32.562000+00:00",
      "end" : "2021-05-22T09:25:32.562000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/12000003",
    "resource" : {
      "id" : "12000003",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-12000003"
      } ],
      "schedule" : {
        "reference" : "Schedule/12000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T10:25:32.562000+00:00",
      "end" : "2021-05-22T11:25:32.562000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/12000004",
    "resource" : {
      "id" : "12000004",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-12000004"
      } ],
      "schedule" : {
        "reference" : "Schedule/12000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T11:25:32.562000+00:00",
      "end" : "2021-05-22T12:25:32.562000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Schedule/12000-921600556514",
    "resource" : {
      "id" : "12000-921600556514",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Schedule-1" ]
      },
      "resourceType" : "Schedule",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/ers-schedule",
        "value" : "12000-921600556514"
      } ],
      "actor" : [ {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "12000"
        }
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  } ]
}

Empty slot search response

Copy
{
  "id" : "812ab103-2a03-41e9-871d-6f8496e4d9cf",
  "meta" : {
    "lastUpdated" : "2021-05-20T07:44:45.096000+00:00",
    "profile" : [ "http://hl7.org/fhir/STU3/StructureDefinition/Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "total" : 0,
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/STU3/Slot?schedule.actor%3AHealthcareService=10000&appointmentType=ROUTINE&_count=20&status=free&_include=Slot%3Aschedule&page=1"
  } ],
  "entry" : [ ]
}

Multipage slot search (page 1)

Copy
{
  "id" : "7c239021-3c13-44ad-b0c0-fd03c0549b0e",
  "meta" : {
    "lastUpdated" : "2021-05-20T09:02:28.736000+00:00",
    "profile" : [ "http://hl7.org/fhir/STU3/StructureDefinition/Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "total" : 12,
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/STU3/Slot?schedule.actor%3AHealthcareService=11000&appointmentType=ROUTINE&_count=5&status=free&_include=Slot%3Aschedule&page=1"
  }, {
    "relation" : "next",
    "url" : "_baseUrl_/STU3/Slot?schedule.actor%3AHealthcareService=11000&appointmentType=ROUTINE&_count=5&status=free&_include=Slot%3Aschedule&page=2"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000001",
    "resource" : {
      "id" : "11000001",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000001"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T09:02:25.788000+00:00",
      "end" : "2021-05-22T10:02:25.788000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000002",
    "resource" : {
      "id" : "11000002",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000003"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T11:02:25.788000+00:00",
      "end" : "2021-05-22T12:02:25.788000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000003",
    "resource" : {
      "id" : "11000003",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000004"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T12:02:25.788000+00:00",
      "end" : "2021-05-22T13:02:25.788000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000004",
    "resource" : {
      "id" : "11000004",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000005"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T13:02:25.788000+00:00",
      "end" : "2021-05-22T14:02:25.788000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000005",
    "resource" : {
      "id" : "11000005",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000006"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T14:02:25.788000+00:00",
      "end" : "2021-05-22T15:02:25.788000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Schedule/11000-921600556514",
    "resource" : {
      "id" : "11000-921600556514",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Schedule-1" ]
      },
      "resourceType" : "Schedule",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/ers-schedule",
        "value" : "11000-921600556514"
      } ],
      "actor" : [ {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11000"
        }
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  } ]
}

Multipage slot search (page 2)

Copy
{
  "id" : "e24e5cd3-2b4a-4ee8-a86c-a53a917f6ffa",
  "meta" : {
    "lastUpdated" : "2021-05-20T09:07:00.038000+00:00",
    "profile" : [ "http://hl7.org/fhir/STU3/StructureDefinition/Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "total" : 12,
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/STU3/Slot?schedule.actor%3AHealthcareService=11000&appointmentType=ROUTINE&_count=5&status=free&_include=Slot%3Aschedule&page=2"
  }, {
    "relation" : "previous",
    "url" : "_baseUrl_/STU3/Slot?schedule.actor%3AHealthcareService=11000&appointmentType=ROUTINE&_count=5&status=free&_include=Slot%3Aschedule&page=1"
  }, {
    "relation" : "next",
    "url" : "_baseUrl_/STU3/Slot?schedule.actor%3AHealthcareService=11000&appointmentType=ROUTINE&_count=5&status=free&_include=Slot%3Aschedule&page=3"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000006",
    "resource" : {
      "id" : "11000006",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000007"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T15:06:56.873000+00:00",
      "end" : "2021-05-22T16:06:56.873000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000007",
    "resource" : {
      "id" : "11000007",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000008"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T16:06:56.873000+00:00",
      "end" : "2021-05-22T17:06:56.873000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000008",
    "resource" : {
      "id" : "11000008",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000009"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T17:06:56.873000+00:00",
      "end" : "2021-05-22T18:06:56.873000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000009",
    "resource" : {
      "id" : "11000009",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000010"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T18:06:56.873000+00:00",
      "end" : "2021-05-22T19:06:56.873000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000010",
    "resource" : {
      "id" : "11000010",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000011"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T19:06:56.873000+00:00",
      "end" : "2021-05-22T20:06:56.873000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Schedule/11000-921600556514",
    "resource" : {
      "id" : "11000-921600556514",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Schedule-1" ]
      },
      "resourceType" : "Schedule",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/ers-schedule",
        "value" : "11000-921600556514"
      } ],
      "actor" : [ {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11000"
        }
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  } ]
}

Multi schedule response

Copy
{
  "id" : "c397728b-0453-40c5-8d17-c9b86f02743c",
  "meta" : {
    "lastUpdated" : "2021-05-20T09:59:47.422000+00:00",
    "profile" : [ "http://hl7.org/fhir/STU3/StructureDefinition/Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "total" : 5,
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/STU3/Slot?schedule.actor%3AHealthcareService=13000&appointmentType=ROUTINE&_count=5&status=free&_include=Slot%3Aschedule&page=1"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000012",
    "resource" : {
      "id" : "11000012",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000012"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T20:59:43.956000+00:00",
      "end" : "2021-05-22T21:59:43.956000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000013",
    "resource" : {
      "id" : "11000013",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000013"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T21:59:43.956000+00:00",
      "end" : "2021-05-22T22:59:43.956000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000014",
    "resource" : {
      "id" : "11000014",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000014"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T22:59:43.956000+00:00",
      "end" : "2021-05-22T23:59:43.956000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000015",
    "resource" : {
      "id" : "11000015",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000015"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000"
      },
      "status" : "free",
      "start" : "2021-05-22T23:59:43.956000+00:00",
      "end" : "2021-05-23T00:59:43.956000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000021",
    "resource" : {
      "id" : "11000021",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000021"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000"
      },
      "status" : "free",
      "start" : "2021-05-23T04:59:43.956000+00:00",
      "end" : "2021-05-23T05:59:43.956000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Schedule/11000-921600556514",
    "resource" : {
      "id" : "11000-921600556514",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Schedule-1" ]
      },
      "resourceType" : "Schedule",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/ers-schedule",
        "value" : "11000-921600556514"
      } ],
      "actor" : [ {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "13000"
        }
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Schedule/11000",
    "resource" : {
      "id" : "11000",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Schedule-1" ]
      },
      "resourceType" : "Schedule",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/ers-schedule",
        "value" : "11000"
      } ],
      "actor" : [ {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "13000"
        }
      }, {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "921600556514"
        }
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  } ]
}

Slot clinician search

Copy
{
  "id" : "7c239021-3c13-44ad-b0c0-fd03c0549b0e",
  "meta" : {
    "lastUpdated" : "2021-05-20T09:02:28.736000+00:00",
    "profile" : [ "http://hl7.org/fhir/STU3/StructureDefinition/Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "total" : 4,
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/STU3/Slot?schedule.actor%3APractitioner=921600556514&schedule.actor%3AHealthcareService=14000&appointmentType=ROUTINE&_count=5&status=free&_include=Slot%3Aschedule&page=1"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000001",
    "resource" : {
      "id" : "11000001",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000001"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T09:02:25.788000+00:00",
      "end" : "2021-05-22T10:02:25.788000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000002",
    "resource" : {
      "id" : "11000003",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000003"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T11:02:25.788000+00:00",
      "end" : "2021-05-22T12:02:25.788000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000003",
    "resource" : {
      "id" : "11000004",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000004"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T12:02:25.788000+00:00",
      "end" : "2021-05-22T13:02:25.788000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Slot/11000004",
    "resource" : {
      "id" : "11000005",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Slot-1" ]
      },
      "resourceType" : "Slot",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/alternative-slot",
        "value" : "USRN-11000005"
      } ],
      "schedule" : {
        "reference" : "Schedule/11000-921600556514"
      },
      "status" : "free",
      "start" : "2021-05-22T13:02:25.788000+00:00",
      "end" : "2021-05-22T14:02:25.788000+00:00"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Schedule/11000-921600556514",
    "resource" : {
      "id" : "11000-921600556514",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Schedule-1" ]
      },
      "resourceType" : "Schedule",
      "identifier" : [ {
        "system" : "https://fhir.nhs.uk/Id/ers-schedule",
        "value" : "11000-921600556514"
      } ],
      "actor" : [ {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "14000"
        }
      }, {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "921600556514"
        }
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
Bundle resource containing appointment slots


id
string
required
	
Example: 08acc887-6a7b-4b38-8f50-022e41319efe


meta
object
required
	

resourceType
string
required
	
Allowed values: Bundle


type
string
required
	
Allowed values: searchset


total
integer int32
required
	
Minimum: 0 (inclusive)
Example: 3


link
array
required
	
Max items: 3
Min items: 1


entry
array
required
	
Field	Cardinality	Notes
Slot	1..*	
Schedule	1..*	
HTTP status: 400

Where status code 400 (Bad Request) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
REFERENCE_NOT_FOUND	A supplied reference could not be resolved to valid resource (e.g. a patient, clinician or an organisation).
INVALID_VALUE	The input provided does not conform to the expected data types and format.
INVALID_CODE	The input provided for a field is not one of the defined legal values.
MISSING_PARAMETER	Indicates missing mandatory FHIR search parameter.
MISSING_HEADER	Indicates missing mandatory HTTP header.
INVALID_STATE	Indicates that the referenced item is not in the correct state for the request to be processed.
SERVICE_UNAVAILABLE	Indicates that a service is no longer available.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "INVALID_VALUE",
        "display" : "Invalid value"
      } ]
    },
    "diagnostics" : "'Page Number' (5) is invalid."
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A016 - Book or defer appointment
POST /STU3/Appointment
Try this API
Overview

Use this endpoint to book an appointment to a service if an appointment slot is available or defer booking if no appointment slot is available.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN

You need to retrieve available appointment slots for a service using A015 - Retrieve appointment slots.

You need to use the 'Unique Booking Reference Number' (UBRN) of a referral request in order to use this endpoint.

Important note when deferring to provider

You should only defer booking to a directly bookable service in the following circumstances:

when the service has no available slots or
when trying to book an appointment into a service, the slot advertised is no longer available or
when trying to book an appointment into a service, no response is received within the message timeout period (currently 2 minutes)
Use case

As an authenticated user

I need to either:

book an appointment to an available appointment slot for a service or
defer booking responsibility for the service to the service provider if a booking is not possible

So I can progress my patient's care at that service.

Related endpoints

You can generate a letter for the patient, summarising the current state of their referral and any steps the patient may need to follow using A019 - Generate patient letter.

Request
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Body
Required

Content type: application/fhir+json

Examples

Minimum booking

Copy
{
  "id" : "appointment",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
  },
  "language" : "en",
  "resourceType" : "Appointment",
  "status" : "booked",
  "description" : "e-Referral Appointment",
  "start" : "2022-07-11T12:00:00+00:00",
  "end" : "2022-07-11T13:00:00+00:00",
  "slot" : [ {
    "reference" : "Slot/11000021"
  } ],
  "incomingReferral" : [ {
    "reference" : "ReferralRequest/000000070000/_history/6"
  } ],
  "participant" : [ {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "11000"
      }
    },
    "status" : "accepted"
  }, {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/nhs-number",
        "value" : "9912003888"
      }
    },
    "status" : "accepted"
  } ]
}

Minimum deferral

Copy
{
  "id" : "appointment",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
  },
  "language" : "en",
  "resourceType" : "Appointment",
  "status" : "proposed",
  "reason" : [ {
    "coding" : [ {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewReason-1",
      "code" : "NO_SLOTS_AT_SERVICE"
    } ]
  } ],
  "description" : "e-Referral Appointment",
  "incomingReferral" : [ {
    "reference" : "ReferralRequest/000000070000/_history/6"
  } ],
  "participant" : [ {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "11021"
      }
    },
    "status" : "accepted"
  }, {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/nhs-number",
        "value" : "9912003888"
      }
    },
    "status" : "accepted"
  } ]
}

Booking with named clinician

Copy
{
  "id" : "appointment",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
  },
  "language" : "en",
  "resourceType" : "Appointment",
  "status" : "booked",
  "description" : "e-Referral Appointment",
  "start" : "2022-07-11T13:15:00+00:00",
  "end" : "2022-07-11T14:15:00+00:00",
  "slot" : [ {
    "reference" : "Slot/11008006"
  } ],
  "incomingReferral" : [ {
    "reference" : "ReferralRequest/000000070000/_history/6"
  } ],
  "participant" : [ {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "11008"
      }
    },
    "status" : "accepted"
  }, {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/nhs-number",
        "value" : "9912003888"
      }
    },
    "status" : "accepted"
  }, {
    "type" : {
      "coding" : [ {
        "system" : "http://hl7.org/fhir/ValueSet/encounter-participant-type",
        "code" : "CON"
      } ]
    },
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/sds-user-id",
        "value" : "021600556514"
      }
    },
    "status" : "accepted"
  } ]
}

Deferral with slot reference

Copy
{
  "id" : "appointment",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
  },
  "language" : "en",
  "resourceType" : "Appointment",
  "status" : "proposed",
  "reason" : [ {
    "coding" : [ {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewReason-1",
      "code" : "SLOT_NOT_AVAILABLE"
    } ]
  } ],
  "description" : "e-Referral Appointment",
  "slot" : [ {
    "reference" : "Slot/11000022"
  } ],
  "comment" : "Patient can only attend at 3pm",
  "incomingReferral" : [ {
    "reference" : "ReferralRequest/000000070000/_history/6"
  } ],
  "participant" : [ {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "11000"
      }
    },
    "status" : "accepted"
  }, {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/nhs-number",
        "value" : "9912003888"
      }
    },
    "status" : "accepted"
  } ]
}

Deferral booking attempt problem

Copy
{
  "id" : "appointment",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
  },
  "language" : "en",
  "resourceType" : "Appointment",
  "status" : "proposed",
  "reason" : [ {
    "coding" : [ {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewReason-1",
      "code" : "BOOKING_ATTEMPT_PROBLEM"
    } ]
  } ],
  "description" : "e-Referral Appointment",
  "comment" : "Booking failed",
  "incomingReferral" : [ {
    "reference" : "ReferralRequest/000000070000/_history/6"
  } ],
  "participant" : [ {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "11000"
      }
    },
    "status" : "accepted"
  }, {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/nhs-number",
        "value" : "9912003888"
      }
    },
    "status" : "accepted"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-Appointment

A booking of a healthcare event among patient(s), practitioner(s), related person(s) and/or device(s) for a specific date/time. This may result in one or more Encounter(s) (https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1)



id
string
required
	
Example: appointment


meta
object
required
	

language
string
	
Example: en


resourceType
string
required
	
Allowed values: Appointment


status
string
required
	
Allowed values: proposed, pending, booked, arrived, fulfilled, cancelled, noshow


reason
array
nullable
	
Max items: 1
Min items: 1


description
string
required
	
Allowed values: e-Referral Appointment


start
string date-time
nullable
	
Example: 2021-04-22T08:30Z


end
string date-time
nullable
	
Example: 2021-04-22T10:00Z


slot
array
nullable
	
Max items: 1
Min items: 0


created
string date-time
nullable
	
Example: 2021-04-20T12:17:35.128Z


comment
string
nullable
	

incomingReferral
array
nullable
required
	
Max items: 1
Min items: 0


participant
array
required
	
Field	Cardinality	Notes
Patient	1..1	
Service	1..1	
AllocatedClinician	0..1	
Max items: 3
Min items: 2
Response
HTTP status: 201

An appointment within e-RS.

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


ETag	

String

Record version identifier enclosed in quotes and preceded by 'W/'. For example, W/"2".

This Weak ETag corresponds to meta.versionId attribute in the resource body.

Pattern: /^W\/"[0-9]+"$/

Example: W/"2"

Body

Content type: application/fhir+json

Examples

Minimum booking

Copy
{
  "id" : "70000",
  "meta" : {
    "versionId" : "0",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
  },
  "language" : "en",
  "resourceType" : "Appointment",
  "status" : "booked",
  "description" : "e-Referral Appointment",
  "start" : "2021-07-11T12:00:00+00:00",
  "end" : "2021-07-11T13:00:00+00:00",
  "slot" : [ {
    "reference" : "Slot/11000021"
  } ],
  "created" : "2021-06-30T13:02:32.133000+00:00",
  "incomingReferral" : [ {
    "reference" : "ReferralRequest/000000070000/_history/8"
  } ],
  "participant" : [ {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "11000"
      },
      "display" : "Forthright Cardiology Business Service"
    },
    "status" : "accepted"
  }, {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/nhs-number",
        "value" : "9912003888"
      }
    },
    "status" : "accepted"
  } ]
}

Minimum deferral

Copy
{
  "id" : "70000",
  "meta" : {
    "versionId" : "1",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
  },
  "language" : "en",
  "resourceType" : "Appointment",
  "status" : "proposed",
  "reason" : [ {
    "coding" : [ {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewReason-1",
      "code" : "NO_SLOTS_AT_SERVICE"
    } ]
  } ],
  "description" : "e-Referral Appointment",
  "created" : "2021-06-30T13:58:47.940000+00:00",
  "incomingReferral" : [ {
    "reference" : "ReferralRequest/000000070000/_history/8"
  } ],
  "participant" : [ {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "11021"
      },
      "display" : "Cardiology Business Service"
    },
    "status" : "accepted"
  }, {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/nhs-number",
        "value" : "9912003888"
      }
    },
    "status" : "accepted"
  } ]
}

Booking with named clinician

Copy
{
  "id" : "70000",
  "meta" : {
    "versionId" : "0",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
  },
  "language" : "en",
  "resourceType" : "Appointment",
  "status" : "booked",
  "description" : "e-Referral Appointment",
  "start" : "2022-07-11T13:15:00+00:00",
  "end" : "2022-07-11T14:15:00+00:00",
  "slot" : [ {
    "reference" : "Slot/11008006"
  } ],
  "created" : "2021-06-30T13:15:18.759000+00:00",
  "incomingReferral" : [ {
    "reference" : "ReferralRequest/000000070000/_history/8"
  } ],
  "participant" : [ {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "11008"
      },
      "display" : "FIRST Cardiology Business Service"
    },
    "status" : "accepted"
  }, {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/nhs-number",
        "value" : "9912003888"
      }
    },
    "status" : "accepted"
  }, {
    "type" : {
      "coding" : [ {
        "system" : "http://hl7.org/fhir/ValueSet/encounter-participant-type",
        "code" : "CON"
      } ]
    },
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/sds-user-id",
        "value" : "021600556514"
      }
    },
    "status" : "accepted"
  } ]
}

Deferral booking attempt problem

Copy
{
  "id" : "70000",
  "meta" : {
    "versionId" : "1",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
  },
  "language" : "en",
  "resourceType" : "Appointment",
  "status" : "proposed",
  "reason" : [ {
    "coding" : [ {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewReason-1",
      "code" : "BOOKING_ATTEMPT_PROBLEM"
    } ]
  } ],
  "description" : "e-Referral Appointment",
  "created" : "2021-06-30T15:29:15.396000+00:00",
  "comment" : "Booking failed",
  "incomingReferral" : [ {
    "reference" : "ReferralRequest/000000070000/_history/8"
  } ],
  "participant" : [ {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/ers-service",
        "value" : "11000"
      },
      "display" : "Forthright Cardiology Business Service"
    },
    "status" : "accepted"
  }, {
    "actor" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/nhs-number",
        "value" : "9912003888"
      }
    },
    "status" : "accepted"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-Appointment

A booking of a healthcare event among patient(s), practitioner(s), related person(s) and/or device(s) for a specific date/time. This may result in one or more Encounter(s) (https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1)



id
string
required
	
Example: appointment


meta
object
required
	

language
string
	
Example: en


resourceType
string
required
	
Allowed values: Appointment


status
string
required
	
Allowed values: proposed, pending, booked, arrived, fulfilled, cancelled, noshow


reason
array
nullable
	
Max items: 1
Min items: 1


description
string
required
	
Allowed values: e-Referral Appointment


start
string date-time
nullable
	
Example: 2021-04-22T08:30Z


end
string date-time
nullable
	
Example: 2021-04-22T10:00Z


slot
array
nullable
	
Max items: 1
Min items: 0


created
string date-time
nullable
	
Example: 2021-04-20T12:17:35.128Z


comment
string
nullable
	

incomingReferral
array
nullable
required
	
Max items: 1
Min items: 0


participant
array
required
	
Field	Cardinality	Notes
Patient	1..1	
Service	1..1	
AllocatedClinician	0..1	
Max items: 3
Min items: 2
HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 409

Conflict - Version supplied as part of the request does not match current version of the referral request

HTTP status: 415

Unsupported Media Type

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
INVALID_VALUE	The input provided does not conform to the expected data types and format.
INVALID_CODE	The input provided for a field is not one of the defined legal values.
REFERENCE_NOT_FOUND	A supplied reference could not be resolved to valid resource (e.g. a patient, clinician or an organisation).
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
INAPPROPRIATE_VALUE	A value, which is acceptable under different conditions, is inappropriate in the context of the other information provided.
SERVICE_UNAVAILABLE	Indicates that a service is no longer available.
INVALID_REQUEST_STATE	The Request, while otherwise valid, is not in the correct state for the specific action being performed.
MISSING_VALUE	A field defined as mandatory for an endpoint has not been provided.
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
INVALID_STATE	Indicates that the referenced item is not in the correct state for the request to be processed.
INAPPROPRIATE_SLOT	The slot provided is not suitable.
SLOT_NOT_AVAILABLE	Slot is no longer available.
UNABLE_TO_CONFIRM_APPOINTMENT	An unexpected error prevented eRS from successfully confirming the appointment.
SLOTS_CURRENTLY_AVAILABLE	There are currently future slots available, so you cannot defer to this Service to book.
THIS_SLOT_IS_AVAILABLE	Slot is currently available.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 423

Locked - resource is locked

HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

HTTP status: 502

Where status code 502 (Bad Gateway) is returned then an eRS-OperationOutcome-1 will be included in the body. Check diagnostics property for specific information regarding the error.

Error code	Description
PAS_RESPONDED_WITH_ERROR	Error received from PAS.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "exception",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "PAS_RESPONDED_WITH_ERROR",
        "display" : "Error recieved from PAS"
      } ]
    },
    "diagnostics" : "PAS unable to create booking into slot '11002026' for UBRN: 000000070000. PAS Request Status: ERROR"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 504

Where status code 504 (Gateway Timeout) is returned then an eRS-OperationOutcome-1 will be included in the body. Check diagnostics property for specific information regarding the error.

Error code	Description
PAS_NOT_RESPONDING	No response from PAS.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "timeout",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "PAS_NOT_RESPONDING",
        "display" : "No response from PAS"
      } ]
    },
    "diagnostics" : "PAS unable to create booking into slot '11002026' for UBRN: 000000070000. PAS Request Status: TIMED_OUT"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
A019 - Generate patient letter
POST /STU3/ReferralRequest/{ubrn}/$ers.generatePatientLetter
Try this API
Overview

Use this endpoint to download a PDF format letter for the patient summarising the current state of their referral and any steps the patient may need to follow.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN

You need to use the Unique Booking Reference Number (UBRN) of a referral request in order to use this endpoint.

Use case

As an authenticated user

I need to generate the patient letter including up-to-date details about their referral and any steps the patient may need to follow

So that I can pass it to the patient.

Request
Path parameters
Name	Description
ubrn	

String

The unique booking reference number of the referral request

Example: 000000070000

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Response
HTTP status: 200

Response contains the binary stream of the generated patient letter.

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


Content-Disposition	

String

The description of the type of content provided.

Example: attachment; filename="000000070000_Appointment_Confirmation_Summary_20210603121353"


Content-Length	

String

The length of the response.

Example: 3111

Body

Content type: application/pdf

Schema
Collapse all Expand all
Name	Description

string binary
	
HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
INVALID_REQUEST_TYPE	The UBRN provided exists in e-RS but does not correspond to an active request.
NO_ACCESS_CODE	The patient does not have an access code/password to log onto the patient portal.
INVALID_REQUEST_STATE	The Request, while otherwise valid, is not in the correct state for the specific action being performed.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A020 - Upload file to document store
POST /STU3/Binary
Try this API
Overview

Use this endpoint to upload a file containing clinical information to e-RS ready to be associated with a referral.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN
SERVICE_PROVIDER_CLINICIAN
SERVICE_PROVIDER_CLINICIAN_ADMIN

You can only upload file formats that are supported by e-RS. Currently, the supported file formats are:

File type	File extension(s)
Plain Text	.txt
HTML Text	.html, .htm
PDF	.pdf
XML Text	.xml
RTF Text	.rtf, .rtx
Basic Audio	.au
MPEG audio layer 3	.mp3
PNG Image	.png
GIF Image	.gif
JPEG Image	.jpg, .jpe, .jpeg
TIFF Image	.tif, .tiff
MPEG Video	.mpg, .mpeg, .mpe
MSWORD	.doc, .docx
DICOM	.dcm

Currently, the maximum file size supported by e-RS is 5MB.

Use case

As an authenticated user

I need to upload a referral letter or other clinical information file to e-RS

So that I can associate the file with an existing referral.

Important notes:

This endpoint only performs the file upload. The uploaded file is not associated with a referral until the file has been associated with a referral, for example using A012 - Maintain referral letter.

The resulting URL within e-RS for the uploaded file is returned in the 'Location' header of the response.

Related endpoints

You can associate the uploaded file with a specific referral using A012 - Maintain referral letter.

Request
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

NHSD-eRS-On-Behalf-Of-User-ID	

String

The (SDS) user ID of the user that the authenticating user wishes to act on behalf of (OBO).

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Where an OBO User ID is supplied the authenticating user must be an SPCA and the OBO User ID must be that of an appropriate SPC.

Example: 021600556514


X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


nhsd-ers-file-name	

String

The name of file being uploaded, including the extension

Example: test.txt

Required

nhsd-ers-referral-id	

String

The ID (typically the UBRN) of the referral which the documents are intended for

Example: 000000070000

Required
Body
Required

Content type: text/plain

Example

Copy
This is some example text.
Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: text/html

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: application/pdf

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: text/xml

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: text/rtf

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: audio/basic

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: audio/mpeg

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: image/png

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: image/gif

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: image/jpeg

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: image/tiff

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: video/mpeg

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: application/msword

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: application/vnd.openxmlformats-officedocument.wordprocessingml.document

Schema
Collapse all Expand all
Name	Description

string binary
	

Content type: application/dicom

Schema
Collapse all Expand all
Name	Description

string binary
	
Response
HTTP status: 201

201 (Created) - success response with no body

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


Location	

String

The e-RS file location of the just uploaded file

Example: Binary/att-70000-70000

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 415

Unsupported Media Type

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
CONFLICTING_VALUES	Two or more supplied values are contradictory.
FILE_SIZE_ERROR	The file is either empty or too large.
INAPPROPRIATE_VALUE	A value, which is acceptable under different conditions, is inappropriate in the context of the other information provided.
INVALID_VALUE	The input provided does not conform to the expected data types and format.
MISSING_VALUE	A field defined as mandatory for an endpoint has not been provided.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A021 - Create referral and send for triage
POST /STU3/ReferralRequest/$ers.createReferralAndSendForTriage
Try this API
Overview

Use this endpoint to refer the patient directly to a triage service.

Please note: this endpoint cannot be used to shortlist bookable services. In order to shortlist bookable services please use A011 - Create referral.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN

You need to have identified a patient, for example via Personal Demographic Service (PDS).

You need to have found services that meet the referral needs of a patient using A010 - Patient service search.

Use case

As an authenticated user

I need to send the patient's referral to a triage service for assessment

So that I can put the patient on the appropriate clinical pathway for the chosen service provider.

Related endpoints

For the referral to be processed by the service provider, you must ensure appropriate referral letter information has been added to the referral. You can add/manage referrer letter information by using A012 - Maintain referral letter.

You can check to see what referral letter information has already been added to a referral by using A005 - Retrieve referral request, A007 - Retrieve clinical information, and A006 - Retrieve attachment endpoints where necessary.

You can generate a letter for the patient by using A019 - Generate patient letter. The letter summarises the current state of the referral and any steps the patient may need to follow.

Request
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Body
Required

Content type: application/fhir+json

Examples

Referring Clinician creates referral to a Triage service

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-CreateReferralAndSendForTriage-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "patient",
    "valueIdentifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  }, {
    "name" : "intentionToAddReferralLetter",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralLetterIntention-1",
      "code" : "NEED_TO_ADD_LATER"
    }
  }, {
    "name" : "firstReminderLetterFollowUpDays",
    "valueUnsignedInt" : 0
  }, {
    "name" : "shortlist",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
      },
      "resourceType" : "List",
      "status" : "current",
      "mode" : "snapshot",
      "contained" : [ {
        "resourceType" : "Parameters",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
        },
        "id" : "ServiceSearchCriteria-1",
        "parameter" : [ {
          "name" : "priority",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          }
        }, {
          "name" : "specialty",
          "valueCoding" : {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          }
        }, {
          "name" : "clinicType",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
            "code" : "HEART_FAILURE"
          }
        }, {
          "name" : "commissioningProvisioning",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
            "code" : "ALL_AVAILABLE_FOR_BOOKING"
          }
        }, {
          "name" : "ageAndGenderAppropriate",
          "valueBoolean" : false
        } ]
      } ],
      "entry" : [ {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "11004"
          }
        }
      } ],
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
        "valueReference" : {
          "reference" : "#ServiceSearchCriteria-1"
        }
      } ]
    }
  } ]
}

Referring Clinician Admin minimum call

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-CreateReferralAndSendForTriage-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "patient",
    "valueIdentifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  }, {
    "name" : "referringClinician",
    "valueIdentifier" : {
      "system" : "http://fhir.nhs.net/Id/sds-user-id",
      "value" : "021600556514"
    }
  }, {
    "name" : "intentionToAddReferralLetter",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralLetterIntention-1",
      "code" : "NEED_TO_ADD_LATER"
    }
  }, {
    "name" : "firstReminderLetterFollowUpDays",
    "valueUnsignedInt" : 0
  }, {
    "name" : "shortlist",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
      },
      "resourceType" : "List",
      "status" : "current",
      "mode" : "snapshot",
      "contained" : [ {
        "resourceType" : "Parameters",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
        },
        "id" : "ServiceSearchCriteria-1",
        "parameter" : [ {
          "name" : "priority",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          }
        }, {
          "name" : "commissioningProvisioning",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
            "code" : "ALL_AVAILABLE_FOR_BOOKING"
          }
        }, {
          "name" : "namedClinician",
          "valueIdentifier" : {
            "system" : "http://fhir.nhs.net/Id/sds-user-id",
            "value" : "021600556514"
          }
        }, {
          "name" : "clinicalTerm",
          "valueCoding" : {
            "system" : "http://snomed.info/sct",
            "code" : "1003"
          }
        }, {
          "name" : "ageAndGenderAppropriate",
          "valueBoolean" : true
        } ]
      } ],
      "entry" : [ {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "11004"
          }
        }
      } ],
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
        "valueReference" : {
          "reference" : "#ServiceSearchCriteria-1"
        }
      } ]
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-CreateReferralAndSendForTriage-Parameters


resourceType
string
required
	
Allowed values: Parameters


meta
object
required
	

parameter
array
required
	
Field	Cardinality	Notes
Patient	1..1	
ReferringClinician	0..1	
Shortlist	1..1	
IntentionToAddReferralLetter	1..1	
FirstReminderLetterFollowUpDays	1..1	
Response
HTTP status: 201

A referral created within e-RS.

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


ETag	

String

Record version identifier enclosed in quotes and preceded by 'W/'. For example, W/"2".

This Weak ETag corresponds to meta.versionId attribute in the resource body.

Pattern: /^W\/"[0-9]+"$/

Example: W/"2"

Body

Content type: application/fhir+json

Examples

Basic example

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "3",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : false
    }, {
      "name" : "commissioningProvisioning",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
        "code" : "ALL_AVAILABLE_FOR_BOOKING"
      }
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11004"
        },
        "display" : "Cardiology Triage Business Service"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "1",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "proposed",
    "description" : "e-Referral Appointment",
    "created" : "2021-05-06T11:21:45.652000+00:00",
    "reason" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewReason-1",
        "code" : "TRIAGE"
      } ]
    } ],
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070000/_history/3"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11004"
        },
        "display" : "Cardiology Triage Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9912003888"
        }
      },
      "status" : "accepted"
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ ],
  "intent" : "plan"
}

Example with named clinician in search criteria

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "3",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "clinicalTerm",
      "valueCoding" : {
        "system" : "http://snomed.info/sct",
        "code" : "1003"
      }
    }, {
      "name" : "namedClinician",
      "valueIdentifier" : {
        "system" : "http://fhir.nhs.net/Id/sds-user-id",
        "value" : "021600556514"
      }
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    }, {
      "name" : "commissioningProvisioning",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
        "code" : "ALL_AVAILABLE_FOR_BOOKING"
      }
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11004"
        },
        "display" : "Cardiology Triage Business Service"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "1",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "proposed",
    "description" : "e-Referral Appointment",
    "created" : "2021-05-06T11:11:25.890000+00:00",
    "reason" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewReason-1",
        "code" : "TRIAGE"
      } ]
    } ],
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070000/_history/3"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11004"
        },
        "display" : "Cardiology Triage Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9912003888"
        }
      },
      "status" : "accepted"
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ ],
  "intent" : "plan"
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-ReferralRequest


id
string
required
	
Example: 000000070000


meta
object
required
	

resourceType
string
required
	
Allowed values: ReferralRequest


contained
array
nullable
required
	
Field	Cardinality	Notes
eRS-Shortlist-List	1..1	
eRS-ServiceSearchCriteria-Parameters	1..1	
eRS-Appointment	0..1	
DocumentReference	0..*	


extension
array
nullable
required
	
Field	Cardinality	Notes
Extension-eRS-ReferralShortlist	1..1	
Extension-eRS-Commissioning-Rule-Org	1..1	
Extension-eRS-ReferralPriority	1..1	
Extension-eRS-Appointment	0..1	
Extension-eRS-ClinicalInfoFirstSubmitted	0..1	
Extension-eRS-ClinicalInfoLastUpdated	0..1	


status
string
required
	
Allowed values: active, completed


subject
object
required
	

supportingInfo
array
nullable
required
	

intent
string
required
	
Allowed values: plan
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 415

Unsupported Media Type

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
REFERENCE_NOT_FOUND	A supplied reference could not be resolved to valid resource (e.g. a patient, clinician or an organisation).
INAPPROPRIATE_VALUE	A value, which is acceptable under different conditions, is inappropriate in the context of the other information provided.
TOO_MANY_ITEMS	In a list where a maximum number of items is specified (e.g. a Shortlist), too many entries are supplied.
MISSING_VALUE	A field defined as mandatory for an endpoint has not been provided.
VALUE_IS_REQUIRED	A business rule defines a value as mandatory but it has not been provided.
FIELD_NOT_PERMITTED	A business rule defines a field as not permitted but it has been provided.
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
INVALID_VALUE	The input provided does not conform to the expected data types and format.
INVALID_CODE	The input provided for a field is not one of the defined legal values.
UNEXPECTED_FIELD	A field is provided that is not expected as part of the request. E.g. a field is mis-spelt, was defined on a previous version of the endpoint but has subsequently been removed.
INVALID_FHIR_STRUCTURE	The FHIR data structure in the message body does not match the expected structure (e.g. an array is present for a value when no array is expected).
REFERENCED_USER_IS_NOT_SPC	The user provided does not have the Service Provider Clinician authorisation in the e-RS.
ORGANISATION_IS_CLOSED	The organisation supplied corresponds to an organisation that is closed.
ORGANISATION_NOT_APPROPRIATE	The organisation supplied corresponds to an organisation that is not valid for the given request.
DUPLICATE_SERVICE	Unique service value expected.
SHORTLISTED_SERVICE_NOT_IN_RESULTS	The service selected for the shortlist submitted does not satisfy the search criteria provided.
REFERENCED_USER_IS_NOT_ACTIVE	The user identified is not active.
REFERENCED_USER_NOT_IN_ORG	The referenced user does not belong to organisation specified.
NO_REG_GP_PRACTICE	The patient provided was found not to have a registered GP practice in the e-RS.
REFERENCED_USER_IS_NOT_RC	The user provided does not have the Referring Clinician authorisation in the e-RS.
REFERENCED_USER_IS_NOT_RC_AT_ORG	The user provided does not have the Referring Clinician authorisation at the organisation specified.
SNOMED_NOT_FOUND	A SNOMED code, while potentially valid in the latest version of the international dictionary, is not found in the e-RS dictionary.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A022 - Cancel appointment, action later
POST /STU3/ReferralRequest/{ubrn}/$ers.cancelAppointmentActionLater
Try this API
Overview

Use this endpoint, as a service provider, to task your admin team to rebook/redirect a referral that is booked into your bookable service and awaiting review.

Note: this will also cancel the current appointment.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

SERVICE_PROVIDER_CLINICIAN
SERVICE_PROVIDER_CLINICIAN_ADMIN

You need to use A008 - Retrieve referral worklist to retrieve the contents of the 'Referrals For Review' worklist. A022 - Cancel appointment, action later can only be used for referrals booked into bookable services, and not the referrals sent into triage services.

You need to use A005 - Retrieve referral request to retrieve the details for the referral.

You need to use A006 - Retrieve attachment to retrieve the clinical attachments for the referral.

You need to use A007 - Retrieve clinical information to retrieve the clinical information summary PDF for the referral.

If you want to include attachments with the admin task, you need to use A020 - Upload file to document store so they are ready to be associated when this endpoint is called.

Use cases

As an authenticated user

I need to task my admin team to rebook/redirect a referral I have reviewed (whilst also cancelling the current appointment)

So that I can progress the patient's care along the most appropriate referral pathway.

Important notes
The priority of the referral can be changed as part of this endpoint.
A comment must be added to explain to the administrator what is required and can include optional attachments.
The current appointment is cancelled as part of this endpoint . If the current appointment is booked to an indirectly bookable service, you must indicate whether the appointment has been cancelled on the local provider system. If indicated as not cancelled, the referral will be added to the 'Indirectly Booked Appointments to Cancel in PAS' worklist to task the admin team to do so.
When this endpoint is successfully used, an entry will be added to the service providers 'Appointments For Booking' worklist for the admin team to action the task. The provider admin team will only be able to progress the referral via the e-RS Professional Application user interface (e.g. shortlisting appropriate services for the patient).
Request
Path parameters
Name	Description
ubrn	

String

The unique booking reference number of the referral request

Example: 000000070000

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

NHSD-eRS-On-Behalf-Of-User-ID	

String

The (SDS) user ID of the user that the authenticating user wishes to act on behalf of (OBO).

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Where an OBO User ID is supplied the authenticating user must be an SPCA and the OBO User ID must be that of an appropriate SPC.

Example: 021600556514


X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


If-Match	

String

The version of the resource to be updated

Pattern: /^W\/"[0-9]+"$/

Example: W/"4"

Required
Body
Required

Content type: application/fhir+json

Examples

Basic example for DBS

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-cancelAppointmentActionLater-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "comments",
    "valueString" : "Please contact patient to rebook"
  } ]
}

Example for priority change and attachments

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-cancelAppointmentActionLater-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "comments",
    "valueString" : "Please contact patient to rebook"
  }, {
    "name" : "priority",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
      "code" : "URGENT"
    }
  }, {
    "name" : "providerAttachmentFile",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
      },
      "resourceType" : "DocumentReference",
      "type" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
          "code" : "PROVIDER"
        } ]
      },
      "status" : "current",
      "indexed" : "2021-11-03T14:29:41.988000+00:00",
      "description" : "My first provider attachment",
      "content" : [ {
        "attachment" : {
          "url" : "Binary/att-70000-70001"
        }
      } ]
    }
  }, {
    "name" : "providerAttachmentFile",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
      },
      "resourceType" : "DocumentReference",
      "type" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
          "code" : "PROVIDER"
        } ]
      },
      "status" : "current",
      "indexed" : "2021-11-03T14:29:41.988000+00:00",
      "description" : "My second provider attachment",
      "content" : [ {
        "attachment" : {
          "url" : "Binary/att-70000-70002"
        }
      } ]
    }
  } ]
}

Basic example for IBS

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-cancelAppointmentActionLater-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "comments",
    "valueString" : "Please contact patient to rebook"
  }, {
    "name" : "appointmentCancelledInPAS",
    "valueBoolean" : true
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-cancelAppointmentActionLater-Parameters


resourceType
string
required
	
Allowed values: Parameters


meta
object
required
	

parameter
array
required
	
Field	Cardinality	Notes
priority	0..1	Optionaly updates the priority
appointmentCancelledinPAS	0..1	This flag is mandatory for indirectly bookable services
comments	1..1	
providerAttachmentFile	0..*	
Response
HTTP status: 200

e-RS Referral Request

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


ETag	

String

Record version identifier enclosed in quotes and preceded by 'W/'. For example, W/"2".

This Weak ETag corresponds to meta.versionId attribute in the resource body.

Pattern: /^W\/"[0-9]+"$/

Example: W/"2"

Body

Content type: application/fhir+json

Examples

Example response for DBS

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "11",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-11-03T12:54:40.560000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11000"
        },
        "display" : "Forthright Cardiology Business Service"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "1",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "proposed",
    "reason" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewOutcome-1",
        "code" : "CANCEL_APPOINTMENT_ACTION_LATER",
        "display" : "Cancel Appointment Action Later"
      } ]
    } ],
    "description" : "e-Referral Appointment",
    "created" : "2021-11-03T12:54:45.334000+00:00",
    "comment" : "Please contact patient to rebook",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070000/_history/11"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9912003888"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-70000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-11-03T12:54:46.942000+00:00",
    "description" : "upload png",
    "content" : [ {
      "attachment" : {
        "id" : "70000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "103264992985"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70000-70000",
        "size" : 6,
        "title" : "upload.png",
        "creation" : "2021-11-03"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-70000"
  } ],
  "intent" : "plan"
}

Example response for priority change and attachments

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "11",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-11-03T14:29:18.239000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "URGENT",
        "display" : "Urgent"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "URGENT"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11000"
        },
        "display" : "Forthright Cardiology Business Service"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "1",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "proposed",
    "reason" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewOutcome-1",
        "code" : "CANCEL_APPOINTMENT_ACTION_LATER",
        "display" : "Cancel Appointment Action Later"
      } ]
    } ],
    "description" : "e-Referral Appointment",
    "created" : "2021-11-03T14:29:43.699000+00:00",
    "comment" : "Please contact patient to rebook",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070000/_history/11"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9912003888"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-70000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-11-03T14:29:45.435000+00:00",
    "description" : "upload png",
    "content" : [ {
      "attachment" : {
        "id" : "70000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "103264992985"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70000-70000",
        "size" : 6,
        "title" : "upload.png",
        "creation" : "2021-11-03"
      }
    } ]
  }, {
    "id" : "DocumentReference-70001",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "PROVIDER",
        "display" : "Provider"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-11-03T14:29:45.435000+00:00",
    "description" : "My first provider attachment",
    "content" : [ {
      "attachment" : {
        "id" : "70001",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70000-70001",
        "size" : 17,
        "title" : "test1.pdf",
        "creation" : "2021-11-03"
      }
    } ]
  }, {
    "id" : "DocumentReference-70002",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "PROVIDER",
        "display" : "Provider"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-11-03T14:29:45.435000+00:00",
    "description" : "My second provider attachment",
    "content" : [ {
      "attachment" : {
        "id" : "70002",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70000-70002",
        "size" : 20,
        "title" : "test2.pdf",
        "creation" : "2021-11-03"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-70002"
  }, {
    "reference" : "#DocumentReference-70001"
  }, {
    "reference" : "#DocumentReference-70000"
  } ],
  "intent" : "plan"
}

Example response for IBS

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "11",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-11-03T14:39:17.946000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11016"
        },
        "display" : "Triage-Related Indirect Business Service"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "1",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "proposed",
    "reason" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewOutcome-1",
        "code" : "CANCEL_APPOINTMENT_ACTION_LATER",
        "display" : "Cancel Appointment Action Later"
      } ]
    } ],
    "description" : "e-Referral Appointment",
    "created" : "2021-11-03T14:39:43.005000+00:00",
    "comment" : "Please contact patient to rebook",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070000/_history/11"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11016"
        },
        "display" : "Triage-Related Indirect Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9912003888"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-70000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-11-03T14:39:43.306000+00:00",
    "description" : "upload png",
    "content" : [ {
      "attachment" : {
        "id" : "70000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70000-70000",
        "size" : 6,
        "title" : "upload.png",
        "creation" : "2021-11-03"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-70000"
  } ],
  "intent" : "plan"
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-ReferralRequest


id
string
required
	
Example: 000000070000


meta
object
required
	

resourceType
string
required
	
Allowed values: ReferralRequest


contained
array
nullable
required
	
Field	Cardinality	Notes
eRS-Shortlist-List	1..1	
eRS-ServiceSearchCriteria-Parameters	1..1	
eRS-Appointment	0..1	
DocumentReference	0..*	


extension
array
nullable
required
	
Field	Cardinality	Notes
Extension-eRS-ReferralShortlist	1..1	
Extension-eRS-Commissioning-Rule-Org	1..1	
Extension-eRS-ReferralPriority	1..1	
Extension-eRS-Appointment	0..1	
Extension-eRS-ClinicalInfoFirstSubmitted	0..1	
Extension-eRS-ClinicalInfoLastUpdated	0..1	


status
string
required
	
Allowed values: active, completed


subject
object
required
	

supportingInfo
array
nullable
required
	

intent
string
required
	
Allowed values: plan
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 409

Conflict - Version supplied as part of the request does not match current version of the referral request

HTTP status: 412

Precondition Failed - Mandatory data is missing

HTTP status: 415

Unsupported Media Type

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
INAPPROPRIATE_VALUE	A value, which is acceptable under different conditions, is inappropriate in the context of the other information provided.
MISSING_VALUE	A field defined as mandatory for an endpoint has not been provided.
INVALID_VALUE	The input provided does not conform to the expected data types and format.
INVALID_CODE	The input provided for a field is not one of the defined legal values.
VALUE_IS_REQUIRED	A business rule defines a value as mandatory but it has not been provided.
FIELD_NOT_PERMITTED	A business rule defines a field as not permitted but it has been provided.
INVALID_REQUEST_STATE	The Request, while otherwise valid, is not in the correct state for the specific action being performed.
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
REFERENCE_NOT_FOUND	A supplied reference could not be resolved to valid resource (e.g. a patient, clinician or an organisation).
INVALID_STATE	Indicates that the referenced item is not in the correct state for the request to be processed.
DUPLICATE_FILENAME	A file being attached, matches another file being attached, or matches a file that is already linked.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 423

Locked - resource is locked

HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A023 - Retrieve advice and guidance requests worklist
POST /STU3/CommunicationRequest/$ers.fetchworklist
Try this API
Overview

Use this endpoint to retrieve available worklists of advice and guidance requests. Use A008 - Retrieve referral worklist to retrieve available worklists of referral requests.

Worklists provide lists of referral/advice requests that meet certain criteria, typically where a user needs to be aware of something important, or to undertake an action, in order to avoid delays to patient care.

Service provider organisations can retrieve the contents of their 'Advice and guidance requests' worklist using this endpoint. This worklist contains advice and guidance requests the provider has received and which need actioning.

There are currently no advice and guidance related worklists available for referring organisations.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

SERVICE_PROVIDER_CLINICIAN
SERVICE_PROVIDER_ADMIN
SERVICE_PROVIDER_CLINICIAN_ADMIN
Use case

As an authenticated user

I need to retrieve a worklist of advice and guidance requests

So I can determine which ones I need to take further action on.

Related endpoints

Having used this endpoint to retrieve the 'Advice and Guidance Requests' worklist, entries from it can be used as follows:

Use A024 - Retrieve advice and guidance request summary to retrieve contextual summary details of the advice and guidance request
Use A025 - Retrieve advice and guidance conversation to retrieve the conversation within the advice and guidance request, including references to attachments
Use A006 - Retrieve attachment to retrieve clinical attachments for an advice and guidance request
Use A026 - Send advice and guidance response to respond to the referrer supplying advice or requesting further information
Use A027 - Convert advice and guidance request to referral to convert the advice and guidance request into a referral. This is only possible if the referrer has authorised the provider to do so
Request
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

NHSD-eRS-On-Behalf-Of-User-ID	

String

The (SDS) user ID of the user that the authenticating user wishes to act on behalf of (OBO).

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Where an OBO User ID is supplied the authenticating user must be an SPCA and the OBO User ID must be that of an appropriate SPC.

Example: 021600556514


X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Body
Required

Content type: application/fhir+json

Example

Advice and guidance requests

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-FetchWorklist-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "listType",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommunicationListSelector-1",
        "code" : "ADVICE_AND_GUIDANCE_REQUESTS"
      } ]
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-FetchWorklist-Parameters


resourceType
string
required
	
Allowed values: Parameters


meta
object
required
	

parameter
array
required
	
Field	Cardinality	Notes
listType	1..1	
service	0..1	
specialtyAssignedIndicator	0..1	
specialty	0..1	
location	0..1	
clinicianAssignedIndicator	0..1	
clinician	0..1	
Response
HTTP status: 200

The response body contains the list of advice and guidance requests (if any) that match the search criteria provided

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Advice and guidance requests

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-FetchWorklist-List-1" ]
  },
  "resourceType" : "List",
  "status" : "current",
  "mode" : "snapshot",
  "entry" : [ {
    "extension" : [ {
      "extension" : [ {
        "url" : "priority",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          } ]
        }
      }, {
        "url" : "specialty",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          } ]
        }
      }, {
        "url" : "patient",
        "valueReference" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/nhs-number",
            "value" : "1000000001"
          }
        }
      }, {
        "url" : "category",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AdviceAndGuidanceStatus-1",
            "code" : "PROVIDER_RESPONSE_REQUIRED"
          } ]
        }
      }, {
        "url" : "adviceFirstRequested",
        "valueDateTime" : "2021-09-08T13:17:27.655000+00:00"
      }, {
        "url" : "adviceLastUpdated",
        "valueDateTime" : "2021-09-08T13:17:27.655000+00:00"
      }, {
        "url" : "referrer",
        "valueReference" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/sds-user-id",
            "value" : "021600556514"
          }
        }
      }, {
        "url" : "service",
        "valueReference" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "11014"
          },
          "display" : "Advice Only"
        }
      }, {
        "url" : "clinicType",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "_baseUrl_/STU3/CodeSystem/CLINIC-TYPE",
            "code" : "HEART_FAILURE"
          } ]
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AdviceAndGuidanceRequests-WorkListItem-1"
    } ],
    "item" : {
      "reference" : "CommunicationRequest/000000070000"
    }
  }, {
    "extension" : [ {
      "extension" : [ {
        "url" : "priority",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "TWO_WEEK_WAIT"
          } ]
        }
      }, {
        "url" : "specialty",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          } ]
        }
      }, {
        "url" : "patient",
        "valueReference" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/nhs-number",
            "value" : "9462979626"
          }
        }
      }, {
        "url" : "category",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AdviceAndGuidanceStatus-1",
            "code" : "REFERRER_TO_SUBMIT_FURTHER_INFORMATION"
          } ]
        }
      }, {
        "url" : "adviceFirstRequested",
        "valueDateTime" : "2021-09-08T13:17:29.248000+00:00"
      }, {
        "url" : "adviceLastUpdated",
        "valueDateTime" : "2021-09-08T13:17:29.860000+00:00"
      }, {
        "url" : "referrer",
        "valueReference" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/sds-user-id",
            "value" : "921600556514"
          }
        }
      }, {
        "url" : "service",
        "valueReference" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "11014"
          },
          "display" : "Advice Only"
        }
      }, {
        "url" : "clinicType",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "_baseUrl_/STU3/CodeSystem/CLINIC-TYPE",
            "code" : "HEART_FAILURE"
          } ]
        }
      } ],
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AdviceAndGuidanceRequests-WorkListItem-1"
    } ],
    "item" : {
      "reference" : "CommunicationRequest/000000070002"
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-FetchWorklist-List

A list of referrals representing the available worklist items



meta
object
required
	

contained
array
	
Field	Cardinality	Notes
Practitioner	0..*	This resource is only contained when fetching the Referrals for Review worklist
Patient	0..*	This resource is only contained when fetching the Referrals for Review worklist


resourceType
string
required
	
Allowed values: List


status
string
required
	
Allowed values: current


mode
string
required
	
Allowed values: snapshot


entry
array
	
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 415

Unsupported Media Type

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
REFERENCE_NOT_FOUND	A supplied reference could not be resolved to valid resource (e.g. a patient, clinician or an organisation).
MISSING_VALUE	A field defined as mandatory for an endpoint has not been provided.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request or service.
INVALID_VALUE	The input provided does not conform to the expected data types and format.
INVALID_CODE	The input provided for a field is not one of the defined legal values.
UNEXPECTED_FIELD	A field is provided that is not expected as part of the request. E.g. a field is mis-spelt, was defined on a previous version of the endpoint but has subsequently been removed.
INVALID_FHIR_STRUCTURE	The FHIR data structure in the message body does not match the expected structure (e.g. an array is present for a value when no array is expected).
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A024 - Retrieve advice and guidance request summary
GET /STU3/CommunicationRequest/{ubrn}
Try this API
Overview

Use this endpoint to retrieve the summary of an advice and guidance request. This endpoint provides important contextual information about the advice and guidance request (e.g. the service/specialty to which advice has been requested, etc)

This does not include the actual advice and guidance conversation between the referrer and the service provider. The conversation can be retrieved via A025 - Retrieve advice and guidance conversation.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN
SERVICE_PROVIDER_CLINICIAN
SERVICE_PROVIDER_CLINICIAN_ADMIN

You need to use the Unique Booking Reference Number (UBRN) of the advice and guidance request. For service provider users, you may have identified the UBRN via A023 - Retrieve advice and guidance requests worklist.

Use case

As an authenticated user

I need to retrieve the summary of an advice and guidance request

So I can understand all of the relevant context for the request.

Important note

The summary includes an indicator of whether the referrer has authorised the providing organisation to convert the advice and guidance request into an appointment request. If authorised, A027 - Convert advice and guidance request to referral can be used to convert the advice and guidance request into an appointment request.

Related endpoints

After using this endpoint, use A025 - Retrieve advice and guidance conversation to retrieve the Advice and Guidance conversation itself.

Sandbox test scenarios

You can test the following scenarios in our sandbox environment

Scenario	Request
Simple summary CommunicationRequest	ubrn=000000070000
Attachment file reference present	ubrn=000000070001
Request
Path parameters
Name	Description
ubrn	

String

The unique booking reference number of the referral request

Example: 000000070000

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

NHSD-eRS-On-Behalf-Of-User-ID	

String

The (SDS) user ID of the user that the authenticating user wishes to act on behalf of (OBO).

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Where an OBO User ID is supplied the authenticating user must be an SPCA and the OBO User ID must be that of an appropriate SPC.

Example: 021600556514


X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Response
HTTP status: 200

e-RS Communication Request (advice and guidance summary)

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


ETag	

String

Record version identifier enclosed in quotes and preceded by 'W/'. For example, W/"2".

This Weak ETag corresponds to meta.versionId attribute in the resource body.

Pattern: /^W\/"[0-9]+"$/

Example: W/"2"

Body

Content type: application/fhir+json

Examples

Minimal `CommunicationRequest` example

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-CommunicationRequest-1" ]
  },
  "resourceType" : "CommunicationRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ProviderConversionAuthorisation-1",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ProviderConversionAuthorisation-1",
      "code" : "AUTHORISED_TO_CONVERT",
      "display" : "Referrer has allowed the Service Provider to convert the Advice and Guidance to a Referral"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Specialty-1",
    "valueCoding" : {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    }, {
      "name" : "commissioningProvisioning",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
        "code" : "ALL_AVAILABLE_FOR_BOOKING"
      }
    } ]
  }, {
    "id" : "PractitionerRole.921600556514.R68.REFERRING-CLINICIAN",
    "meta" : {
      "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
    },
    "resourceType" : "PractitionerRole",
    "practitioner" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/sds-user-id",
        "value" : "921600556514"
      }
    },
    "organization" : {
      "identifier" : {
        "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
        "value" : "R68"
      }
    },
    "code" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN"
      } ]
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11014"
        },
        "display" : "Cardiology Advice Service"
      }
    } ]
  } ],
  "status" : "active",
  "category" : [ {
    "coding" : [ {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AdviceAndGuidanceStatus-1",
      "code" : "PROVIDER_RESPONSE_REQUIRED"
    } ]
  } ],
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "recipient" : [ {
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-HealthcareService-Reference-1",
      "valueReference" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11014"
        }
      }
    } ]
  } ],
  "sender" : {
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
      "valueReference" : {
        "reference" : "#PractitionerRole.921600556514.R68.REFERRING-CLINICIAN"
      }
    } ]
  },
  "requester" : {
    "agent" : {
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
        "valueReference" : {
          "reference" : "#PractitionerRole.921600556514.R68.REFERRING-CLINICIAN"
        }
      } ]
    }
  }
}

`ComminucationRequest` with attachment file reference

Copy
{
  "id" : "000000070001",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-CommunicationRequest-1" ]
  },
  "resourceType" : "CommunicationRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ProviderConversionAuthorisation-1",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ProviderConversionAuthorisation-1",
      "code" : "AUTHORISED_TO_CONVERT",
      "display" : "Referrer has allowed the Service Provider to convert the Advice and Guidance to a Referral"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Specialty-1",
    "valueCoding" : {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    }, {
      "name" : "commissioningProvisioning",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
        "code" : "ALL_AVAILABLE_FOR_BOOKING"
      }
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11014"
        },
        "display" : "Cardiology Advice Service"
      }
    } ]
  }, {
    "id" : "PractitionerRole.103264992985.R69.REFERRING-CLINICIAN",
    "meta" : {
      "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
    },
    "resourceType" : "PractitionerRole",
    "practitioner" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/sds-user-id",
        "value" : "103264992985"
      }
    },
    "organization" : {
      "identifier" : {
        "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
        "value" : "R69"
      }
    },
    "code" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN"
      } ]
    } ]
  }, {
    "id" : "DocumentReference-70002",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-09-17T12:20:00.742000+00:00",
    "description" : "upload.png",
    "content" : [ {
      "attachment" : {
        "id" : "70002",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "103264992985"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70001-70002",
        "size" : 18592,
        "title" : "upload.png",
        "creation" : "2021-09-17"
      }
    } ]
  } ],
  "status" : "active",
  "category" : [ {
    "coding" : [ {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AdviceAndGuidanceStatus-1",
      "code" : "PROVIDER_RESPONSE_REQUIRED"
    } ]
  } ],
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "recipient" : [ {
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-HealthcareService-Reference-1",
      "valueReference" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11014"
        }
      }
    } ]
  } ],
  "sender" : {
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
      "valueReference" : {
        "reference" : "#PractitionerRole.103264992985.R69.REFERRING-CLINICIAN"
      }
    } ]
  },
  "requester" : {
    "agent" : {
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
        "valueReference" : {
          "reference" : "#PractitionerRole.103264992985.R69.REFERRING-CLINICIAN"
        }
      } ]
    }
  },
  "payload" : [ {
    "contentReference" : {
      "reference" : "#DocumentReference-70002"
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-CommunicationRequest


id
string
required
	
Example: 000000070000


meta
object
required
	

resourceType
string
required
	
Allowed values: CommunicationRequest


contained
array
nullable
required
	
Field	Cardinality	Notes
eRS-Shortlist-List	1..1	
eRS-ServiceSearchCriteria-Parameters	1..1	
DocumentReference	0..*	
CareConnect-PractitionerRole	1..2	


extension
array
nullable
required
	
Field	Cardinality	Notes
Extension-eRS-ReferralShortlist	1..1	
Extension-eRS-ReferralPriority	1..1	
Extension-eRS-ProviderConversionAuthorisation	1..1	
Extension-eRS-Specialty	1..1	


status
string
required
	
Allowed values: active, cancelled, completed


category
array
nullable
required
	

subject
object
required
	

recipient
array
required
	

sender
object
required
	

requester
object
required
	

payload
array
	
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
INVALID_REQUEST_TYPE	The UBRN provided exists in e-RS but does not correspond to an Advice and Guidance request.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A024 - Retrieve advice and guidance request summary (versioned)
GET /STU3/CommunicationRequest/{ubrn}/_history/{version}
Try this API
Overview

Use this endpoint to retrieve a specific version of CommunicationRequest.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

The pre-requisites for this endpoint are the same as for endpoint A024 - Retrieve advice and guidance request summary.

Note: e-RS only supports the retrieval of the most recent version of CommunicationRequest. You cannot retrieve earlier versions.

Use case

See A005 - Retrieve referral request.

Related endpoints

See A024 - Retrieve advice and guidance request summary.

Sandbox test scenarios

You can test the following scenarios in our sandbox environment

Scenario	Request
Simple summary CommunicationRequest	ubrn=000000070000, version=5
Attachment file reference present	ubrn=000000070001, version=5
Request
Path parameters
Name	Description
ubrn	

String

The unique booking reference number of the referral request

Example: 000000070000

Required

version	

String

The version of the resource to be retrieved. It must be the latest version of the resource otherwise HISTORY_NOT_SUPPORTED error will be returned (HTTP 404 Not Found).

Example: "5"

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Response
HTTP status: 200

e-RS Communication Request (advice and guidance summary)

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


ETag	

String

Record version identifier enclosed in quotes and preceded by 'W/'. For example, W/"2".

This Weak ETag corresponds to meta.versionId attribute in the resource body.

Pattern: /^W\/"[0-9]+"$/

Example: W/"2"

Body

Content type: application/fhir+json

Examples

Minimal `CommunicationRequest` example

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-CommunicationRequest-1" ]
  },
  "resourceType" : "CommunicationRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ProviderConversionAuthorisation-1",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ProviderConversionAuthorisation-1",
      "code" : "AUTHORISED_TO_CONVERT",
      "display" : "Referrer has allowed the Service Provider to convert the Advice and Guidance to a Referral"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Specialty-1",
    "valueCoding" : {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    }, {
      "name" : "commissioningProvisioning",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
        "code" : "ALL_AVAILABLE_FOR_BOOKING"
      }
    } ]
  }, {
    "id" : "PractitionerRole.921600556514.R68.REFERRING-CLINICIAN",
    "meta" : {
      "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
    },
    "resourceType" : "PractitionerRole",
    "practitioner" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/sds-user-id",
        "value" : "921600556514"
      }
    },
    "organization" : {
      "identifier" : {
        "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
        "value" : "R68"
      }
    },
    "code" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN"
      } ]
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11014"
        },
        "display" : "Cardiology Advice Service"
      }
    } ]
  } ],
  "status" : "active",
  "category" : [ {
    "coding" : [ {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AdviceAndGuidanceStatus-1",
      "code" : "PROVIDER_RESPONSE_REQUIRED"
    } ]
  } ],
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "recipient" : [ {
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-HealthcareService-Reference-1",
      "valueReference" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11014"
        }
      }
    } ]
  } ],
  "sender" : {
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
      "valueReference" : {
        "reference" : "#PractitionerRole.921600556514.R68.REFERRING-CLINICIAN"
      }
    } ]
  },
  "requester" : {
    "agent" : {
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
        "valueReference" : {
          "reference" : "#PractitionerRole.921600556514.R68.REFERRING-CLINICIAN"
        }
      } ]
    }
  }
}

`ComminucationRequest` with attachment file reference

Copy
{
  "id" : "000000070001",
  "meta" : {
    "versionId" : "5",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-CommunicationRequest-1" ]
  },
  "resourceType" : "CommunicationRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ProviderConversionAuthorisation-1",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ProviderConversionAuthorisation-1",
      "code" : "AUTHORISED_TO_CONVERT",
      "display" : "Referrer has allowed the Service Provider to convert the Advice and Guidance to a Referral"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Specialty-1",
    "valueCoding" : {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    }, {
      "name" : "commissioningProvisioning",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
        "code" : "ALL_AVAILABLE_FOR_BOOKING"
      }
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11014"
        },
        "display" : "Cardiology Advice Service"
      }
    } ]
  }, {
    "id" : "PractitionerRole.103264992985.R69.REFERRING-CLINICIAN",
    "meta" : {
      "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
    },
    "resourceType" : "PractitionerRole",
    "practitioner" : {
      "identifier" : {
        "system" : "http://fhir.nhs.net/Id/sds-user-id",
        "value" : "103264992985"
      }
    },
    "organization" : {
      "identifier" : {
        "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
        "value" : "R69"
      }
    },
    "code" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
        "code" : "REFERRING_CLINICIAN"
      } ]
    } ]
  }, {
    "id" : "DocumentReference-70002",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-09-17T12:20:00.742000+00:00",
    "description" : "upload.png",
    "content" : [ {
      "attachment" : {
        "id" : "70002",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "103264992985"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70001-70002",
        "size" : 18592,
        "title" : "upload.png",
        "creation" : "2021-09-17"
      }
    } ]
  } ],
  "status" : "active",
  "category" : [ {
    "coding" : [ {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AdviceAndGuidanceStatus-1",
      "code" : "PROVIDER_RESPONSE_REQUIRED"
    } ]
  } ],
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "recipient" : [ {
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-HealthcareService-Reference-1",
      "valueReference" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11014"
        }
      }
    } ]
  } ],
  "sender" : {
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
      "valueReference" : {
        "reference" : "#PractitionerRole.103264992985.R69.REFERRING-CLINICIAN"
      }
    } ]
  },
  "requester" : {
    "agent" : {
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
        "valueReference" : {
          "reference" : "#PractitionerRole.103264992985.R69.REFERRING-CLINICIAN"
        }
      } ]
    }
  },
  "payload" : [ {
    "contentReference" : {
      "reference" : "#DocumentReference-70002"
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-CommunicationRequest


id
string
required
	
Example: 000000070000


meta
object
required
	

resourceType
string
required
	
Allowed values: CommunicationRequest


contained
array
nullable
required
	
Field	Cardinality	Notes
eRS-Shortlist-List	1..1	
eRS-ServiceSearchCriteria-Parameters	1..1	
DocumentReference	0..*	
CareConnect-PractitionerRole	1..2	


extension
array
nullable
required
	
Field	Cardinality	Notes
Extension-eRS-ReferralShortlist	1..1	
Extension-eRS-ReferralPriority	1..1	
Extension-eRS-ProviderConversionAuthorisation	1..1	
Extension-eRS-Specialty	1..1	


status
string
required
	
Allowed values: active, cancelled, completed


category
array
nullable
required
	

subject
object
required
	

recipient
array
required
	

sender
object
required
	

requester
object
required
	

payload
array
	
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found - Resource not found for ID provided or Resource version does not match version requested.

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
INVALID_REQUEST_TYPE	The UBRN provided exists in e-RS but does not correspond to an Advice and Guidance request.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A025 - Retrieve advice and guidance conversation
GET /STU3/Communication
Try this API
Overview

Use this endpoint to retrieve the advice and guidance conversation between the referring organisation and service providing organisation.

A 'conversation' takes the form of the messages between a referrer (seeking advice) and a provider or specialist. Messages can include attachments.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN
SERVICE_PROVIDER_CLINICIAN
SERVICE_PROVIDER_CLINICIAN_ADMIN

You need to use the Unique Booking Reference Number (UBRN) of the advice and guidance request. For service provider users, you may have identified the UBRN via A023 - Retrieve advice and guidance requests worklist.

You need to use A024 - Retrieve advice and guidance request summary to retrieve the summary of an advice and guidance request. This will importantly include the latest version of the request which must be used.

Use case

As an authenticated user

I need to retrieve the conversation that is present on an advice and guidance request

So that I can review the conversation and potentially contribute further to it.

Important note

The conversation returned includes links to any attachments associated with the conversation.

Related endpoints

After using this endpoint:

Use A006 - Retrieve attachment to retrieve any attachments associated with the advice and guidance request.
(For service provider users) Use A026 - Send advice and guidance response to respond to the referrer supplying advice or requesting further information.
(For service provider users) Use A027 - Convert advice and guidance request to referral to convert the advice and guidance request into a referral. This is only possible if the referrer has authorised the provider to do so.
Sandbox test scenarios

You can test the following scenarios in our sandbox environment

Scenario	Request
Single message from referrer	based-on=CommunicationRequest/000000070000/_history/1
One message each way	based-on=CommunicationRequest/000000070000/_history/2
Attachment present in each direction	based-on=CommunicationRequest/000000070001/_history/6
Multi-way conversation	based-on=CommunicationRequest/000000070002/_history/1
Attachment uploaded from RCS before A&G creation	based-on=CommunicationRequest/000000070003/_history/7
Request
Query parameters
Name	Description
based-on	

String

The component describing the CommunicationRequest for which the communication is requested for.

Pattern:

CommunicationRequest/{ubrn}/_history/{version}

The ubrn represents the unique booking reference number of the Advice and Guidance Request for which the caller is obtaining the 'Advice and Guidance Conversation'
The version is the version of the A&G Request to be retrieved (only the most current version will be retrievable)

Example: CommunicationRequest/000000070000/_history/1

Required

_include	

String

Suppliers must request includes they rely on. The default includes behaviour is subject to change.

Please note that '_include' query parameter can be supplied multiple times for example:

GET /STU3/Communication ?based-on=CommunicationRequest/{ubrn}/_history/{version} &_include=Communication:requester-practitionerrole:PractitionerRole &_include=Communication:sender-practitionerrole:PractionerRole &_include=Communication:content-reference:DocumentReference

Allowed values: Communication:requester-practitionerrole:PractitionerRole, Communication:sender-practitionerrole:PractionerRole, Communication:content-reference:DocumentReference

Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

NHSD-eRS-On-Behalf-Of-User-ID	

String

The (SDS) user ID of the user that the authenticating user wishes to act on behalf of (OBO).

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Where an OBO User ID is supplied the authenticating user must be an SPCA and the OBO User ID must be that of an appropriate SPC.

Example: 021600556514


X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Response
HTTP status: 200

e-RS Communication Request (advice and guidance summary)

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Examples

Single message from referrer

Copy
{
  "id" : "ecbbdf98-235b-4fcd-a8c3-0b93dd083097",
  "meta" : {
    "lastUpdated" : "2021-09-23T13:40:08.775000+00:00",
    "profile" : [ "http://hl7.org/fhir/STU3/StructureDefinition/Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "total" : 1,
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/STU3/Communication?based-on=CommunicationRequest/000000070000/_history/1&_include=Communication:requester-practitionerrole:PractitionerRole&_include=Communication:sender-practitionerrole:PractionerRole&_include=Communication:content-reference:DocumentReference"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/FHIR/STU3/Communication/70000",
    "resource" : {
      "id" : "70000",
      "meta" : {
        "versionId" : "0",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Communication-1" ]
      },
      "resourceType" : "Communication",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-Communication-Requester-1",
        "valueReference" : {
          "reference" : "PractitionerRole/103264992985.R69.REFERRING-CLINICIAN"
        }
      } ],
      "basedOn" : [ {
        "reference" : "CommunicationRequest/000000070000/_history/1"
      } ],
      "status" : "completed",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommunicationSentBy-1",
          "code" : "REQUESTER"
        } ]
      } ],
      "recipient" : [ {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-HealthcareService-Reference-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/ers-service",
              "value" : "11014"
            }
          }
        } ]
      } ],
      "sent" : "2021-09-23T13:40:06.259000+00:00",
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "PractitionerRole/103264992985.R69.REFERRING-CLINICIAN"
          }
        } ]
      },
      "note" : [ {
        "text" : "Please advise me on this patient who ...(information about patient)"
      } ]
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/FHIR/STU3/PractitionerRole/103264992985.R69.REFERRING-CLINICIAN",
    "resource" : {
      "id" : "103264992985.R69.REFERRING-CLINICIAN",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
      },
      "resourceType" : "PractitionerRole",
      "practitioner" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "103264992985"
        }
      },
      "organization" : {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R69"
        }
      },
      "code" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
          "code" : "REFERRING_CLINICIAN"
        } ]
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  } ]
}

One message each way

Copy
{
  "id" : "3e9b1f5a-cfae-44cd-b4bb-127b107d63d4",
  "meta" : {
    "lastUpdated" : "2021-09-23T13:49:12.218000+00:00",
    "profile" : [ "http://hl7.org/fhir/STU3/StructureDefinition/Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "total" : 2,
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/STU3/Communication?based-on=CommunicationRequest/000000070000/_history/2&_include=Communication:requester-practitionerrole:PractitionerRole&_include=Communication:sender-practitionerrole:PractionerRole&_include=Communication:content-reference:DocumentReference"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/STU3/Communication/70001",
    "resource" : {
      "id" : "70001",
      "meta" : {
        "versionId" : "0",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Communication-1" ]
      },
      "resourceType" : "Communication",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-Communication-Requester-1",
        "valueReference" : {
          "reference" : "PractitionerRole/021600556514.R68.SERVICE-PROVIDER-CLINICIAN"
        }
      } ],
      "basedOn" : [ {
        "reference" : "CommunicationRequest/000000070000/_history/2"
      } ],
      "status" : "completed",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommunicationSentBy-1",
          "code" : "RESPONDER"
        } ]
      } ],
      "recipient" : [ {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R68"
        }
      } ],
      "sent" : "2021-09-23T13:49:09.947000+00:00",
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "PractitionerRole/021600556514.R68.SERVICE-PROVIDER-CLINICIAN"
          }
        } ]
      },
      "note" : [ {
        "text" : "Please perform xxx test and send me the results"
      } ]
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Communication/70000",
    "resource" : {
      "id" : "70000",
      "meta" : {
        "versionId" : "0",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Communication-1" ]
      },
      "resourceType" : "Communication",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-Communication-Requester-1",
        "valueReference" : {
          "reference" : "PractitionerRole/021600556514.R68.REFERRING-CLINICIAN"
        }
      } ],
      "basedOn" : [ {
        "reference" : "CommunicationRequest/000000070000/_history/2"
      } ],
      "status" : "completed",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommunicationSentBy-1",
          "code" : "REQUESTER"
        } ]
      } ],
      "recipient" : [ {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-HealthcareService-Reference-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/ers-service",
              "value" : "11000"
            }
          }
        } ]
      } ],
      "sent" : "2021-09-23T11:21:11.740000+00:00",
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "PractitionerRole/021600556514.R68.REFERRING-CLINICIAN"
          }
        } ]
      },
      "note" : [ {
        "text" : "Please advise me on this patient who ...(information about patient)"
      } ]
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/PractitionerRole/021600556514.R68.REFERRING-CLINICIAN",
    "resource" : {
      "id" : "021600556514.R68.REFERRING-CLINICIAN",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
      },
      "resourceType" : "PractitionerRole",
      "practitioner" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "021600556514"
        }
      },
      "organization" : {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R68"
        }
      },
      "code" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
          "code" : "REFERRING_CLINICIAN"
        } ]
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/PractitionerRole/021600556514.R68.SERVICE-PROVIDER-CLINICIAN",
    "resource" : {
      "id" : "021600556514.R68.SERVICE-PROVIDER-CLINICIAN",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
      },
      "resourceType" : "PractitionerRole",
      "practitioner" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "021600556514"
        }
      },
      "organization" : {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R68"
        }
      },
      "code" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
          "code" : "SERVICE_PROVIDER_CLINICIAN"
        } ]
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  } ]
}

Attachment present in each direction

Copy
{
  "id" : "87b2902f-5f2b-4e15-b678-b65951fab131",
  "meta" : {
    "lastUpdated" : "2021-09-24T11:50:11+00:00",
    "profile" : [ "http://hl7.org/fhir/STU3/StructureDefinition/Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "total" : 2,
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/STU3/Communication?based-on=CommunicationRequest/000000070001/_history/6&_include=Communication:requester-practitionerrole:PractitionerRole&_include=Communication:sender-practitionerrole:PractionerRole&_include=Communication:content-reference:DocumentReference"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/STU3/Communication/70000",
    "resource" : {
      "id" : "70000",
      "meta" : {
        "versionId" : "0",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Communication-1" ]
      },
      "resourceType" : "Communication",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-Communication-Requester-1",
        "valueReference" : {
          "reference" : "PractitionerRole/921600556514.R68.REFERRING-CLINICIAN"
        }
      } ],
      "basedOn" : [ {
        "reference" : "CommunicationRequest/000000070001/_history/6"
      } ],
      "status" : "completed",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommunicationSentBy-1",
          "code" : "REQUESTER"
        } ]
      } ],
      "recipient" : [ {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-HealthcareService-Reference-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/ers-service",
              "value" : "11014"
            }
          }
        } ]
      } ],
      "sent" : "2021-09-23T14:43:45.869000+00:00",
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "PractitionerRole/921600556514.R68.REFERRING-CLINICIAN"
          }
        } ]
      },
      "payload" : [ {
        "contentReference" : {
          "reference" : "DocumentReference/70000"
        }
      } ],
      "note" : [ {
        "text" : "Please advise me on this patient who ...(information about patient)"
      } ]
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Communication/70001",
    "resource" : {
      "id" : "70001",
      "meta" : {
        "versionId" : "0",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Communication-1" ]
      },
      "resourceType" : "Communication",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-Communication-Requester-1",
        "valueReference" : {
          "reference" : "PractitionerRole/103264994981.R69.SERVICE-PROVIDER-CLINICIAN"
        }
      } ],
      "basedOn" : [ {
        "reference" : "CommunicationRequest/000000070001/_history/6"
      } ],
      "status" : "completed",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommunicationSentBy-1",
          "code" : "RESPONDER"
        } ]
      } ],
      "recipient" : [ {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R69"
        }
      } ],
      "sent" : "2021-09-23T14:43:46.991000+00:00",
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "PractitionerRole/103264994981.R69.SERVICE-PROVIDER-CLINICIAN"
          }
        } ]
      },
      "payload" : [ {
        "contentReference" : {
          "reference" : "DocumentReference/70001"
        }
      } ],
      "note" : [ {
        "text" : "Please perform xxx test and send me the results"
      } ]
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/PractitionerRole/103264994981.R69.SERVICE-PROVIDER-CLINICIAN",
    "resource" : {
      "id" : "103264994981.R69.SERVICE-PROVIDER-CLINICIAN",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
      },
      "resourceType" : "PractitionerRole",
      "practitioner" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "103264994981"
        }
      },
      "organization" : {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R69"
        }
      },
      "code" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
          "code" : "SERVICE_PROVIDER_CLINICIAN"
        } ]
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/PractitionerRole/921600556514.R68.REFERRING-CLINICIAN",
    "resource" : {
      "id" : "921600556514.R68.REFERRING-CLINICIAN",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
      },
      "resourceType" : "PractitionerRole",
      "practitioner" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "921600556514"
        }
      },
      "organization" : {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R68"
        }
      },
      "code" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
          "code" : "REFERRING_CLINICIAN"
        } ]
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/DocumentReference/70000",
    "resource" : {
      "id" : "70000",
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
      },
      "resourceType" : "DocumentReference",
      "type" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
          "code" : "ADVICE_REQUEST",
          "display" : "Advice Request"
        } ]
      },
      "status" : "current",
      "indexed" : "2021-09-23T14:43:49.565000+00:00",
      "description" : "test restults A",
      "content" : [ {
        "attachment" : {
          "id" : "70000",
          "extension" : [ {
            "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
            "valueReference" : {
              "identifier" : {
                "system" : "http://fhir.nhs.net/Id/sds-user-id",
                "value" : "921600556514"
              }
            }
          } ],
          "contentType" : "application/pdf",
          "url" : "Binary/att-70001-70000",
          "size" : 6,
          "title" : "testRestultsA.pdf",
          "creation" : "2021-09-23"
        }
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/DocumentReference/70001",
    "resource" : {
      "id" : "70001",
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
      },
      "resourceType" : "DocumentReference",
      "type" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
          "code" : "GUIDANCE_RESPONSE",
          "display" : "Guidance Response"
        } ]
      },
      "status" : "current",
      "indexed" : "2021-09-24T11:21:00+00:00",
      "description" : "test xxx info",
      "content" : [ {
        "attachment" : {
          "id" : "70001",
          "extension" : [ {
            "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
            "valueReference" : {
              "identifier" : {
                "system" : "http://fhir.nhs.net/Id/sds-user-id",
                "value" : "103264994981"
              }
            }
          } ],
          "contentType" : "application/pdf",
          "url" : "Binary/att-70001-70001",
          "size" : 11,
          "title" : "testXXXInfo.pdf",
          "creation" : "2021-09-24"
        }
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  } ]
}

Multi-way conversation

Copy
{
  "id" : "87b2902f-5f2b-4e15-b678-b65951fab131",
  "meta" : {
    "lastUpdated" : "2021-09-24T17:52:17+00:00",
    "profile" : [ "http://hl7.org/fhir/STU3/StructureDefinition/Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "total" : 2,
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/STU3/Communication?based-on=CommunicationRequest/000000070002/_history/6&_include=Communication:requester-practitionerrole:PractitionerRole&_include=Communication:sender-practitionerrole:PractionerRole&_include=Communication:content-reference:DocumentReference"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/STU3/Communication/70000",
    "resource" : {
      "id" : "70000",
      "meta" : {
        "versionId" : "0",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Communication-1" ]
      },
      "resourceType" : "Communication",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-Communication-Requester-1",
        "valueReference" : {
          "reference" : "PractitionerRole/921600556514.R68.REFERRING-CLINICIAN"
        }
      } ],
      "basedOn" : [ {
        "reference" : "CommunicationRequest/000000070002/_history/6"
      } ],
      "status" : "completed",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommunicationSentBy-1",
          "code" : "REQUESTER"
        } ]
      } ],
      "recipient" : [ {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-HealthcareService-Reference-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/ers-service",
              "value" : "11014"
            }
          }
        } ]
      } ],
      "sent" : "2021-09-23T14:43:45.869000+00:00",
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "PractitionerRole/921600556514.R68.REFERRING-CLINICIAN"
          }
        } ]
      },
      "note" : [ {
        "text" : "Please advise me on this patient who ...(information about patient)"
      } ]
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Communication/70003",
    "resource" : {
      "id" : "70003",
      "meta" : {
        "versionId" : "0",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Communication-1" ]
      },
      "resourceType" : "Communication",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-Communication-Requester-1",
        "valueReference" : {
          "reference" : "PractitionerRole/103264994981.R69.SERVICE-PROVIDER-CLINICIAN"
        }
      } ],
      "basedOn" : [ {
        "reference" : "CommunicationRequest/000000070002/_history/6"
      } ],
      "status" : "completed",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommunicationSentBy-1",
          "code" : "RESPONDER"
        } ]
      } ],
      "recipient" : [ {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R69"
        }
      } ],
      "sent" : "2021-09-24T16:21:16.991000+00:00",
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "PractitionerRole/103264994981.R69.SERVICE-PROVIDER-CLINICIAN"
          }
        } ]
      },
      "note" : [ {
        "text" : "Also request yyy test results"
      } ]
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Communication/70001",
    "resource" : {
      "id" : "70001",
      "meta" : {
        "versionId" : "0",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Communication-1" ]
      },
      "resourceType" : "Communication",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-Communication-Requester-1",
        "valueReference" : {
          "reference" : "PractitionerRole/921600556514.R68.REFERRING-CLINICIAN"
        }
      } ],
      "basedOn" : [ {
        "reference" : "CommunicationRequest/000000070002/_history/6"
      } ],
      "status" : "completed",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommunicationSentBy-1",
          "code" : "REQUESTER"
        } ]
      } ],
      "recipient" : [ {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-HealthcareService-Reference-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/ers-service",
              "value" : "11014"
            }
          }
        } ]
      } ],
      "sent" : "2021-09-23T15:15:21+00:00",
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "PractitionerRole/921600556514.R68.REFERRING-CLINICIAN"
          }
        } ]
      },
      "note" : [ {
        "text" : "Patient is complaining of breathing difficulties"
      } ]
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Communication/70002",
    "resource" : {
      "id" : "70002",
      "meta" : {
        "versionId" : "0",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Communication-1" ]
      },
      "resourceType" : "Communication",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-Communication-Requester-1",
        "valueReference" : {
          "reference" : "PractitionerRole/103264994981.R69.SERVICE-PROVIDER-CLINICIAN"
        }
      } ],
      "basedOn" : [ {
        "reference" : "CommunicationRequest/000000070002/_history/6"
      } ],
      "status" : "completed",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommunicationSentBy-1",
          "code" : "RESPONDER"
        } ]
      } ],
      "recipient" : [ {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R69"
        }
      } ],
      "sent" : "2021-09-24T16:21:16.991000+00:00",
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "PractitionerRole/103264994981.R69.SERVICE-PROVIDER-CLINICIAN"
          }
        } ]
      },
      "note" : [ {
        "text" : "Request xxx test results"
      } ]
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/PractitionerRole/103264994981.R69.SERVICE-PROVIDER-CLINICIAN",
    "resource" : {
      "id" : "103264994981.R69.SERVICE-PROVIDER-CLINICIAN",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
      },
      "resourceType" : "PractitionerRole",
      "practitioner" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "103264994981"
        }
      },
      "organization" : {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R69"
        }
      },
      "code" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
          "code" : "SERVICE_PROVIDER_CLINICIAN"
        } ]
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/PractitionerRole/921600556514.R68.REFERRING-CLINICIAN",
    "resource" : {
      "id" : "921600556514.R68.REFERRING-CLINICIAN",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
      },
      "resourceType" : "PractitionerRole",
      "practitioner" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "921600556514"
        }
      },
      "organization" : {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R68"
        }
      },
      "code" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
          "code" : "REFERRING_CLINICIAN"
        } ]
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  } ]
}

Attachment uploaded from RCS

Copy
{
  "id" : "b8d31cbb-4d0b-4aed-8a1e-aeccb93a94dd",
  "meta" : {
    "lastUpdated" : "2021-09-23T15:18:20.505000+00:00",
    "profile" : [ "http://hl7.org/fhir/STU3/StructureDefinition/Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "total" : 2,
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/STU3/Communication?based-on=CommunicationRequest/000000070003/_history/7&_include=Communication:requester-practitionerrole:PractitionerRole&_include=Communication:sender-practitionerrole:PractionerRole&_include=Communication:content-reference:DocumentReference"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/STU3/Communication/70000",
    "resource" : {
      "id" : "70000",
      "meta" : {
        "versionId" : "0",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Communication-1" ]
      },
      "resourceType" : "Communication",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-Communication-Requester-1",
        "valueReference" : {
          "reference" : "PractitionerRole/103264992985.R69.REFERRING-CLINICIAN-ADMIN"
        }
      } ],
      "basedOn" : [ {
        "reference" : "CommunicationRequest/000000070007/_history/7"
      } ],
      "status" : "completed",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommunicationSentBy-1",
          "code" : "REQUESTER"
        } ]
      } ],
      "recipient" : [ {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-HealthcareService-Reference-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/ers-service",
              "value" : "11014"
            }
          }
        } ]
      } ],
      "sent" : "2021-09-23T15:18:15.192000+00:00",
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "PractitionerRole/103264992985.R69.REFERRING-CLINICIAN-ADMIN"
          }
        } ]
      },
      "payload" : [ {
        "contentReference" : {
          "reference" : "DocumentReference/70000"
        }
      } ],
      "note" : [ {
        "text" : "some notes"
      } ]
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/Communication/70001",
    "resource" : {
      "id" : "70001",
      "meta" : {
        "versionId" : "0",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Communication-1" ]
      },
      "resourceType" : "Communication",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-Communication-Requester-1",
        "valueReference" : {
          "reference" : "PractitionerRole/103264992985.R69"
        }
      } ],
      "basedOn" : [ {
        "reference" : "CommunicationRequest/000000070007/_history/7"
      } ],
      "status" : "completed",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommunicationSentBy-1",
          "code" : "REFERRER_CLINICAL_INFORMATION_UPDATED"
        } ]
      } ],
      "recipient" : [ {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-HealthcareService-Reference-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/ers-service",
              "value" : "11014"
            }
          }
        } ]
      } ],
      "sent" : "2021-09-23T15:18:18.089000+00:00",
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "PractitionerRole/103264992985.R69"
          }
        } ]
      },
      "note" : [ {
        "text" : "NOTE: Clinical Information has been added/amended"
      } ]
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/PractitionerRole/103264992985.R69.REFERRING-CLINICIAN-ADMIN",
    "resource" : {
      "id" : "103264992985.R69.REFERRING-CLINICIAN-ADMIN",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
      },
      "resourceType" : "PractitionerRole",
      "practitioner" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "103264992985"
        }
      },
      "organization" : {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R69"
        }
      },
      "code" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
          "code" : "REFERRING_CLINICIAN_ADMIN"
        } ]
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/PractitionerRole/103264992985.R69",
    "resource" : {
      "id" : "103264992985.R69",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
      },
      "resourceType" : "PractitionerRole",
      "practitioner" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/sds-user-id",
          "value" : "103264992985"
        }
      },
      "organization" : {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R69"
        }
      }
    },
    "search" : {
      "mode" : "include"
    }
  }, {
    "fullUrl" : "_baseUrl_/STU3/DocumentReference/70000",
    "resource" : {
      "id" : "70000",
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
      },
      "resourceType" : "DocumentReference",
      "type" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
          "code" : "ADVICE_REQUEST",
          "display" : "Advice Request"
        } ]
      },
      "status" : "current",
      "indexed" : "2021-09-23T15:18:20.488000+00:00",
      "description" : "advice png",
      "content" : [ {
        "attachment" : {
          "id" : "70000",
          "extension" : [ {
            "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
            "valueReference" : {
              "identifier" : {
                "system" : "http://fhir.nhs.net/Id/sds-user-id",
                "value" : "103264992985"
              }
            }
          } ],
          "contentType" : "image/png",
          "url" : "Binary/att-70007-70000",
          "size" : 6,
          "title" : "advice.png",
          "creation" : "2021-09-23"
        }
      } ]
    },
    "search" : {
      "mode" : "include"
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
Bundle resource containing advice and guidance conversation


id
string
required
	
Example: 08acc887-6a7b-4b38-8f50-022e41319efe


meta
object
required
	

resourceType
string
required
	
Allowed values: Bundle


type
string
required
	
Allowed values: searchset


total
integer int32
required
	
Minimum: 0 (inclusive)
Example: 3


link
array
required
	
Max items: 1
Min items: 1


entry
array
required
	
Field	Cardinality	Notes
CommunicationEntry	1..*	
PractitionerRoleEntry	2..*	
DocumentEntry	0..*	
HTTP status: 400

Where status code 400 (Bad Request) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
INVALID_REQUEST_TYPE	The UBRN provided exists in e-RS but does not correspond to an active request.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found - Resource not found for ID provided or Resource version does not match version requested.

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A026 - Send advice and guidance response
POST /STU3/CommunicationRequest/{ubrn}/$ers.sendCommunicationToRequester
Try this API
Overview

Use this endpoint, as a service provider, to respond to an advice and guidance request your service provider organisation has received. You can either provide guidance back to the referrer or request further information from the referrer. This will return the advice and guidance request back to the referrer for action.

Note: If you want to convert an advice and guidance request into a referral, and provide a final guidance response back to the referrer at the same time, please use A027 - Convert advice and guidance request to referral instead. This option is only permissible if the referrer has authorised the provider to convert the advice and guidance request into a referral.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

SERVICE_PROVIDER_CLINICIAN
SERVICE_PROVIDER_CLINICIAN_ADMIN

You need to use A024 - Retrieve advice and guidance request summary to retrieve the summary of an advice and guidance request.

You need to use A025 - Retrieve advice and guidance conversation to retrieve the conversation within an advice and guidance request.

If you want to include attachments with the response, you need to use A020 - Upload file to document store so they are ready to be associated with the response.

Use case

As an authenticated user

I need to return an advice and guidance request back to the referrer with some guidance

So that I can progress the conversation regarding the patient's care.

Related endpoints

You can use A007 - Retrieve clinical information to generate a PDF file that summarises the advice and guidance request and associated conversation.

You can use A024 - Retrieve advice and guidance request summary to retrieve the latest summary of the advice and guidance request.

You can use A025 - Retrieve advice and guidance conversation to retrieve the latest conversation within the advice and guidance request.

Request
Path parameters
Name	Description
ubrn	

String

The unique booking reference number of the referral request

Example: 000000070000

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

NHSD-eRS-On-Behalf-Of-User-ID	

String

The (SDS) user ID of the user that the authenticating user wishes to act on behalf of (OBO).

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Where an OBO User ID is supplied the authenticating user must be an SPCA and the OBO User ID must be that of an appropriate SPC.

Example: 021600556514


X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


If-Match	

String

The version of the resource to be updated

Pattern: /^W\/"[0-9]+"$/

Example: W/"4"

Required
Body
Required

Content type: application/fhir+json

Examples

Require further information

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-SendCommunicationToRequester-Request-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "guidanceOutcome",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-GuidanceResponseOutcome-1",
      "code" : "REQUIRE_FURTHER_INFORMATION"
    }
  }, {
    "name" : "guidance",
    "valueString" : "Please supply me with xxx test results"
  }, {
    "name" : "updatedPriority",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
      "code" : "TWO_WEEK_WAIT"
    }
  } ]
}

Return to referrer with advice

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-SendCommunicationToRequester-Request-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "guidanceOutcome",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-GuidanceResponseOutcome-1",
      "code" : "RETURN_TO_REFERRER_WITH_ADVICE"
    }
  }, {
    "name" : "guidanceIntendedRecommendation",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-GuidanceIntendedRecommendation-1",
      "code" : "ADVICE_ONLY_NO_REFERRAL_RECOMMENDED"
    }
  }, {
    "name" : "guidance",
    "valueString" : "No evidence of serious problem: patient can be advised to xxx"
  }, {
    "name" : "updatedPriority",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
      "code" : "ROUTINE"
    }
  } ]
}

Attachment included

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-SendCommunicationToRequester-Request-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "guidanceOutcome",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-GuidanceResponseOutcome-1",
      "code" : "RETURN_TO_REFERRER_WITH_ADVICE"
    }
  }, {
    "name" : "guidanceIntendedRecommendation",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-GuidanceIntendedRecommendation-1",
      "code" : "OTHER"
    }
  }, {
    "name" : "guidance",
    "valueString" : "Advise treatment as in attached document"
  }, {
    "name" : "updatedPriority",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
      "code" : "ROUTINE"
    }
  }, {
    "name" : "guidanceAttachmentFile",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
      },
      "resourceType" : "DocumentReference",
      "type" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
          "code" : "GUIDANCE_RESPONSE"
        } ]
      },
      "status" : "current",
      "indexed" : "2021-09-29T13:22:35.335000+00:00",
      "description" : "Treatment Specification",
      "content" : [ {
        "attachment" : {
          "url" : "Binary/att-70000-70000"
        }
      } ]
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-SendCommunicationToRequester-Request-Parameters


resourceType
string
required
	
Allowed values: Parameters


meta
object
required
	

parameter
array
required
	
Field	Cardinality	Notes
guidanceOutcome	1..1	
guidanceIntendedRecommendation	0..1	Conditionally Mandatory if guidanceOutcome value is RETURN_TO_REFERRER_WITH_ADVICE
guidance	1..1	
updatedPriority	1..1	
guidanceAttachmentFile	0..*	Property defining files to be included with the supplied guidance text
Response
HTTP status: 200

Parameters resource containing updated communication request and newly created communication

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Examples

Response for 'Require further information'

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-SendCommunicationToRequester-Response-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "updatedCommunicationRequest",
    "resource" : {
      "id" : "000000070000",
      "meta" : {
        "versionId" : "6",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-CommunicationRequest-1" ]
      },
      "resourceType" : "CommunicationRequest",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "TWO_WEEK_WAIT",
            "display" : "2 Week Wait"
          } ]
        }
      }, {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ProviderConversionAuthorisation-1",
        "valueCoding" : {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ProviderConversionAuthorisation-1",
          "code" : "NOT_AUTHORISED_TO_CONVERT",
          "display" : "Referrer has NOT allowed the Service Provider to convert the Advice and Guidance to a Referral"
        }
      }, {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
        "valueReference" : {
          "reference" : "#shortlist"
        }
      }, {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Specialty-1",
        "valueCoding" : {
          "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
          "code" : "CARDIOLOGY",
          "display" : "Cardiology"
        }
      } ],
      "contained" : [ {
        "id" : "serviceSearchCriteria",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
        },
        "resourceType" : "Parameters",
        "parameter" : [ {
          "name" : "priority",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          }
        }, {
          "name" : "specialty",
          "valueCoding" : {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          }
        }, {
          "name" : "clinicType",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
            "code" : "HEART_FAILURE"
          }
        }, {
          "name" : "postcode",
          "valueString" : "LS1 2TW"
        }, {
          "name" : "distanceLimit",
          "valueUnsignedInt" : 123
        }, {
          "name" : "ageAndGenderAppropriate",
          "valueBoolean" : true
        } ]
      }, {
        "id" : "shortlist",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
        },
        "resourceType" : "List",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
          "valueReference" : {
            "reference" : "#serviceSearchCriteria"
          }
        } ],
        "status" : "current",
        "mode" : "snapshot",
        "entry" : [ {
          "item" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/ers-service",
              "value" : "11014"
            },
            "display" : "Advice Only"
          }
        } ]
      }, {
        "id" : "PractitionerRole.103264992985.R69.REFERRING-CLINICIAN",
        "meta" : {
          "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
        },
        "resourceType" : "PractitionerRole",
        "practitioner" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/sds-user-id",
            "value" : "103264992985"
          }
        },
        "organization" : {
          "identifier" : {
            "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
            "value" : "R69"
          }
        },
        "code" : [ {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
            "code" : "REFERRING_CLINICIAN"
          } ]
        } ]
      } ],
      "status" : "active",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AdviceAndGuidanceStatus-1",
          "code" : "REFERRER_TO_SUBMIT_FURTHER_INFORMATION"
        } ]
      } ],
      "subject" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9462979626"
        }
      },
      "recipient" : [ {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-HealthcareService-Reference-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/ers-service",
              "value" : "11014"
            }
          }
        } ]
      } ],
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "#PractitionerRole.103264992985.R69.REFERRING-CLINICIAN"
          }
        } ]
      },
      "requester" : {
        "agent" : {
          "extension" : [ {
            "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
            "valueReference" : {
              "reference" : "#PractitionerRole.103264992985.R69.REFERRING-CLINICIAN"
            }
          } ]
        }
      }
    }
  }, {
    "name" : "createdCommunication",
    "resource" : {
      "id" : "70001",
      "meta" : {
        "versionId" : "0",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Communication-1" ]
      },
      "resourceType" : "Communication",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-Communication-Requester-1",
        "valueReference" : {
          "reference" : "#PractitionerRole.103264994981.R69.SERVICE-PROVIDER-CLINICIAN"
        }
      } ],
      "contained" : [ {
        "id" : "PractitionerRole.103264994981.R69.SERVICE-PROVIDER-CLINICIAN",
        "meta" : {
          "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
        },
        "resourceType" : "PractitionerRole",
        "practitioner" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/sds-user-id",
            "value" : "103264994981"
          }
        },
        "organization" : {
          "identifier" : {
            "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
            "value" : "R69"
          }
        },
        "code" : [ {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
            "code" : "SERVICE_PROVIDER_CLINICIAN"
          } ]
        } ]
      } ],
      "basedOn" : [ {
        "reference" : "CommunicationRequest/000000070000/_history/6"
      } ],
      "status" : "completed",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommunicationSentBy-1",
          "code" : "RESPONDER"
        } ]
      } ],
      "recipient" : [ {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R69"
        }
      } ],
      "sent" : "2021-09-29T13:04:37.794000+00:00",
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "#PractitionerRole.103264994981.R69.SERVICE-PROVIDER-CLINICIAN"
          }
        } ]
      },
      "note" : [ {
        "text" : "Please supply me with xxx test results"
      } ]
    }
  } ]
}

Response for 'Return to referrer with advice'

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-SendCommunicationToRequester-Response-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "updatedCommunicationRequest",
    "resource" : {
      "id" : "000000070000",
      "meta" : {
        "versionId" : "6",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-CommunicationRequest-1" ]
      },
      "resourceType" : "CommunicationRequest",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE",
            "display" : "Routine"
          } ]
        }
      }, {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ProviderConversionAuthorisation-1",
        "valueCoding" : {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ProviderConversionAuthorisation-1",
          "code" : "NOT_AUTHORISED_TO_CONVERT",
          "display" : "Referrer has NOT allowed the Service Provider to convert the Advice and Guidance to a Referral"
        }
      }, {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
        "valueReference" : {
          "reference" : "#shortlist"
        }
      }, {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Specialty-1",
        "valueCoding" : {
          "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
          "code" : "CARDIOLOGY",
          "display" : "Cardiology"
        }
      } ],
      "contained" : [ {
        "id" : "serviceSearchCriteria",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
        },
        "resourceType" : "Parameters",
        "parameter" : [ {
          "name" : "priority",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          }
        }, {
          "name" : "specialty",
          "valueCoding" : {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          }
        }, {
          "name" : "clinicType",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
            "code" : "HEART_FAILURE"
          }
        }, {
          "name" : "postcode",
          "valueString" : "LS1 2TW"
        }, {
          "name" : "distanceLimit",
          "valueUnsignedInt" : 123
        }, {
          "name" : "ageAndGenderAppropriate",
          "valueBoolean" : true
        } ]
      }, {
        "id" : "shortlist",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
        },
        "resourceType" : "List",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
          "valueReference" : {
            "reference" : "#serviceSearchCriteria"
          }
        } ],
        "status" : "current",
        "mode" : "snapshot",
        "entry" : [ {
          "item" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/ers-service",
              "value" : "11014"
            },
            "display" : "Advice Only"
          }
        } ]
      }, {
        "id" : "PractitionerRole.103264992985.R69.REFERRING-CLINICIAN",
        "meta" : {
          "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
        },
        "resourceType" : "PractitionerRole",
        "practitioner" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/sds-user-id",
            "value" : "103264992985"
          }
        },
        "organization" : {
          "identifier" : {
            "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
            "value" : "R69"
          }
        },
        "code" : [ {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
            "code" : "REFERRING_CLINICIAN"
          } ]
        } ]
      } ],
      "status" : "active",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AdviceAndGuidanceStatus-1",
          "code" : "REFERRER_TO_REVIEW_RESPONSE"
        } ]
      } ],
      "subject" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9462979626"
        }
      },
      "recipient" : [ {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-HealthcareService-Reference-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/ers-service",
              "value" : "11014"
            }
          }
        } ]
      } ],
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "#PractitionerRole.103264992985.R69.REFERRING-CLINICIAN"
          }
        } ]
      },
      "requester" : {
        "agent" : {
          "extension" : [ {
            "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
            "valueReference" : {
              "reference" : "#PractitionerRole.103264992985.R69.REFERRING-CLINICIAN"
            }
          } ]
        }
      }
    }
  }, {
    "name" : "createdCommunication",
    "resource" : {
      "id" : "70001",
      "meta" : {
        "versionId" : "0",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Communication-1" ]
      },
      "resourceType" : "Communication",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-Communication-Requester-1",
        "valueReference" : {
          "reference" : "#PractitionerRole.103264994981.R69.SERVICE-PROVIDER-CLINICIAN"
        }
      } ],
      "contained" : [ {
        "id" : "PractitionerRole.103264994981.R69.SERVICE-PROVIDER-CLINICIAN",
        "meta" : {
          "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
        },
        "resourceType" : "PractitionerRole",
        "practitioner" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/sds-user-id",
            "value" : "103264994981"
          }
        },
        "organization" : {
          "identifier" : {
            "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
            "value" : "R69"
          }
        },
        "code" : [ {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
            "code" : "SERVICE_PROVIDER_CLINICIAN"
          } ]
        } ]
      } ],
      "basedOn" : [ {
        "reference" : "CommunicationRequest/000000070000/_history/6"
      } ],
      "status" : "completed",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommunicationSentBy-1",
          "code" : "RESPONDER"
        } ]
      } ],
      "recipient" : [ {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R69"
        }
      } ],
      "sent" : "2021-09-29T13:16:33.778000+00:00",
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "#PractitionerRole.103264994981.R69.SERVICE-PROVIDER-CLINICIAN"
          }
        } ]
      },
      "note" : [ {
        "text" : "No evidence of serious problem: patient can be advised to xxx"
      } ]
    }
  } ]
}

Response with attachment

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-SendCommunicationToRequester-Response-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "updatedCommunicationRequest",
    "resource" : {
      "id" : "000000070000",
      "meta" : {
        "versionId" : "6",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-CommunicationRequest-1" ]
      },
      "resourceType" : "CommunicationRequest",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE",
            "display" : "Routine"
          } ]
        }
      }, {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ProviderConversionAuthorisation-1",
        "valueCoding" : {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ProviderConversionAuthorisation-1",
          "code" : "NOT_AUTHORISED_TO_CONVERT",
          "display" : "Referrer has NOT allowed the Service Provider to convert the Advice and Guidance to a Referral"
        }
      }, {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
        "valueReference" : {
          "reference" : "#shortlist"
        }
      }, {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Specialty-1",
        "valueCoding" : {
          "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
          "code" : "CARDIOLOGY",
          "display" : "Cardiology"
        }
      } ],
      "contained" : [ {
        "id" : "serviceSearchCriteria",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
        },
        "resourceType" : "Parameters",
        "parameter" : [ {
          "name" : "priority",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          }
        }, {
          "name" : "specialty",
          "valueCoding" : {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          }
        }, {
          "name" : "clinicType",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
            "code" : "HEART_FAILURE"
          }
        }, {
          "name" : "postcode",
          "valueString" : "LS1 2TW"
        }, {
          "name" : "distanceLimit",
          "valueUnsignedInt" : 123
        }, {
          "name" : "ageAndGenderAppropriate",
          "valueBoolean" : true
        } ]
      }, {
        "id" : "shortlist",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
        },
        "resourceType" : "List",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
          "valueReference" : {
            "reference" : "#serviceSearchCriteria"
          }
        } ],
        "status" : "current",
        "mode" : "snapshot",
        "entry" : [ {
          "item" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/ers-service",
              "value" : "11014"
            },
            "display" : "Advice Only"
          }
        } ]
      }, {
        "id" : "PractitionerRole.103264992985.R69.REFERRING-CLINICIAN",
        "meta" : {
          "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
        },
        "resourceType" : "PractitionerRole",
        "practitioner" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/sds-user-id",
            "value" : "103264992985"
          }
        },
        "organization" : {
          "identifier" : {
            "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
            "value" : "R69"
          }
        },
        "code" : [ {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
            "code" : "REFERRING_CLINICIAN"
          } ]
        } ]
      } ],
      "status" : "active",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AdviceAndGuidanceStatus-1",
          "code" : "REFERRER_TO_REVIEW_RESPONSE"
        } ]
      } ],
      "subject" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9462979626"
        }
      },
      "recipient" : [ {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-HealthcareService-Reference-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/ers-service",
              "value" : "11014"
            }
          }
        } ]
      } ],
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "#PractitionerRole.103264992985.R69.REFERRING-CLINICIAN"
          }
        } ]
      },
      "requester" : {
        "agent" : {
          "extension" : [ {
            "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
            "valueReference" : {
              "reference" : "#PractitionerRole.103264992985.R69.REFERRING-CLINICIAN"
            }
          } ]
        }
      }
    }
  }, {
    "name" : "createdCommunication",
    "resource" : {
      "id" : "70001",
      "meta" : {
        "versionId" : "0",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Communication-1" ]
      },
      "resourceType" : "Communication",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-Communication-Requester-1",
        "valueReference" : {
          "reference" : "#PractitionerRole.103264994981.R69.SERVICE-PROVIDER-CLINICIAN"
        }
      } ],
      "contained" : [ {
        "id" : "PractitionerRole.103264994981.R69.SERVICE-PROVIDER-CLINICIAN",
        "meta" : {
          "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1" ]
        },
        "resourceType" : "PractitionerRole",
        "practitioner" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/sds-user-id",
            "value" : "103264994981"
          }
        },
        "organization" : {
          "identifier" : {
            "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
            "value" : "R69"
          }
        },
        "code" : [ {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-BusinessFunction-1",
            "code" : "SERVICE_PROVIDER_CLINICIAN"
          } ]
        } ]
      }, {
        "id" : "DocumentReference-70000",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
        },
        "resourceType" : "DocumentReference",
        "type" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
            "code" : "GUIDANCE_RESPONSE",
            "display" : "Guidance Response"
          } ]
        },
        "status" : "current",
        "indexed" : "2021-09-29T13:22:35.953000+00:00",
        "description" : "Treatment Specification",
        "content" : [ {
          "attachment" : {
            "id" : "70000",
            "extension" : [ {
              "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
              "valueReference" : {
                "identifier" : {
                  "system" : "http://fhir.nhs.net/Id/sds-user-id",
                  "value" : "103264994981"
                }
              }
            } ],
            "contentType" : "application/pdf",
            "url" : "Binary/att-70000-70000",
            "size" : 17,
            "title" : "TreatmentSpecification.pdf",
            "creation" : "2021-09-29"
          }
        } ]
      } ],
      "basedOn" : [ {
        "reference" : "CommunicationRequest/000000070000/_history/6"
      } ],
      "status" : "completed",
      "category" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommunicationSentBy-1",
          "code" : "RESPONDER"
        } ]
      } ],
      "recipient" : [ {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R69"
        }
      } ],
      "sent" : "2021-09-29T13:22:35.875000+00:00",
      "sender" : {
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-PractitionerRole-Reference-1",
          "valueReference" : {
            "reference" : "#PractitionerRole.103264994981.R69.SERVICE-PROVIDER-CLINICIAN"
          }
        } ]
      },
      "payload" : [ {
        "contentReference" : {
          "reference" : "#DocumentReference-70000"
        }
      } ],
      "note" : [ {
        "text" : "Advise treatment as in attached document"
      } ]
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-SendCommunicationToRequester-Response-Parameters


resourceType
string
required
	
Allowed values: Parameters


meta
object
required
	

parameter
array
required
	
Field	Cardinality	Notes
updatedCommunicationRequest	1..1	
createdCommunication	1..1	
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 409

Conflict - Version supplied as part of the request does not match current version of the referral request

HTTP status: 415

Unsupported Media Type

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
UNSUPPORTED_PRIORITY	The Priority submitted is not supported by the responsible Service.
INAPPROPRIATE_VALUE	A value, which is acceptable under different conditions, is inappropriate in the context of the other information provided.
INVALID_VALUE	The input provided does not conform to the expected data types and format.
INVALID_REQUEST_STATE	The Request, while otherwise valid, is not in the correct state for the specific action being performed.
INVALID_STATE	Indicates that the referenced item is not in the correct state for the request to be processed.
MISSING_VALUE	A field defined as mandatory for an endpoint has not been provided.
VALUE_IS_REQUIRED	A business rule defines a value as mandatory but it has not been provided.
REFERENCE_NOT_FOUND	A supplied reference could not be resolved to valid resource (e.g. a patient, clinician or an organisation).
DUPLICATE_FILENAME	A file being attached, matches another file being attached, or matches a file that is already linked.
CONFLICTING_VALUES	Two or more supplied values are contradictory.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 423

Locked - resource is locked

HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A027 - Convert advice and guidance request to referral
POST /STU3/ReferralRequest/$ers.createFromCommunicationRequestActionLater
Try this API
Overview

Use this endpoint, as a service provider, to:

convert the advice and guidance request you have received into a referral, AND
create a task for the service provider admin team to select/shortlist appropriate services for the patient, AND
provide final guidance response details back to the referrer

Note: This endpoint is only allowed to be used if the referrer has authorised the provider to convert the advice and guidance request into a referral.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

SERVICE_PROVIDER_CLINICIAN
SERVICE_PROVIDER_CLINICIAN_ADMIN

You need to use A024 - Retrieve advice and guidance request summary to retrieve the summary of an advice and guidance request. This will include whether or not the referrer has authorised the provider to be able to convert an advice and guidance request into a referral, and thus dictate whether this endpoint can be used.

You need to use A025 - Retrieve advice and guidance conversation to retrieve the conversation within an advice and guidance request.

If you want to include attachments with the admin task and/or the response to the referrer, you need to use A020 - Upload file to document store so they are ready to be associated when this endpoint is called.

Use case

As an authenticated user

I need to convert an inbound advice and guidance request into a referral and task my admin team to shortlist appropriate services for the patient

So that I can progress the patient's care along the most appropriate referral pathway.

Important notes

When this endpoint is successfully used, an entry will be added to the service providers Appointments For Booking worklist for the admin team to action the task. The provider admin team will currently only be able to progress the referral via the e-RS Professional Application user interface (e.g. shortlisting appropriate services for the patient).

Related endpoints

You can use A005 - Retrieve referral request to retrieve the details of the referral.

You can use A024 - Retrieve advice and guidance request summary to retrieve the latest summary of the advice and guidance request.

You can use A025 - Retrieve advice and guidance conversation to retrieve the latest conversation within the advice and guidance request.

You can use A006 - Retrieve attachment to retrieve the clinical attachments for a referral/advice request.

You can use A007 - Retrieve clinical information to retrieve the clinical information summary PDF for a referral.

Request
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

NHSD-eRS-On-Behalf-Of-User-ID	

String

The (SDS) user ID of the user that the authenticating user wishes to act on behalf of (OBO).

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Where an OBO User ID is supplied the authenticating user must be an SPCA and the OBO User ID must be that of an appropriate SPC.

Example: 021600556514


X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Body
Required

Content type: application/fhir+json

Examples

No attachments

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-CreateFromCommunicationRequestActionLater-Request-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "createFrom",
    "valueReference" : {
      "reference" : "CommunicationRequest/000000070000/_history/3"
    }
  }, {
    "name" : "guidance",
    "valueString" : "I have converted this to send the patient to one of our services"
  }, {
    "name" : "newReferralPriority",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
      "code" : "ROUTINE"
    }
  }, {
    "name" : "reviewComments",
    "valueString" : "Refer this patient to our 'xxx' service please as soon as possible"
  } ]
}

With attachments

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-CreateFromCommunicationRequestActionLater-Request-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "createFrom",
    "valueReference" : {
      "reference" : "CommunicationRequest/000000070000/_history/3"
    }
  }, {
    "name" : "guidance",
    "valueString" : "Patient booked into our service. See attachment for best initial medication"
  }, {
    "name" : "newReferralPriority",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
      "code" : "ROUTINE"
    }
  }, {
    "name" : "reviewComments",
    "valueString" : "Book patient to 'xxx' service to include attached file as referral letter"
  }, {
    "name" : "guidanceAttachmentFile",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
      },
      "resourceType" : "DocumentReference",
      "type" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
          "code" : "GUIDANCE_RESPONSE"
        } ]
      },
      "status" : "current",
      "indexed" : "2021-10-01T14:06:14.915000+00:00",
      "description" : "Initial medication",
      "content" : [ {
        "attachment" : {
          "url" : "Binary/att-70000-70003"
        }
      } ]
    }
  }, {
    "name" : "reviewAttachmentFile",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
      },
      "resourceType" : "DocumentReference",
      "type" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
          "code" : "PROVIDER"
        } ]
      },
      "status" : "current",
      "indexed" : "2021-10-01T14:06:14.919000+00:00",
      "description" : "Referral letter",
      "content" : [ {
        "attachment" : {
          "url" : "Binary/att-70000-70004"
        }
      } ]
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-CreateFromCommunicationRequestActionLater-Request-Parameters


resourceType
string
required
	
Allowed values: Parameters


meta
object
required
	

parameter
array
required
	
Field	Cardinality	Notes
createFrom	1..1	
guidance	1..1	
newReferralPriority	1..1	
reviewComments	1..1	
guidanceAttachmentFile	0..*	Property defining files to be included with the supplied guidance text
reviewAttachmentFile	0..*	Property defining files to be associated with the created ReferralRequest
Response
HTTP status: 201

A referral converted from A&G request.

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Examples

No attachments

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "4",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-10-01T14:00:44.806000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11014"
        },
        "display" : "Advice Only"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "1",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "proposed",
    "reason" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewOutcome-1",
        "code" : "PROVIDER_CONVERTED_ADVICE_AND_GUIDANCE_ADMIN_TO_REFER",
        "display" : "Provider Converted Advice and Guidance, Admin to Refer"
      } ]
    } ],
    "description" : "e-Referral Appointment",
    "created" : "2021-10-01T14:00:44.864000+00:00",
    "comment" : "Refer this patient to our 'xxx' service please as soon as possible",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070000/_history/9"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11014"
        },
        "display" : "Advice Only"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "1000000001"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-70000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-10-01T14:00:45.004000+00:00",
    "content" : [ {
      "attachment" : {
        "id" : "70000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "103264994981"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70000-70000",
        "size" : 3764,
        "title" : "Advice and guidance conversation - 000000070000.pdf",
        "creation" : "2021-10-01"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "1000000001"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-70000"
  }, {
    "reference" : "CommunicationRequest/000000070000"
  } ],
  "intent" : "plan"
}

With attachments

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "4",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-10-01T14:05:46.862000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoLastUpdated-1",
    "valueDateTime" : "2021-10-01T14:06:15.622000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11014"
        },
        "display" : "Advice Only"
      }
    } ]
  }, {
    "id" : "DocumentReference-70006",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-10-01T14:06:15.823000+00:00",
    "content" : [ {
      "attachment" : {
        "id" : "70006",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "103264994981"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70000-70006",
        "size" : 4022,
        "title" : "Advice and guidance conversation - 000000070000.pdf",
        "creation" : "2021-10-01"
      }
    } ]
  }, {
    "id" : "DocumentReference-70002",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-10-01T14:06:15.823000+00:00",
    "description" : "upload.png",
    "content" : [ {
      "attachment" : {
        "id" : "70002",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "103264992985"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70000-70002",
        "size" : 18592,
        "title" : "upload.png",
        "creation" : "2021-10-01"
      }
    } ]
  }, {
    "id" : "DocumentReference-70003",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "GUIDANCE_RESPONSE",
        "display" : "Guidance Response"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-10-01T14:06:15.823000+00:00",
    "description" : "Initial medication",
    "content" : [ {
      "attachment" : {
        "id" : "70003",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "103264994981"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70000-70003",
        "size" : 17,
        "title" : "InitialMedication.pdf",
        "creation" : "2021-10-01"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "1",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "proposed",
    "reason" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewOutcome-1",
        "code" : "PROVIDER_CONVERTED_ADVICE_AND_GUIDANCE_ADMIN_TO_REFER",
        "display" : "Provider Converted Advice and Guidance, Admin to Refer"
      } ]
    } ],
    "description" : "e-Referral Appointment",
    "created" : "2021-10-01T14:06:15.690000+00:00",
    "comment" : "Book patient to 'xxx' service to include attached file as referral letter",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070000/_history/4"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11014"
        },
        "display" : "Advice Only"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "1000000001"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-70004",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "PROVIDER",
        "display" : "Provider"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-10-01T14:06:15.823000+00:00",
    "description" : "Referral letter",
    "content" : [ {
      "attachment" : {
        "id" : "70004",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "103264994981"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70000-70004",
        "size" : 17,
        "title" : "ReferralLetter.pdf",
        "creation" : "2021-10-01"
      }
    } ]
  }, {
    "id" : "DocumentReference-70000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "ADVICE_REQUEST",
        "display" : "Advice Request"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-10-01T14:06:15.823000+00:00",
    "description" : "advice png",
    "content" : [ {
      "attachment" : {
        "id" : "70000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "103264992985"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70000-70000",
        "size" : 6,
        "title" : "advice.png",
        "creation" : "2021-10-01"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "1000000001"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-70004"
  }, {
    "reference" : "#DocumentReference-70000"
  }, {
    "reference" : "#DocumentReference-70003"
  }, {
    "reference" : "#DocumentReference-70002"
  }, {
    "reference" : "#DocumentReference-70006"
  }, {
    "reference" : "CommunicationRequest/000000070000"
  } ],
  "intent" : "plan"
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-ReferralRequest


id
string
required
	
Example: 000000070000


meta
object
required
	

resourceType
string
required
	
Allowed values: ReferralRequest


contained
array
nullable
required
	
Field	Cardinality	Notes
eRS-Shortlist-List	1..1	
eRS-ServiceSearchCriteria-Parameters	1..1	
eRS-Appointment	0..1	
DocumentReference	0..*	


extension
array
nullable
required
	
Field	Cardinality	Notes
Extension-eRS-ReferralShortlist	1..1	
Extension-eRS-Commissioning-Rule-Org	1..1	
Extension-eRS-ReferralPriority	1..1	
Extension-eRS-Appointment	0..1	
Extension-eRS-ClinicalInfoFirstSubmitted	0..1	
Extension-eRS-ClinicalInfoLastUpdated	0..1	


status
string
required
	
Allowed values: active, completed


subject
object
required
	

supportingInfo
array
nullable
required
	

intent
string
required
	
Allowed values: plan
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 409

Conflict - Version supplied as part of the request does not match current version of the referral request

HTTP status: 415

Unsupported Media Type

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
UNSUPPORTED_PRIORITY	The Priority submitted is not supported by the responsible Service.
INAPPROPRIATE_VALUE	A value, which is acceptable under different conditions, is inappropriate in the context of the other information provided.
INVALID_VALUE	The input provided does not conform to the expected data types and format.
INVALID_REQUEST_STATE	The Request, while otherwise valid, is not in the correct state for the specific action being performed.
INVALID_STATE	Indicates that the referenced item is not in the correct state for the request to be processed.
MISSING_VALUE	A field defined as mandatory for an endpoint has not been provided.
VALUE_IS_REQUIRED	A business rule defines a value as mandatory but it has not been provided.
REFERENCE_NOT_FOUND	A supplied reference could not be resolved to valid resource (e.g. a patient, clinician or an organisation).
DUPLICATE_FILENAME	A file being attached, matches another file being attached, or matches a file that is already linked.
CONFLICTING_VALUES	Two or more supplied values are contradictory.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 423

Locked - resource is locked

HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A028 - Record triage outcome
POST /STU3/ReferralRequest/{ubrn}/$ers.recordReviewOutcome
Try this API
Overview

Use this endpoint, as a service provider, to record a triage outcome for the following referrals awaiting review:

referrals sent into a triage service
referrals deferred into a directly bookable service because of appointment slot unavailability
Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

SERVICE_PROVIDER_CLINICIAN
SERVICE_PROVIDER_CLINICIAN_ADMIN

You need to use A008 - Retrieve referral worklist to retrieve the contents of the 'Referrals For Review' worklist. A028 - Record triage outcome can only be used for referrals sent into triage services, and not the referrals booked into bookable services.

You need to use A008 - Retrieve referral worklist to retrieve the contents of the 'Appointment Slot Issues' worklist. This provides a list of referrals that have been deferred into directly bookable services.

Referrals from this worklist may already have been reviewed or may not have any referral clinical information associated, in which case A028 - Record triage outcome cannot be used.
A028 - Record triage outcome can only be used for those referrals, on the 'Appointment Slot Issues' worklist, which are pending review.
As such, you need to use A029 - Available actions for user list to determine if A028 - Record triage outcome is a permissible action.

You need to use A005 - Retrieve referral request to retrieve the details for the referral.

You need to use A006 - Retrieve attachment to retrieve the clinical attachments for the referral.

You need to use A007 - Retrieve clinical information to retrieve the clinical information summary PDF for the referral.

If you want to include attachments with the triage outcome, you need to use A020 - Upload file to document store so they are ready to be associated when this endpoint is called.

Use cases

As an authenticated user

I need to return the referral back to the referrer with some advice

So that I can progress the patient's care appropriately with the referrer.

As an authenticated user

I need to accept the referral and task my admin team to shortlist appropriate services for the patient

So that I can progress the patient's care along the most appropriate referral pathway.

Important notes
The only outcomes that are supported by this endpoint are 'Return to referrer with advice' and 'Accept and refer/book later'. 'Refer/book now' is not supported.
The triage comment text is mandatory. This comment provided will be sent to:
The initial referrer when the 'Return to referrer with advice' triage outcome is chosen.
An administrator at the receiving service provider when the 'Accept and refer/book later' outcome is chosen.
The priority of the referral can be changed as part of recording the triage outcome
When this endpoint is successfully used for recording an outcome of 'Accept and refer/book later', an entry will be added to the service providers Appointments For Booking worklist for the admin team to action the task. The provider admin team will only be able to progress the referral via the e-RS Professional Application user interface (e.g. shortlisting appropriate services for the patient).
Request
Path parameters
Name	Description
ubrn	

String

The unique booking reference number of the referral request

Example: 000000070000

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

NHSD-eRS-On-Behalf-Of-User-ID	

String

The (SDS) user ID of the user that the authenticating user wishes to act on behalf of (OBO).

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Where an OBO User ID is supplied the authenticating user must be an SPCA and the OBO User ID must be that of an appropriate SPC.

Example: 021600556514


X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Body
Required

Content type: application/fhir+json

Examples

Return to referrer with advice

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-RecordReviewOutcome-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "reviewOutcome",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewOutcome-1",
      "code" : "RETURN_TO_REFERRER_WITH_ADVICE"
    }
  }, {
    "name" : "reviewComments",
    "valueString" : "Condition not serious. No further action needed"
  } ]
}

Accept refer book later

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-RecordReviewOutcome-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "reviewPriority",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
      "code" : "URGENT"
    }
  }, {
    "name" : "reviewOutcome",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewOutcome-1",
      "code" : "ACCEPT_REFER_BOOK_LATER"
    }
  }, {
    "name" : "reviewComments",
    "valueString" : "Urgent action needed. To be booked ASAP"
  } ]
}

Attachment included

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-RecordReviewOutcome-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "reviewOutcome",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewOutcome-1",
      "code" : "RETURN_TO_REFERRER_WITH_ADVICE"
    }
  }, {
    "name" : "reviewComments",
    "valueString" : "Condition not serious. See attached document"
  }, {
    "name" : "reviewAttachmentFile",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
      },
      "resourceType" : "DocumentReference",
      "type" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
          "code" : "PROVIDER"
        } ]
      },
      "status" : "current",
      "indexed" : "2021-10-07T15:00:41.239000+00:00",
      "description" : "Condition details",
      "content" : [ {
        "attachment" : {
          "url" : "Binary/att-70000-70001"
        }
      } ]
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-RecordReviewOutcome-Parameters


resourceType
string
required
	
Allowed values: Parameters


meta
object
required
	

parameter
array
required
	
Field	Cardinality	Notes
reviewOutcome	1..1	
reviewComments	1..1	
reviewPriority	0..1	
reviewAttachmentFile	0..*	
Response
HTTP status: 200

e-RS Referral Request

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


ETag	

String

Record version identifier enclosed in quotes and preceded by 'W/'. For example, W/"2".

This Weak ETag corresponds to meta.versionId attribute in the resource body.

Pattern: /^W\/"[0-9]+"$/

Example: W/"2"

Body

Content type: application/fhir+json

Examples

Return to referrer with advice

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "10",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-10-07T14:54:46.504000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "Routine"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11115"
        },
        "display" : "Triage Business Service 4"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "2",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "proposed",
    "reason" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewOutcome-1",
        "code" : "RETURN_TO_REFERRER_WITH_ADVICE",
        "display" : "Return to Referrer With Advice"
      } ]
    } ],
    "description" : "e-Referral Appointment",
    "created" : "2021-10-07T14:54:45.311000+00:00",
    "comment" : "Condition not serious. No further action needed",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070000/_history/10"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11115"
        },
        "display" : "Triage Business Service 4"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "1000000001"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-70000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-10-07T14:54:48.911000+00:00",
    "description" : "upload png",
    "content" : [ {
      "attachment" : {
        "id" : "70000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "103264992985"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70000-70000",
        "size" : 6,
        "title" : "upload.png",
        "creation" : "2021-10-07"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "1000000001"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-70000"
  } ],
  "intent" : "plan"
}

Accept refer book later

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "10",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-10-07T15:00:18.561000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "URGENT",
        "display" : "Urgent"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11010"
        },
        "display" : "Excellent Cardiology Business Service"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "2",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "proposed",
    "reason" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewOutcome-1",
        "code" : "ACCEPT_REFER_BOOK_LATER",
        "display" : "Accept Refer Book Later"
      } ]
    } ],
    "description" : "e-Referral Appointment",
    "created" : "2021-10-07T15:00:19.711000+00:00",
    "comment" : "Urgent action needed. To be booked ASAP",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070000/_history/10"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11010"
        },
        "display" : "Excellent Cardiology Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "1000000001"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-70000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-10-07T15:00:44.338000+00:00",
    "description" : "upload png",
    "content" : [ {
      "attachment" : {
        "id" : "70000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "103264992985"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70000-70000",
        "size" : 6,
        "title" : "upload.png",
        "creation" : "2021-10-07"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "1000000001"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-70000"
  } ],
  "intent" : "plan"
}

Attachment included

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "10",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
    "valueReference" : {
      "reference" : "#appointment"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ClinicalInfoFirstSubmitted-1",
    "valueDateTime" : "2021-10-07T15:00:18.561000+00:00"
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE",
        "display" : "ROUTINE"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "ROUTINE"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "postcode",
      "valueString" : "LS1 2TW"
    }, {
      "name" : "distanceLimit",
      "valueUnsignedInt" : 123
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : true
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11010"
        },
        "display" : "Excellent Cardiology Business Service"
      }
    } ]
  }, {
    "id" : "appointment",
    "meta" : {
      "versionId" : "2",
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
    },
    "language" : "en",
    "resourceType" : "Appointment",
    "status" : "proposed",
    "reason" : [ {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewOutcome-1",
        "code" : "ACCEPT_REFER_BOOK_LATER",
        "display" : "Accept Refer Book Later"
      } ]
    } ],
    "description" : "e-Referral Appointment",
    "created" : "2021-10-07T15:00:19.711000+00:00",
    "comment" : "Comment Is Mandatory",
    "incomingReferral" : [ {
      "reference" : "ReferralRequest/000000070000/_history/10"
    } ],
    "participant" : [ {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11010"
        },
        "display" : "Excellent Cardiology Business Service"
      },
      "status" : "accepted"
    }, {
      "actor" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "1000000001"
        }
      },
      "status" : "accepted"
    } ]
  }, {
    "id" : "DocumentReference-70000",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "REFERRER",
        "display" : "Referrer"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-10-07T15:00:44.338000+00:00",
    "description" : "upload png",
    "content" : [ {
      "attachment" : {
        "id" : "70000",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "103264992985"
            }
          }
        } ],
        "contentType" : "image/png",
        "url" : "Binary/att-70000-70000",
        "size" : 6,
        "title" : "upload.png",
        "creation" : "2021-10-07"
      }
    } ]
  }, {
    "id" : "DocumentReference-70001",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-DocumentReference-1" ]
    },
    "resourceType" : "DocumentReference",
    "type" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AttachmentType-1",
        "code" : "PROVIDER",
        "display" : "Provider"
      } ]
    },
    "status" : "current",
    "indexed" : "2021-10-07T15:00:41.239000+00:00",
    "description" : "Condition details",
    "content" : [ {
      "attachment" : {
        "id" : "70001",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-AttachedBy-1",
          "valueReference" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/sds-user-id",
              "value" : "021600556514"
            }
          }
        } ],
        "contentType" : "application/pdf",
        "url" : "Binary/att-70000-70001",
        "size" : 17,
        "title" : "ConditionDetails.pdf",
        "creation" : "2021-10-07"
      }
    } ]
  } ],
  "status" : "active",
  "specialty" : {
    "coding" : [ {
      "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
      "code" : "CARDIOLOGY",
      "display" : "Cardiology"
    } ]
  },
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "1000000001"
    }
  },
  "supportingInfo" : [ {
    "reference" : "#DocumentReference-70001"
  }, {
    "reference" : "#DocumentReference-70000"
  } ],
  "intent" : "plan"
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-ReferralRequest


id
string
required
	
Example: 000000070000


meta
object
required
	

resourceType
string
required
	
Allowed values: ReferralRequest


contained
array
nullable
required
	
Field	Cardinality	Notes
eRS-Shortlist-List	1..1	
eRS-ServiceSearchCriteria-Parameters	1..1	
eRS-Appointment	0..1	
DocumentReference	0..*	


extension
array
nullable
required
	
Field	Cardinality	Notes
Extension-eRS-ReferralShortlist	1..1	
Extension-eRS-Commissioning-Rule-Org	1..1	
Extension-eRS-ReferralPriority	1..1	
Extension-eRS-Appointment	0..1	
Extension-eRS-ClinicalInfoFirstSubmitted	0..1	
Extension-eRS-ClinicalInfoLastUpdated	0..1	


status
string
required
	
Allowed values: active, completed


subject
object
required
	

supportingInfo
array
nullable
required
	

intent
string
required
	
Allowed values: plan
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 409

Conflict - Version supplied as part of the request does not match current version of the referral request

HTTP status: 415

Unsupported Media Type

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
PRIORITY_NOT_CURRENT	'Review Priority' value cannot be amended if Review Outcome value is RETURN_TO_REFERRER_WITH_ADVICE
VALUE_IS_REQUIRED	A business rule defines a value as mandatory but it has not been provided.
INVALID_CODE	The input provided for a field is not one of the defined legal values.
INVALID_VALUE	The input provided does not conform to the expected data types and format.
INVALID_STATE	Indicates that the referenced item is not in the correct state for the request to be processed.
INAPPROPRIATE_VALUE	A value, which is acceptable under different conditions, is inappropriate in the context of the other information provided.
MISSING_VALUE	A field defined as mandatory for an endpoint has not been provided.
INVALID_REQUEST_STATE	The Request, while otherwise valid, is not in the correct state for the specific action being performed.
INVALID_REQUEST_TYPE	The UBRN provided exists in e-RS but does not correspond to an active request.
REFERENCE_NOT_FOUND	A supplied reference could not be resolved to valid resource (e.g. a patient, clinician or an organisation).
DUPLICATE_FILENAME	A file being attached, matches another file being attached, or matches a file that is already linked.
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 423

Locked - resource is locked

HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A029 - Available actions for user list
GET /STU3/Task
Try this API
Overview

This endpoint allows an authenticated e-RS user to check ahead of of performing an action, whether or not the action is permitted. This endpoint performs a search for available and supported actions that can be currently performed, by the the current e-RS user on a specific referral. When a permitted action is returned, the e-RS user could immediately attempt to perform a permitted action.

You SHOULD NOT cache the list of available user actions returned because this endpoint gives the current actions for the current e-RS user, for the referral in context and is therefore, transient; a future call for a different e-RS user, referral, or at a different point in time, might result in a different set of actions, leading to potential failure flows.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

SERVICE_PROVIDER_CLINICIAN
SERVICE_PROVIDER_CLINICIAN_ADMIN
REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN

You should obtain a Unique Booking Reference Number (UBRN) before using this endpoint, as the current UBRN version is required

Use case

As an authenticated user

I want to know what actions I might currently perform on a referral prior to attempting to do so

So that I can review my options, and do not try to persist a prohibited action

Related endpoints

To retrieve pertinent details relating to a referral:

Use A005 - Retrieve referral request to retrieve the details of the referral, UBRN and UBRN version.
Below is a list of actions that could be returned by calling A029 - Available actions for user list
Use A028 - Record triage outcome to record a review outcome based on the available clinical information and attachments.
Use A016 - Book or defer appointment to Book, or if unable, Defer, an appointment to a specific service on the current shortlist.
Sandbox test scenarios

You can test the following scenarios in our sandbox environment

Scenario	Request
"Record Review Outcome" is available	focus=ReferralRequest/000000070000/_history/6, intent=proposal, status=ready
"Create Appointment" is available	focus=ReferralRequest/000000070001/_history/6, intent=proposal, status=ready
"Change Shortlist" is available	focus=ReferralRequest/000000070002/_history/6, intent=proposal, status=ready
"Change Shortlist and Send for Triage" is available	focus=ReferralRequest/000000070003/_history/6, intent=proposal, status=ready
No "action" is available	focus=ReferralRequest/000000070004/_history/6, intent=proposal, status=ready
Request
Query parameters
Name	Description
focus	

String

The component describing the ReferralRequest for which the task list is requested for.

Pattern:

ReferralRequest/{ubrn}/_history/{version}

The ubrn represents the unique booking reference number of the referral request
The version is the version of the referral request (only the most current version will be accepted)

Example: ReferralRequest/000000070000/_history/6

Required

intent	

String

Value must be set to proposal

Allowed values: proposal

Required

status	

String

The status of the task, value must be set to ready

Allowed values: ready

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

NHSD-eRS-On-Behalf-Of-User-ID	

String

The (SDS) user ID of the user that the authenticating user wishes to act on behalf of (OBO).

"On behalf of" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).

Where an OBO User ID is supplied the authenticating user must be an SPCA and the OBO User ID must be that of an appropriate SPC.

Example: 021600556514


X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Response
HTTP status: 200

Bundle containing list of available tasks

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Examples

With Record Review Outcome

Copy
{
  "id" : "604dc1ea-986c-45ec-b36c-cf9d2fabc5c0",
  "meta" : {
    "lastUpdated" : "2021-11-01T11:05:40.046000+00:00",
    "profile" : [ "http://hl7.org/fhir/STU3/StructureDefinition/Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/STU3/Task?focus=ReferralRequest/000000070000/_history/6&intent=proposal&status=ready"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/STU3/STU3/v1/Task/ed4dff57-503c-46ef-9084-4045a23f4c2a",
    "resource" : {
      "id" : "ed4dff57-503c-46ef-9084-4045a23f4c2a",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Task-1" ]
      },
      "resourceType" : "Task",
      "status" : "ready",
      "intent" : "proposal",
      "focus" : {
        "reference" : "ReferralRequest/000000070000/_history/6"
      },
      "code" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AvailableActionsForUser-1",
          "code" : "RECORD_REVIEW_OUTCOME",
          "display" : "Record Review Outcome"
        } ]
      }
    },
    "search" : {
      "mode" : "match"
    }
  } ]
}

With Create Appointment

Copy
{
  "id" : "604dc1ea-986c-45ec-b36c-cf9d2fabc5c0",
  "meta" : {
    "lastUpdated" : "2021-11-01T11:05:40.046000+00:00",
    "profile" : [ "http://hl7.org/fhir/STU3/StructureDefinition/Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/STU3/Task?focus=ReferralRequest/000000070001/_history/6&intent=proposal&status=ready"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/STU3/STU3/v1/Task/ed4dff57-503c-46ef-9084-4045a23f4c2a",
    "resource" : {
      "id" : "ed4dff57-503c-46ef-9084-4045a23f4c2a",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Task-1" ]
      },
      "resourceType" : "Task",
      "status" : "ready",
      "intent" : "proposal",
      "focus" : {
        "reference" : "ReferralRequest/000000070001/_history/6"
      },
      "code" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AvailableActionsForUser-1",
          "code" : "CREATE_APPOINTMENT",
          "display" : "Create Appointment"
        } ]
      }
    },
    "search" : {
      "mode" : "match"
    }
  } ]
}

With Change Shortlist

Copy
{
  "id" : "604dc1ea-986c-45ec-b36c-cf9d2fabc5c0",
  "meta" : {
    "lastUpdated" : "2021-11-01T11:05:40.046000+00:00",
    "profile" : [ "http://hl7.org/fhir/STU3/StructureDefinition/Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/STU3/Task?focus=ReferralRequest/000000070002/_history/6&intent=proposal&status=ready"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/STU3/STU3/v1/Task/ed4dff57-503c-46ef-9084-4045a23f4c2a",
    "resource" : {
      "id" : "ed4dff57-503c-46ef-9084-4045a23f4c2a",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Task-1" ]
      },
      "resourceType" : "Task",
      "status" : "ready",
      "intent" : "proposal",
      "focus" : {
        "reference" : "ReferralRequest/000000070002/_history/6"
      },
      "code" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AvailableActionsForUser-1",
          "code" : "CHANGE_SHORTLIST",
          "display" : "Change Shortlist"
        } ]
      }
    },
    "search" : {
      "mode" : "match"
    }
  } ]
}

With Change Shortlist and Send for Triage

Copy
{
  "id" : "604dc1ea-986c-45ec-b36c-cf9d2fabc5c0",
  "meta" : {
    "lastUpdated" : "2021-11-01T11:05:40.046000+00:00",
    "profile" : [ "http://hl7.org/fhir/STU3/StructureDefinition/Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/STU3/Task?focus=ReferralRequest/000000070003/_history/6&intent=proposal&status=ready"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/STU3/STU3/v1/Task/ed4dff57-503c-46ef-9084-4045a23f4c2a",
    "resource" : {
      "id" : "ed4dff57-503c-46ef-9084-4045a23f4c2a",
      "meta" : {
        "profile" : [ "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Task-1" ]
      },
      "resourceType" : "Task",
      "status" : "ready",
      "intent" : "proposal",
      "focus" : {
        "reference" : "ReferralRequest/000000070003/_history/6"
      },
      "code" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-AvailableActionsForUser-1",
          "code" : "CHANGE_SHORTLIST_AND_SEND_FOR_TRIAGE",
          "display" : "Change Shortlist and Send for Triage"
        } ]
      }
    },
    "search" : {
      "mode" : "match"
    }
  } ]
}

Empty

Copy
{
  "id" : "234a9168-a72f-4969-b611-d1b64426d18e",
  "meta" : {
    "lastUpdated" : "2021-11-01T16:08:05.484000+00:00",
    "profile" : [ "http://hl7.org/fhir/STU3/StructureDefinition/Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/STU3/Task?focus=ReferralRequest/000000070004/_history/6&intent=proposal&status=ready"
  } ],
  "entry" : [ ]
}
Schema
Collapse all Expand all
Name	Description

object
	
Bundle resource containing tasks


id
string
required
	
Example: 604dc1ea-986c-45ec-b36c-cf9d2fabc5c0


meta
object
required
	

resourceType
string
required
	
Allowed values: Bundle


type
string
required
	
Allowed values: searchset


link
array
required
	
Max items: 1
Min items: 1


entry
array
required
	
Field	Cardinality	Notes
CareConnect-Task	0..*	
HTTP status: 400

Where status code 400 (Bad Request) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
INVALID_VALUE	The input provided does not conform to the expected data types and format.
MISSING_PARAMETER	Indicates missing mandatory FHIR search parameter.
HISTORY_NOT_SUPPORTED	Only the current version of the UBRN is permissible
REFERENCE_NOT_FOUND	A supplied reference could not be resolved to valid resource (e.g. a patient, clinician or an organisation).
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A030 - Retrieve e-RS business functions
GET /R4/PractitionerRole
Try this API
Overview

Use this endpoint to retrieve a list of available e-RS roles (i.e. business functions) at each organisation where the user works.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated user

Use case

As an authenticated user

I need to retrieve a list of authorised e-RS roles for organisations I work for

So I can choose the appropriate role and organisation to work under when performing tasks.

Related endpoints

You can then use the e-RS roles to perform specific tasks using other e-RS endpoints e.g. to satisfy Role and Organisation validation.

Role and Organisation Validation

The response from a successful call to A030 - Retrieve e-RS business functions represents a Practitioner Role Bundle. Each Practitioner Role represents an e-RS Role at a specific Organisation.

For most e-RS endpoints requests are made in the context of a specific authorised e-RS Role at a specific Organisation for the authenticated user. This is accomplished by setting the values of the nhsd-ers-business-function and nhsd-ers-ods-code request headers.

The e-RS Role is supplied to the endpoint via the nhsd-ers-business-function request header.

The Organisation is supplied to the endpoint via the nhsd-ers-ods-code request header.

The entry field in the response from A030 - Retrieve e-RS business functions is an array of PractitionerRole resources. An example of a PractitionerRole resource is:

JSON

Copy
"resource": {
  "id": "PractitionerRole-R69-000000000101",
  "meta": {
    "lastUpdated": "2021-05-24T16:09:32.252Z",
    "profile": [
      "https://fhir.hl7.org.uk/StructureDefinition/UKCore-PractitionerRole"
    ]
  },
  "resourceType": "PractitionerRole",
  "practitioner": {
    "identifier": {
      "system": "https://fhir.nhs.uk/Id/sds-user-id",
      "value": "000000000101"
    }
  },
  "organization": {
    "identifier": {
      "system": "https://fhir.nhs.uk/Id/ods-organization-code",
      "value": "R69"
    }
  },
  "code": [
    {
      "coding": [
        {
          "system": "https://fhir.nhs.uk/CodeSystem/eRS-BusinessFunction-1",
          "code": "SERVICE_DEFINER"
        }
      ]
    },
    {
      "coding": [
        {
          "system": "https://fhir.nhs.uk/CodeSystem/eRS-BusinessFunction-1",
          "code": "SERVICE_PROVIDER_CLINICIAN"
        }
      ]
    },
    {
      "coding": [
        {
          "system": "https://fhir.nhs.uk/CodeSystem/eRS-BusinessFunction-1",
          "code": "SERVICE_PROVIDER_ADMIN"
        }
      ]
    }
  ]
},


Each PractitionerRole resource has a code field which is an array of codings. The authorised e-RS Roles for the authenticated user at a particilar Organisation are represented by the value fields in the https://fhir.nhs.uk/CodeSystem/eRS-BusinessFunction-1 code system. The nhsd-ers-business-function request header value should be the code field value from the relevant eRS-Business-Function-1 coding in the PractitionerRole resource e.g. SERVICE_PROVIDER_CLINICIAN.

Each PractitionerRole resource also has an organization field which has an identifier in the https://fhir.nhs.uk/Id/ods-organization-code code system. The nhsd-ers-ods-code request header value should be the value field value from the organization identifier in the PractitionerRole resource e.g. "R69".

Request
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Response
HTTP status: 200

The response body is a Bundle that contains PractitionerRole entries which define the e-RS Business Functions that the user has available at each Organisation where they have a role.

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Example response body

Copy
{
  "id" : "85ca4b21-c327-47c1-9594-69dfc500ea7c",
  "meta" : {
    "lastUpdated" : "2021-05-24T16:09:32.252000+00:00",
    "profile" : [ "https://fhir.hl7.org.uk/StructureDefinition/UKCore-Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "total" : 2,
  "timestamp" : "2021-05-24T16:09:32.252000+00:00",
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/R4/PractitionerRole"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/R4/PractitionerRole/PractitionerRole-R69-000000000101",
    "resource" : {
      "id" : "PractitionerRole-R69-000000000101",
      "meta" : {
        "lastUpdated" : "2021-05-24T16:09:32.252000+00:00",
        "profile" : [ "https://fhir.hl7.org.uk/StructureDefinition/UKCore-PractitionerRole" ]
      },
      "resourceType" : "PractitionerRole",
      "practitioner" : {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/sds-user-id",
          "value" : "000000000101"
        }
      },
      "organization" : {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R69"
        }
      },
      "code" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/CodeSystem/eRS-BusinessFunction-1",
          "code" : "SERVICE_DEFINER"
        } ]
      }, {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/CodeSystem/eRS-BusinessFunction-1",
          "code" : "SERVICE_PROVIDER_CLINICIAN"
        } ]
      }, {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/CodeSystem/eRS-BusinessFunction-1",
          "code" : "SERVICE_PROVIDER_ADMIN"
        } ]
      } ]
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/R4/PractitionerRole/PractitionerRole-R68-000000000101",
    "resource" : {
      "id" : "PractitionerRole-R68-000000000101",
      "meta" : {
        "lastUpdated" : "2021-05-24T16:09:32.252000+00:00",
        "profile" : [ "https://fhir.hl7.org.uk/StructureDefinition/UKCore-PractitionerRole" ]
      },
      "resourceType" : "PractitionerRole",
      "practitioner" : {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/sds-user-id",
          "value" : "000000000101"
        }
      },
      "organization" : {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R68"
        }
      },
      "code" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/CodeSystem/eRS-BusinessFunction-1",
          "code" : "REFERRING_CLINICIAN"
        } ]
      } ]
    },
    "search" : {
      "mode" : "match"
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
Bundle resource containing practitioner roles


id
string
required
	
Example: 08acc887-6a7b-4b38-8f50-022e41319efe


meta
object
required
	

resourceType
string
required
	
Allowed values: Bundle


type
string
required
	
Allowed values: searchset


total
integer int32
required
	
Minimum: 0 (inclusive)
Example: 1


link
array
required
	
Max items: 1
Min items: 1


entry
array
required
	
HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 406

Not Acceptable

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A031 - Change Shortlist
POST /STU3/ReferralRequest/{ubrn}/$ers.changeShortlist
Try this API
Overview

Use this endpoint to change the shortlist of bookable services on an existing referral.

Please note: this endpoint cannot be used to shortlist triage services. In order to make use of triage services please use A032 - Change Shortlist and Send for Triage.

A patient can request assistance at a service (e.g. a translator, transport or advocacy) when a shortlist is created within the e-RS web application, meaning that all services shortlisted would support the patient's additional requirements to attend.

The e-RS API's do not currently support patients' additional requirements so you can neither specify services that support patients' additional requirements, view existing additional requirements for a patient, nor arrange additional requirements for a patient.

If you do not know whether the patient has an existing additional requirement need and the referral may have been shortlisted within the e-RS web application, be mindful that if you chose to amend the shortlist via changing the services, you could remove this patient need.

If you are changing services to send the patient to a triage service, the triaging service will not support additional requirements but will need to consider if the patient has any additional requirements as part of their decision for future care.

You can view additional requirements on a referral via the e-RS web application.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN

You need to use the Unique Booking Reference Number (UBRN) of a referral request in order to use this endpoint.

You need to have found services that meet the referral needs of a patient using A010 - Patient service search.

Use case

As an authenticated user

I need to change the shortlist of bookable services on an existing referral

So that I can adequately manage my patients referral pathway, allowing the patient to book into an appropriate service.

Related endpoints

To allow the patient to book their appointment in their own time, you can generate a letter for the patient by using A019 - Generate patient letter. The letter summarises the current state of the referral and any steps the patient may need to follow (e.g. appointment booking instructions).

You can book an appointment for the patient by using A015 - Retrieve appointment slots and A016 - Book or defer appointment.

For the referral to be processed by the service provider, you must ensure appropriate referral letter information has been added to the referral. You can add/manage referrer letter information by using A012 - Maintain referral letter.

You can check to see what referral letter information has already been added to a referral by using A005 - Retrieve referral request, A007 - Retrieve clinical information, and A006 - Retrieve attachment endpoints where necessary.

Request
Path parameters
Name	Description
ubrn	

String

The unique booking reference number of the referral request

Example: 000000070000

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


If-Match	

String

The version of the resource to be updated

Pattern: /^W\/"[0-9]+"$/

Example: W/"4"

Required
Body
Required

Content type: application/fhir+json

Examples

Unbooked ReferralRequest

Changing the shortlist of an unbooked ReferralRequest (single service shortlist)

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ChangeShortlist-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "shortlist",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
      },
      "resourceType" : "List",
      "status" : "current",
      "mode" : "snapshot",
      "contained" : [ {
        "resourceType" : "Parameters",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
        },
        "id" : "ServiceSearchCriteria-1",
        "parameter" : [ {
          "name" : "priority",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "URGENT"
          }
        }, {
          "name" : "specialty",
          "valueCoding" : {
            "system" : "_baseUrl_/STU3/v1/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          }
        }, {
          "name" : "clinicType",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
            "code" : "HEART_FAILURE"
          }
        }, {
          "name" : "commissioningProvisioning",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
            "code" : "ALL_AVAILABLE_FOR_BOOKING"
          }
        }, {
          "name" : "ageAndGenderAppropriate",
          "valueBoolean" : false
        } ]
      } ],
      "entry" : [ {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "11002"
          }
        }
      } ],
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
        "valueReference" : {
          "reference" : "#ServiceSearchCriteria-1"
        }
      } ]
    }
  }, {
    "name" : "intentionToAddReferralLetter",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralLetterIntention-1",
      "code" : "NEED_TO_ADD_LATER"
    }
  }, {
    "name" : "firstReminderLetterFollowUpDays",
    "valueUnsignedInt" : 0
  } ]
}

Unbooked ReferralRequest with Multiple Services

Changing the shortlist of an unbooked ReferralRequest (multiple services shortlist)

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ChangeShortlist-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "shortlist",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
      },
      "resourceType" : "List",
      "status" : "current",
      "mode" : "snapshot",
      "contained" : [ {
        "resourceType" : "Parameters",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
        },
        "id" : "ServiceSearchCriteria-1",
        "parameter" : [ {
          "name" : "priority",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "URGENT"
          }
        }, {
          "name" : "specialty",
          "valueCoding" : {
            "system" : "_baseUrl_/STU3/v1/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          }
        }, {
          "name" : "clinicType",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
            "code" : "HEART_FAILURE"
          }
        }, {
          "name" : "commissioningProvisioning",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
            "code" : "ALL_AVAILABLE_FOR_BOOKING"
          }
        }, {
          "name" : "ageAndGenderAppropriate",
          "valueBoolean" : false
        } ]
      } ],
      "entry" : [ {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "11000"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "11001"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "11002"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "11003"
          }
        }
      }, {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "11008"
          }
        }
      } ],
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
        "valueReference" : {
          "reference" : "#ServiceSearchCriteria-1"
        }
      } ]
    }
  }, {
    "name" : "intentionToAddReferralLetter",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralLetterIntention-1",
      "code" : "NEED_TO_ADD_LATER"
    }
  }, {
    "name" : "firstReminderLetterFollowUpDays",
    "valueUnsignedInt" : 0
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-ChangeShortlist-Parameters

Parameters provided when looking to change the services a referral has currently shortlisted



resourceType
string
required
	
Allowed values: Parameters


meta
object
required
	

parameter
array
required
	
Field	Cardinality	Notes
Shortlist	1..1	Shortlist indicating the new services a referral should have shortlisted
IntentionToAddReferralLetter	1..1	Flag indicating whether a referral letter is going to be added later or is already added
FirstReminderLetterFollowUpDays	1..1	Time at which a reminder should be sent to remind the patient about the referral
Response
HTTP status: 200

Referral updated with new service list

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


ETag	

String

Record version identifier enclosed in quotes and preceded by 'W/'. For example, W/"2".

This Weak ETag corresponds to meta.versionId attribute in the resource body.

Pattern: /^W\/"[0-9]+"$/

Example: W/"2"

Body

Content type: application/fhir+json

Examples

Unbooked ReferralRequest

Changing the shortlist of an unbooked ReferralRequest (single service shortlist)

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "3",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "URGENT",
        "display" : "Urgent"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "URGENT"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/v1/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : false
    }, {
      "name" : "commissioningProvisioning",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
        "code" : "ALL_AVAILABLE_FOR_BOOKING"
      }
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service"
      }
    } ]
  } ],
  "status" : "active",
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ ],
  "intent" : "plan"
}

Unbooked ReferralRequest with Multiple Services

Changing the shortlist of an unbooked ReferralRequest (multiple services shortlist)

Copy
{
  "id" : "000000070000",
  "meta" : {
    "versionId" : "3",
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
  },
  "resourceType" : "ReferralRequest",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
    "valueCodeableConcept" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "URGENT",
        "display" : "Urgent"
      } ]
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
    "valueReference" : {
      "reference" : "#shortlist"
    }
  }, {
    "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
    "valueIdentifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
      "value" : "R69"
    }
  } ],
  "contained" : [ {
    "id" : "serviceSearchCriteria",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
    },
    "resourceType" : "Parameters",
    "parameter" : [ {
      "name" : "priority",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
        "code" : "URGENT"
      }
    }, {
      "name" : "specialty",
      "valueCoding" : {
        "system" : "_baseUrl_/STU3/v1/CodeSystem/SPECIALTY",
        "code" : "CARDIOLOGY"
      }
    }, {
      "name" : "clinicType",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
        "code" : "HEART_FAILURE"
      }
    }, {
      "name" : "ageAndGenderAppropriate",
      "valueBoolean" : false
    }, {
      "name" : "commissioningProvisioning",
      "valueCoding" : {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
        "code" : "ALL_AVAILABLE_FOR_BOOKING"
      }
    } ]
  }, {
    "id" : "shortlist",
    "meta" : {
      "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
    },
    "resourceType" : "List",
    "extension" : [ {
      "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
      "valueReference" : {
        "reference" : "#serviceSearchCriteria"
      }
    } ],
    "status" : "current",
    "mode" : "snapshot",
    "entry" : [ {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11000"
        },
        "display" : "Good Cardiology Business Service 1"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11001"
        },
        "display" : "Good Cardiology Business Service 2"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11002"
        },
        "display" : "Good Cardiology Business Service 3"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11003"
        },
        "display" : "Good Cardiology Business Service 4"
      }
    }, {
      "item" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/ers-service",
          "value" : "11008"
        },
        "display" : "Good Cardiology Business Service 5"
      }
    } ]
  } ],
  "status" : "active",
  "subject" : {
    "identifier" : {
      "system" : "http://fhir.nhs.net/Id/nhs-number",
      "value" : "9912003888"
    }
  },
  "supportingInfo" : [ ],
  "intent" : "plan"
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-ReferralRequest


id
string
required
	
Example: 000000070000


meta
object
required
	

resourceType
string
required
	
Allowed values: ReferralRequest


contained
array
nullable
required
	
Field	Cardinality	Notes
eRS-Shortlist-List	1..1	
eRS-ServiceSearchCriteria-Parameters	1..1	
eRS-Appointment	0..1	
DocumentReference	0..*	


extension
array
nullable
required
	
Field	Cardinality	Notes
Extension-eRS-ReferralShortlist	1..1	
Extension-eRS-Commissioning-Rule-Org	1..1	
Extension-eRS-ReferralPriority	1..1	
Extension-eRS-Appointment	0..1	
Extension-eRS-ClinicalInfoFirstSubmitted	0..1	
Extension-eRS-ClinicalInfoLastUpdated	0..1	


status
string
required
	
Allowed values: active, completed


subject
object
required
	

supportingInfo
array
nullable
required
	

intent
string
required
	
Allowed values: plan
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 409

Conflict - Version supplied as part of the request does not match current version of the referral request

HTTP status: 415

Unsupported Media Type

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostic property for specific information regarding the error.

Error code	Description
INAPPROPRIATE_VALUE	A value, which is acceptable under different conditions, is inappropriate in the context of the other information provided.
TOO_MANY_ITEMS	In a list where a maximum number of items is specified (e.g. a Shortlist), too many entries are supplied.
MISSING_VALUE	A field defined as mandatory for an endpoint has not been provided.
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
INVALID_VALUE	The input provided does not conform to the expected data types and format.
INVALID_CODE	The input provided for a field is not one of the defined legal values.
UNEXPECTED_FIELD	A field is provided that is not expected as part of the request. E.g. a field is mis-spelt, was defined on a previous version of the endpoint but has subsequently been removed.
INVALID_FHIR_STRUCTURE	The FHIR data structure in the message body does not match the expected structure (e.g. an array is present for a value when no array is expected).
ORGANISATION_IS_CLOSED	The organisation supplied corresponds to an organisation that is closed.
ORGANISATION_NOT_APPROPRIATE	The organisation supplied corresponds to an organisation that is not valid for the given request.
DUPLICATE_SERVICE	Unique service value expected.
SHORTLISTED_SERVICE_NOT_IN_RESULTS	The service selected for the shortlist submitted does not satisfy the search criteria provided.
SNOMED_NOT_FOUND	A SNOMED code, while potentially valid in the latest version of the international dictionary, is not found in the e-RS dictionary.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
INVALID_REQUEST_TYPE	The UBRN provided exists in e-RS but does not correspond to an active request.
INVALID_REQUEST_STATE	The Request, while otherwise valid, is not in the correct state for the specific action being performed.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 423

Locked - resource is locked

HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A032 - Change Shortlist and Send for Triage
POST /STU3/ReferralRequest/{ubrn}/$ers.changeShortlistAndSendForTriage
Try this API
Overview

Use this endpoint to change the shortlist to a single triage service and refer the patient directly to that triage service.

Please note: this endpoint cannot be used to shortlist bookable services. In order to shortlist bookable services on an existing referral please use A031 - Change Shortlist.

A patient can request assistance at a service (e.g. a translator, transport or advocacy) when a shortlist is created within the e-RS web application, meaning that all services shortlisted would support the patient's additional requirements to attend.

The e-RS API's do not currently support patients' additional requirements so you can neither specify services that support patients' additional requirements, view existing additional requirements for a patient, nor arrange additional requirements for a patient.

If you do not know whether the patient has an existing additional requirement need and the referral may have been shortlisted within the e-RS web application, be mindful that if you chose to amend the shortlist via changing the services, you could remove this patient need.

If you are changing services to send the patient to a triage service, the triaging service will not support additional requirements but will need to consider if the patient has any additional requirements as part of their decision for future care.

You can view additional requirements on a referral via the e-RS web application.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN

You need to use the Unique Booking Reference Number (UBRN) of a referral request in order to use this endpoint.

You need to have found services that meet the referral needs of a patient using A010 - Patient service search.

Use case

As an authenticated user

I need to change the shortlist and refer the patient to a triage service for assessment

So that I can put the patient on the appropriate clinical pathway for the chosen service provider.

Related endpoints

For the referral to be processed by the service provider, you must ensure appropriate referral letter information has been added to the referral. You can add/manage referrer letter information by using A012 - Maintain referral letter.

You can check to see what referral letter information has already been added to a referral by using A005 - Retrieve referral request, A006 - Retrieve attachment, and A007 - Retrieve clinical information endpoints where necessary.

Request
Path parameters
Name	Description
ubrn	

String

The unique booking reference number of the referral request

Example: 000000070000

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


If-Match	

String

The version of the resource to be updated

Pattern: /^W\/"[0-9]+"$/

Example: W/"4"

Required
Body
Required

Content type: application/fhir+json

Example

Unbooked ReferralRequest

Changing the service list of an unbooked ReferralRequest and sending to Triage

Copy
{
  "resourceType" : "Parameters",
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ChangeShortlistAndSendForTriage-Request-Parameters-1" ]
  },
  "parameter" : [ {
    "name" : "shortlist",
    "resource" : {
      "meta" : {
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
      },
      "resourceType" : "List",
      "status" : "current",
      "mode" : "snapshot",
      "contained" : [ {
        "resourceType" : "Parameters",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
        },
        "id" : "ServiceSearchCriteria-1",
        "parameter" : [ {
          "name" : "priority",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          }
        }, {
          "name" : "specialty",
          "valueCoding" : {
            "system" : "_baseUrl_/STU3/v1/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          }
        }, {
          "name" : "clinicType",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
            "code" : "HEART_FAILURE"
          }
        }, {
          "name" : "commissioningProvisioning",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
            "code" : "ALL_AVAILABLE_FOR_BOOKING"
          }
        }, {
          "name" : "ageAndGenderAppropriate",
          "valueBoolean" : false
        } ]
      } ],
      "entry" : [ {
        "item" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "11004"
          }
        }
      } ],
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
        "valueReference" : {
          "reference" : "#ServiceSearchCriteria-1"
        }
      } ]
    }
  }, {
    "name" : "intentionToAddReferralLetter",
    "valueCoding" : {
      "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReferralLetterIntention-1",
      "code" : "NEED_TO_ADD_LATER"
    }
  }, {
    "name" : "firstReminderLetterFollowUpDays",
    "valueUnsignedInt" : 0
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-ChangeShortlistAndSendForTriage-Request-Parameters

Parameters provided when looking to change the services a referral has currently shortlisted



resourceType
string
required
	
Allowed values: Parameters


meta
object
required
	

parameter
array
required
	
Field	Cardinality	Notes
Shortlist	1..1	Shortlist indicating the new service a referral should have shortlisted
IntentionToAddReferralLetter	1..1	Flag indicating whether a referral letter is going to be added later or is already added
FirstReminderLetterFollowUpDays	1..1	Time at which a reminder should be sent to remind the patient about the referral
Response
HTTP status: 200

Referral updated with new service and sent for Triage

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


ETag	

String

Record version identifier enclosed in quotes and preceded by 'W/'. For example, W/"2".

This Weak ETag corresponds to meta.versionId attribute in the resource body.

Pattern: /^W\/"[0-9]+"$/

Example: W/"2"

Body

Content type: application/fhir+json

Example

TriagedReferralRequest

Changing the service list of an unbooked ReferralRequest and send for Triage

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ChangeShortlistAndSendForTriage-Response-Parameters-1" ]
  },
  "resourceType" : "Parameters",
  "parameter" : [ {
    "name" : "updatedReferralRequest",
    "resource" : {
      "id" : "000000070000",
      "meta" : {
        "versionId" : "3",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ReferralRequest-1" ]
      },
      "resourceType" : "ReferralRequest",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Appointment-1",
        "valueReference" : {
          "reference" : "#appointment"
        }
      }, {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralPriority-1",
        "valueCodeableConcept" : {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE",
            "display" : "Routine"
          } ]
        }
      }, {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-ReferralShortlist-1",
        "valueReference" : {
          "reference" : "#shortlist"
        }
      }, {
        "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Commissioning-Rule-Org-1",
        "valueIdentifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-organization-code",
          "value" : "R69"
        }
      } ],
      "contained" : [ {
        "id" : "serviceSearchCriteria",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-ServiceSearchCriteria-Parameters-1" ]
        },
        "resourceType" : "Parameters",
        "parameter" : [ {
          "name" : "priority",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-Priority-1",
            "code" : "ROUTINE"
          }
        }, {
          "name" : "specialty",
          "valueCoding" : {
            "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
            "code" : "CARDIOLOGY"
          }
        }, {
          "name" : "clinicType",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ClinicType-1",
            "code" : "HEART_FAILURE"
          }
        }, {
          "name" : "ageAndGenderAppropriate",
          "valueBoolean" : false
        }, {
          "name" : "commissioningProvisioning",
          "valueCoding" : {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-CommissioningProvisioning-1",
            "code" : "ALL_AVAILABLE_FOR_BOOKING"
          }
        } ]
      }, {
        "id" : "shortlist",
        "meta" : {
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Shortlist-List-1" ]
        },
        "resourceType" : "List",
        "extension" : [ {
          "url" : "https://fhir.nhs.uk/STU3/StructureDefinition/Extension-eRS-Shortlist-SearchCriteria-1",
          "valueReference" : {
            "reference" : "#serviceSearchCriteria"
          }
        } ],
        "status" : "current",
        "mode" : "snapshot",
        "entry" : [ {
          "item" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/ers-service",
              "value" : "11004"
            },
            "display" : "Cardiology Triage Business Service"
          }
        } ]
      }, {
        "id" : "appointment",
        "meta" : {
          "versionId" : "1",
          "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
        },
        "language" : "en",
        "resourceType" : "Appointment",
        "status" : "proposed",
        "description" : "e-Referral Appointment",
        "created" : "2021-05-06T11:21:45.652000+00:00",
        "reason" : [ {
          "coding" : [ {
            "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewReason-1",
            "code" : "TRIAGE"
          } ]
        } ],
        "incomingReferral" : [ {
          "reference" : "ReferralRequest/000000070000/_history/3"
        } ],
        "participant" : [ {
          "actor" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/ers-service",
              "value" : "11004"
            },
            "display" : "Cardiology Triage Business Service"
          },
          "status" : "accepted"
        }, {
          "actor" : {
            "identifier" : {
              "system" : "http://fhir.nhs.net/Id/nhs-number",
              "value" : "9912003888"
            }
          },
          "status" : "accepted"
        } ]
      } ],
      "status" : "active",
      "specialty" : {
        "coding" : [ {
          "system" : "_baseUrl_/STU3/CodeSystem/SPECIALTY",
          "code" : "CARDIOLOGY",
          "display" : "Cardiology"
        } ]
      },
      "subject" : {
        "identifier" : {
          "system" : "http://fhir.nhs.net/Id/nhs-number",
          "value" : "9912003888"
        }
      },
      "supportingInfo" : [ ],
      "intent" : "plan"
    }
  }, {
    "name" : "createdAppointment",
    "resource" : {
      "id" : "70001",
      "meta" : {
        "versionId" : "1",
        "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-Appointment-1", "https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Appointment-1" ]
      },
      "language" : "en",
      "resourceType" : "Appointment",
      "status" : "proposed",
      "description" : "e-Referral Appointment",
      "created" : "2021-05-06T11:21:45.652000+00:00",
      "reason" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-ReviewReason-1",
          "code" : "TRIAGE"
        } ]
      } ],
      "incomingReferral" : [ {
        "reference" : "ReferralRequest/000000070000/_history/3"
      } ],
      "participant" : [ {
        "actor" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/ers-service",
            "value" : "11004"
          },
          "display" : "Cardiology Triage Business Service"
        },
        "status" : "accepted"
      }, {
        "actor" : {
          "identifier" : {
            "system" : "http://fhir.nhs.net/Id/nhs-number",
            "value" : "9912003888"
          }
        },
        "status" : "accepted"
      } ]
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-ChangeShortlistAndSendForTriage-Response-Parameters

Parameters provided when looking to change the services a referral has currently shortlisted



resourceType
string
required
	
Allowed values: Parameters


meta
object
required
	

parameter
array
required
	
Field	Cardinality	Notes
updatedReferralRequest	1..1	
createdAppointment	1..1	
HTTP status: 400

Bad Request

HTTP status: 401

Unauthorized

HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 409

Conflict - Version supplied as part of the request does not match current version of the referral request

HTTP status: 415

Unsupported Media Type

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 422

Where status code 422 (Unprocessable Entity) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostic property for specific information regarding the error.

Error code	Description
INAPPROPRIATE_VALUE	A value, which is acceptable under different conditions, is inappropriate in the context of the other information provided.
TOO_MANY_ITEMS	In a list where a maximum number of items is specified (e.g. a Shortlist), too many entries are supplied.
MISSING_VALUE	A field defined as mandatory for an endpoint has not been provided.
PATIENT_ERROR	An error occurred while retrieving the requested patient. Do not attempt again.
INVALID_VALUE	The input provided does not conform to the expected data types and format.
INVALID_CODE	The input provided for a field is not one of the defined legal values.
UNEXPECTED_FIELD	A field is provided that is not expected as part of the request. E.g. a field is mis-spelt, was defined on a previous version of the endpoint but has subsequently been removed.
INVALID_FHIR_STRUCTURE	The FHIR data structure in the message body does not match the expected structure (e.g. an array is present for a value when no array is expected).
ORGANISATION_IS_CLOSED	The organisation supplied corresponds to an organisation that is closed.
ORGANISATION_NOT_APPROPRIATE	The organisation supplied corresponds to an organisation that is not valid for the given request.
DUPLICATE_SERVICE	Unique service value expected.
SHORTLISTED_SERVICE_NOT_IN_RESULTS	The service selected for the shortlist submitted does not satisfy the search criteria provided.
SNOMED_NOT_FOUND	A SNOMED code, while potentially valid in the latest version of the international dictionary, is not found in the e-RS dictionary.
NO_RELATIONSHIP	The user does not have a legitimate relationship with the request.
INVALID_REQUEST_TYPE	The UBRN provided exists in e-RS but does not correspond to an active request.
INVALID_REQUEST_STATE	The Request, while otherwise valid, is not in the correct state for the specific action being performed.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "value",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/STU3/CodeSystem/eRS-APIErrorCode-1",
        "code" : "UNEXPECTED_FIELD",
        "display" : "Unexpected field"
      } ]
    },
    "diagnostics" : "'parameter[0]/resource/contained[0]/parameter[1]' (unknownParameter) unknown parameter name"
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 423

Locked - resource is locked

HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A033 - Retrieve Healthcare Service
GET /R4/HealthcareService/{id}
Try this API
Overview

A patient may have 0 to 20 services associated with a single referral. A service is a place where a referrer can send a patient or obtain clinical advice concerning a specific patient. Services have attributes that can be used to understand a services functionality, terms of use, and contact information. You can use this endpoint to obtain the current version and attributes of a single service.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN

You need to have identified one service ID in order to use this endpoint.

Use case

As an authenticated user

I would like to be able to see current service information

So that I can trust that the service information is correct for my patient's referral

Related endpoints
You can retrieve service ID's on a referral via A005 - Retrieve referral request as long as the referral has a shortlist containing at least a single service.
You can check if a cached service has changed via [[HYPERLINK_A034]].
You can retrieve the attributes of an entire shortlist of services (1-20) via A035 - Search for Healthcare Services.
Sandbox test scenarios

You can test the following scenarios in our sandbox environment

Scenario	Service Id
Service and minimal attributes	1
Service and its attributes	2
Request
Path parameters
Name	Description
id	

String

The ID of the service to be retrieved. It must be valid and relate to an existing Healthcare Service otherwise a HTTP 404 response will be returned.

Example: "1"

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Response
HTTP status: 200

Response contains the Healthcare Service requested.

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


ETag	

String

Record version identifier enclosed in quotes and preceded by 'W/'. For example, W/"2".

This Weak ETag corresponds to meta.versionId attribute in the resource body.

Pattern: /^W\/"[0-9]+"$/

Example: W/"2"


Cache-Control	

String

To specify the caching policies in client requests and server responses

Example: no-cache

Body

Content type: application/fhir+json

Examples

Service and minimal attributes.

Copy
{
  "id" : "1",
  "meta" : {
    "versionId" : "1",
    "profile" : [ "https://fhir.nhs.uk/StructureDefinition/eRS-HealthcareService" ]
  },
  "language" : "en",
  "resourceType" : "HealthcareService",
  "location" : [ {
    "identifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-site-code",
      "value" : "R6901"
    }
  } ],
  "name" : "Direct Service With Minimal"
}

Service and its attributes.

Copy
{
  "id" : "2",
  "meta" : {
    "versionId" : "1",
    "profile" : [ "https://fhir.nhs.uk/StructureDefinition/eRS-HealthcareService" ]
  },
  "language" : "en",
  "resourceType" : "HealthcareService",
  "extension" : [ {
    "url" : "https://fhir.nhs.uk/StructureDefinition/Extension-eRS-HoursOfOperation",
    "valueString" : "9-5 Mon-Fri"
  }, {
    "url" : "https://fhir.nhs.uk/StructureDefinition/Extension-eRS-ServiceInstructions",
    "valueString" : "Instructions"
  }, {
    "url" : "https://fhir.nhs.uk/StructureDefinition/Extension-eRS-HealthcareService-Contact",
    "extension" : [ {
      "url" : "purpose",
      "valueCodeableConcept" : {
        "coding" : [ {
          "system" : "http://terminology.hl7.org/CodeSystem/contactentity-type",
          "code" : "PATINF",
          "display" : "Patient"
        } ]
      }
    }, {
      "url" : "telecom",
      "valueContactPoint" : {
        "system" : "phone",
        "value" : "01234567890"
      }
    } ]
  }, {
    "url" : "https://fhir.nhs.uk/StructureDefinition/Extension-eRS-HealthcareService-Contact",
    "extension" : [ {
      "url" : "purpose",
      "valueCodeableConcept" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/CodeSystem/eRS-Purpose",
          "code" : "HEALTHCARE_PROFESSIONALS",
          "display" : "Healthcare Professionals"
        } ]
      }
    }, {
      "url" : "telecom",
      "valueContactPoint" : {
        "system" : "email",
        "value" : "service@email.com"
      }
    } ]
  } ],
  "location" : [ {
    "identifier" : {
      "system" : "https://fhir.nhs.uk/Id/ods-site-code",
      "value" : "R6901"
    }
  } ],
  "name" : "Direct SVC 1",
  "type" : {
    "coding" : [ {
      "system" : "https://fhir.nhs.uk/CodeSystem/eRS-AppointmentType",
      "code" : "DAY_CASE",
      "display" : "Day Case"
    } ]
  },
  "characteristic" : [ {
    "coding" : [ {
      "system" : "https://fhir.nhs.uk/CodeSystem/eRS-RequestFlowType",
      "code" : "BOOKABLE",
      "display" : "Appointment Request"
    } ]
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
eRS-HealthcareService

A e-referral service



id
string
required
	
Example: 1


meta
object
required
	

language
string
	
Example: en


resourceType
string
required
	
Allowed values: HealthcareService


extension
array
	
Field	Cardinality	Notes
Extension-eRS-HoursOfOperation	0..1	Details the hours the current HealthcareService is operational
Extension-eRS-HealthcareService-Contact	0..*	Details any contact information for the HealthcareService
Extension-eRS-ServiceInstructions	0..1	Outlines any specific instructions that should be followed around the HealthcareService


location
array
required
	

name
string
required
	

Name of the current HealthcareService within eRS

Example: Direct SVC 1


type
object
	

characteristic
array
	
HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A035 - Search for Healthcare Services
GET /R4/HealthcareService
Try this API
Overview

A Patient may have 0 to 20 Services associated with a single referral. A service is a place where a referrer can send a patient or obtain clinical advise concerning a specific patient. You can use this endpoint to obtain a set of services (up to 20) and their associated attributes, in a single call.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN

You need to have identified one service ID in order to use this endpoint.

Use case

As an authenticated user

I would like to obtain information about all services on my patients current shortlist

So that I can review the entire shortlist of services and each services current attributes

Related endpoints
You can retrieve service ID's on a referral via A005 - Retrieve referral request as long as the referral has a shortlist of at least one service.
You can check if a cached service has changed via A037 - Retrieve Healthcare Service Version.
You can fetch the attributes of a single service via A033 - Retrieve Healthcare Service.
Sandbox test scenarios

You can test the following scenarios in our sandbox environment

Scenario	Service Id
Search for multiple service with minimal attributes	1,2
Search for multiple service max and min attributes	3,4
Search for multiple service, where the service ID's are formatted correctly, but non of the service ID's match	5,6
Request
Query parameters
Name	Description
_id	

String

One or many service ID(s) to include as part of the search. Must be supplied, otherwise a 400 response will be returned.

Example: 1,2

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Response
HTTP status: 200

Response contains the results for the supplied search criteria.

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Examples

Search for multiple service with minimal attributes.

Copy
{
  "id" : "123e4567-e89b-12d3-a456-426614174000",
  "meta" : {
    "profile" : [ "https://fhir.hl7.org.uk/StructureDefinition/UKCore-Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "timestamp" : "2021-08-04T14:35:00+00:00",
  "total" : 2,
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/FHIR/R4/HealthcareService?_id=1,2"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/FHIR/R4/HealthcareService/1",
    "resource" : {
      "id" : "1",
      "meta" : {
        "versionId" : "1",
        "profile" : [ "https://fhir.nhs.uk/StructureDefinition/eRS-HealthcareService" ]
      },
      "language" : "en",
      "resourceType" : "HealthcareService",
      "location" : [ {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-site-code",
          "value" : "R6901"
        }
      } ],
      "name" : "Direct SVC 1"
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/FHIR/R4/HealthcareService/2",
    "resource" : {
      "id" : "2",
      "meta" : {
        "versionId" : "1",
        "profile" : [ "https://fhir.nhs.uk/StructureDefinition/eRS-HealthcareService" ]
      },
      "language" : "en",
      "resourceType" : "HealthcareService",
      "active" : true,
      "location" : [ {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-site-code",
          "value" : "R6901"
        }
      } ],
      "name" : "Direct SVC 2"
    },
    "search" : {
      "mode" : "match"
    }
  } ]
}

Search for multiple service max and min attributes.

Copy
{
  "id" : "123e4567-e89b-12d3-a456-426614174001",
  "meta" : {
    "profile" : [ "https://fhir.hl7.org.uk/StructureDefinition/UKCore-Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "timestamp" : "2021-08-04T14:35:00+00:00",
  "total" : 2,
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/FHIR/R4/HealthcareService?_id=3,4"
  } ],
  "entry" : [ {
    "fullUrl" : "_baseUrl_/FHIR/R4/HealthcareService/3",
    "resource" : {
      "id" : "1",
      "meta" : {
        "versionId" : "1",
        "profile" : [ "https://fhir.nhs.uk/StructureDefinition/eRS-HealthcareService" ]
      },
      "language" : "en",
      "resourceType" : "HealthcareService",
      "extension" : [ {
        "url" : "https://fhir.nhs.uk/StructureDefinition/Extension-eRS-HoursOfOperation",
        "valueString" : "9-5 Mon-Fri"
      }, {
        "url" : "https://fhir.nhs.uk/StructureDefinition/Extension-eRS-ServiceInstructions",
        "valueString" : "Instructions"
      }, {
        "url" : "https://fhir.nhs.uk/StructureDefinition/Extension-eRS-HealthcareService-Contact",
        "extension" : [ {
          "url" : "purpose",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "http://terminology.hl7.org/CodeSystem/contactentity-type",
              "code" : "PATINF",
              "display" : "Patient"
            } ]
          }
        }, {
          "url" : "telecom",
          "valueContactPoint" : {
            "system" : "phone",
            "value" : "01234567890"
          }
        } ]
      }, {
        "url" : "https://fhir.nhs.uk/StructureDefinition/Extension-eRS-HealthcareService-Contact",
        "extension" : [ {
          "url" : "purpose",
          "valueCodeableConcept" : {
            "coding" : [ {
              "system" : "https://fhir.nhs.uk/CodeSystem/eRS-Purpose",
              "code" : "HEALTHCARE_PROFESSIONALS",
              "display" : "Healthcare Professionals"
            } ]
          }
        }, {
          "url" : "telecom",
          "valueContactPoint" : {
            "system" : "email",
            "value" : "service@email.com"
          }
        } ]
      } ],
      "active" : true,
      "location" : [ {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-site-code",
          "value" : "R6901"
        }
      } ],
      "name" : "Direct SVC 1",
      "type" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/CodeSystem/eRS-AppointmentType",
          "code" : "DAY_CASE",
          "display" : "Day Case"
        } ]
      },
      "characteristic" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/CodeSystem/eRS-RequestFlowType",
          "code" : "BOOKABLE",
          "display" : "Appointment Request"
        } ]
      } ]
    },
    "search" : {
      "mode" : "match"
    }
  }, {
    "fullUrl" : "_baseUrl_/FHIR/R4/HealthcareService/4",
    "resource" : {
      "id" : "2",
      "meta" : {
        "versionId" : "1",
        "profile" : [ "https://fhir.nhs.uk/StructureDefinition/eRS-HealthcareService" ]
      },
      "language" : "en",
      "resourceType" : "HealthcareService",
      "active" : true,
      "location" : [ {
        "identifier" : {
          "system" : "https://fhir.nhs.uk/Id/ods-site-code",
          "value" : "R6901"
        }
      } ],
      "name" : "Direct SVC 2",
      "type" : {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/CodeSystem/eRS-AppointmentType",
          "code" : "DAY_CASE",
          "display" : "Day Case"
        } ]
      },
      "characteristic" : [ {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/CodeSystem/eRS-RequestFlowType",
          "code" : "BOOKABLE",
          "display" : "Appointment Request"
        } ]
      }, {
        "coding" : [ {
          "system" : "https://fhir.nhs.uk/CodeSystem/eRS-RequestFlowType",
          "code" : "REVIEW",
          "display" : "Triage Request"
        } ]
      } ]
    },
    "search" : {
      "mode" : "match"
    }
  } ]
}

Search for multiple service, where the service ID's are formatted correctly, but non of the service ID's match

Copy
{
  "id" : "123e4567-e89b-12d3-a456-426614174002",
  "meta" : {
    "profile" : [ "https://fhir.hl7.org.uk/StructureDefinition/UKCore-Bundle" ]
  },
  "resourceType" : "Bundle",
  "type" : "searchset",
  "timestamp" : "2021-08-04T14:35:00+00:00",
  "total" : 0,
  "link" : [ {
    "relation" : "self",
    "url" : "_baseUrl_/FHIR/R4/HealthcareService?_id=5,6"
  } ],
  "entry" : [ ]
}
Schema
Collapse all Expand all
Name	Description

object
	
Bundle resource containg healthcare services


id
string
required
	
Example: 123e4567-e89b-12d3-a456-426614174000


meta
object
required
	

type
string
required
	
Allowed values: searchset


timestamp
string date-time
required
	
Example: 2021-08-04T14:35Z


total
integer
required
	

The total number of HeatlhcareServices that matched the supplied search critera

Example: 1


link
array
required
	

entry
array
required
	
Field	Cardinality	Notes
HealthcareService	0..*	
HTTP status: 400

Where status code 400 (Bad Request) is returned then an eRS-OperationOutcome-1 will be included in the body, as detailed below. Check diagnostics property for specific information regarding the error.

Error code	Description
INVALID_VALUE	Service Id format is invalid or missing
INAPPOPRIATE_VALUE	'Number of Service Ids' exceeds the range. Up to 20 service ID's can be provided.
Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1

Body

Content type: application/fhir+json

Example

Copy
{
  "meta" : {
    "profile" : [ "https://www.hl7.org/fhir/R4/operationoutcome.html" ]
  },
  "resourceType" : "OperationOutcome",
  "issue" : [ {
    "severity" : "error",
    "code" : "invalid",
    "diagnostics" : "Example diagnostics message",
    "details" : {
      "coding" : [ {
        "system" : "https://fhir.nhs.uk/CodeSystem/eRS-APIErrorCode",
        "code" : "INVALID"
      } ]
    }
  } ]
}
Schema
Collapse all Expand all
Name	Description

object
	
R4-OperationOutcome


resourceType
string
required
	
Allowed values: OperationOutcome


meta
object
required
	

issue
array
required
	
HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 415

Unsupported Media Type

Body

Content type: text/plain;charset=utf-8

Schema
Collapse all Expand all
Name	Description

string
	
HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error

A037 - Retrieve Healthcare Service Version
HEAD /R4/HealthcareService/{id}
Try this API

A Patient may have 0 to 20 services associated with a single referral. A service is a place where a referrer can send a patient or obtain clinical advice concerning a specific patient.

You can use this endpoint to obtain the current service's "version" held in e-RS, in order to compare to a locally cached version.

Supported security patterns
Healthcare worker, user-restricted access
Pre-requisites

In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:

REFERRING_CLINICIAN
REFERRING_CLINICIAN_ADMIN

You need to have identified one service ID in order to use this endpoint.

Use case

As an authenticated user

I would like to be able to see the current information about a service on my patients current shortlist

So that I can review and trust the information is still valid within the context of my patients needs

Related endpoints
You can obtain Service ID's on a referral via A005 - Retrieve referral request as long as the referral has a shortlist containing at least one service.
You can retrieve a set of services and their attributes via A035 - Search for Healthcare Services.
You can fetch the attributes of a single service via A033 - Retrieve Healthcare Service.
Sandbox test scenarios

You can test the following scenarios in our sandbox environment

Scenario	Service Id
Get Service Version	1
Request
Path parameters
Name	Description
id	

String

The ID of the service to be retrieved. It must be valid and relate to an existing Healthcare Service otherwise a HTTP 404 response will be returned.

Example: "1"

Required
Headers
Name	Description
Authorization	

String (^Bearer\ [[:ascii:]]+$)

An OAuth 2.0 bearer token.

Required in all environments except sandbox.

Example: Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM

Required

NHSD-End-User-Organisation-ODS	

String

The ODS code of the caller's Organisation

Example: R69

Required

nhsd-ers-business-function	

String

The e-RS Business Function of the caller

Allowed values: REFERRING_CLINICIAN, REFERRING_CLINICIAN_ADMIN, REFERRING_ADMIN, COMMISSIONER, SERVICE_PROVIDER_CLINICIAN_ADMIN, SERVICE_PROVIDER_CLINICIAN, SERVICE_PROVIDER_ADMIN, INFORMATION_ANALYST, BOOKING_MANAGER, ADDITIONAL_REQUIREMENTS_MANAGER

Required

X-Correlation-Id	

String

Arbitrary string value provided by API Consumer

Tends to be unique, but does not have to be

Returned, unchanged, in the response

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA

Response
HTTP status: 200

Response doesn't contain the payload. But the current version of the Healthcare Service is in the ETag Response Header.

Headers
Name	Description
x-correlation-id	

String

The X-Correlation-ID from the request header, if supplied, mirrored back.

Example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA


x-request-id	

String

The e-RS transaction id

Example: 58621d65-d5ad-4c3a-959f-0438e355990e-1


ETag	

String

Record version identifier enclosed in quotes and preceded by 'W/'. For example, W/"2".

This Weak ETag corresponds to meta.versionId attribute in the resource body.

Pattern: /^W\/"[0-9]+"$/

Example: W/"2"


cache-control	

String

To specify the caching policies in client requests and server responses

Example: no-cache

HTTP status: 403

Forbidden

HTTP status: 404

Not Found

HTTP status: 429

The e-Referral service APIs limit the number of transactions you can make per unit of time. This protects our service against excessive use and denial-of-service (DoS) attacks, and is also to encourage you to use our APIs efficiently.

Our standard rate limit for the production environment is 10 requests per second per application. APIs associated with the "Binary" resource are further restricted to 2 requests per second per application. If you go over the rate limit you'll receive a response with an HTTP status of 429 (Too Many Requests).

Our path-to-live environments have very low rate limits. They are for functional testing only - you should not use them for performance testing.

If you have problems with rate limits, contact us to discuss your application design and volumetrics, and to see whether it's appropriate to raise your rate limit.

If a 429 response is received, indicating a request has been rate limited, then you must back off and retry with exponentially increasing periods between requests. Once a request is successful again, then you may continue to send requests inline with the documented rate limits.

Example:

Receive a 429 response
Wait 1s and resend, but still receive a 429
Wait 2s and resend, but still receive a 429
Wait 4s, request is successful
Return to normal request cadence
HTTP status: 500

Internal Server Error